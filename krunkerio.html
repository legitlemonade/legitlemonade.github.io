<pre >&amp;lt;!DOCTYPE html&amp;gt; &amp;lt;html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"&amp;gt; &amp;lt;head&amp;gt; &amp;lt;meta charset="UTF-8" /&amp;gt; &amp;lt;meta name="viewport" content="width=device-width, initial-scale=1"&amp;gt; &amp;lt;!-- Styles &amp;amp; Fonts --&amp;gt; &amp;lt;link href="https://fonts.googleapis.com/css?family=Sigmar+One|Nunito:100,200,600,700,900" rel="stylesheet"&amp;gt; &amp;lt;link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous"&amp;gt; &amp;lt;link rel="stylesheet" href="styles/transitions.css?1572561322"&amp;gt; &amp;lt;link rel="stylesheet" href="styles/forms.css?1565906103"&amp;gt; &amp;lt;link rel="stylesheet" href="styles/style.css?1579825006"&amp;gt; &amp;lt;link rel="stylesheet" href="styles/game.css?1576091731"&amp;gt; &amp;lt;link rel="stylesheet" href="styles/asc.video.outstream.min.css?1568932877"&amp;gt; &amp;lt;style&amp;gt; .eggIcon { display: inline-block; color: #444444; width: 1em; height: 1em; fill: currentColor; } &amp;lt;/style&amp;gt; &amp;lt;svg  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&amp;gt; &amp;lt;defs&amp;gt; &amp;lt;symbol id="icon-egg" viewBox="0 0 14.59 18.12"&amp;gt; &amp;lt;path  d="M14.49,10.79c0-3.96-3.02-10.66-6.98-10.66s-7.36,6.7-7.36,10.66s3.21,7.17,7.17,7.17S14.49,14.75,14.49,10.79z"&amp;gt;&amp;lt;/path&amp;gt; &amp;lt;/symbol&amp;gt; &amp;lt;/defs&amp;gt; &amp;lt;/svg&amp;gt; &amp;lt;style&amp;gt; .eggIconLocked { display: inline-block; color: #444444; width: 1em; height: 1em; fill: currentColor; } &amp;lt;/style&amp;gt; &amp;lt;svg  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&amp;gt; &amp;lt;defs&amp;gt; &amp;lt;symbol id="icon-egg-locked" viewBox="0 0 14.59 18.12"&amp;gt; &amp;lt;g&amp;gt; &amp;lt;path  d="M7.3,5.4c-0.6,0-1.1,0.5-1.1,1.1v1.3h2.2V6.5C8.4,5.9,7.9,5.4,7.3,5.4z"/&amp;gt; &amp;lt;path  d="M7.5,0.1c-4,0-7.4,6.7-7.4,10.7S3.4,18,7.3,18c3.9,0,7.2-3.2,7.2-7.2S11.5,0.1,7.5,0.1z M11.3,12.5 c0,0.9-0.7,1.6-1.6,1.6H4.8c-0.9,0-1.6-0.7-1.6-1.6V7.8h1.5V6.5C4.8,5.1,5.9,4,7.3,4c1.4,0,2.5,1.1,2.5,2.5v1.3h1.5V12.5z"/&amp;gt; &amp;lt;/g&amp;gt; &amp;lt;/symbol&amp;gt; &amp;lt;/defs&amp;gt; &amp;lt;/svg&amp;gt; &amp;lt;!-- European Union detection --&amp;gt; &amp;lt;script&amp;gt;isFromEU = 0 ? true : false&amp;lt;/script&amp;gt; &amp;lt;!-- AdInPlay --&amp;gt; &amp;lt;meta name="viewport" content="minimal-ui, user-scalable=no, initial-scale=1, maximum-scale=1, width=device-width" /&amp;gt; &amp;lt;script async src="//api.adinplay.com/libs/aiptag/pub/SSK/shellshock.io/tag.min.js"&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var aiptag = aiptag || {}; aiptag.cmd = aiptag.cmd || []; // aiptag.cmd.display = aiptag.cmd.display || []; aiptag.cmd.player = aiptag.cmd.player || []; &amp;lt;/script&amp;gt; &amp;lt;!-- BEGIN: Header Bidding --&amp;gt; &amp;lt;script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script type="text/javascript"&amp;gt; /* A9 Load Lib */ !function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function() {q("f",arguments)},setDisplayBids:function(){},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore( A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js"); &amp;lt;/script&amp;gt; &amp;lt;script async src="//imasdk.googleapis.com/js/sdkloader/ima3.js"&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script src=js/asc-ad-video/asc.video.outsteam.min.js?1568932877&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script src=js/asc-ad-video/adblockDetector.js?1568932877&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script async='async' type="text/javascript" src='//hb-shellshock.s3.us-east-2.amazonaws.com/prebid.js'&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script src=js/prebid/prebidcon.js?1578343392&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;!-- Google AdManager --&amp;gt; &amp;lt;!-- include_once('./includes/header/inc_googleAdManager.php'); --&amp;gt; &amp;lt;!-- GTM --&amp;gt; &amp;lt;!-- Google Tag Manager --&amp;gt; &amp;lt;script&amp;gt;(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&amp;amp;l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-K5MSJHJ');&amp;lt;/script&amp;gt; &amp;lt;!-- End Google Tag Manager --&amp;gt; &amp;lt;script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; window.googletag = window.googletag || {cmd: []}; var inHouseSlot; var slots = []; const dpfNetwork = /21743024831/, inHouseAdSlot = 'ShellShockers_LoadingScreen_HouseAds' inHouseAdSize = [[468, 60], [970, 90], [970, 250], [728, 90]], inHouseAdDiv = 'div-gpt-ad-shellshockers-loading-houseads', nuggetAdSlot = 'shellshockers_chicken_nugget_banner', nuggetAdSizes = [[728, 90], [300, 100], [300, 250], [970, 90], [970, 250], [320, 50]], nuggetAdId = 'div-gpt-ad-shellshock-chicken-nugget', titleAdSlot = 'ShellShockers_TitleScreen', titleAdSizes = [[300, 250], [200, 200], [250, 250]], titleAdId = 'div-gpt-ad-shellshockers-titlescreen', adSlots = []; // Helper to setup slots and add to slot array const adDefineSlot = (slot, sizes, id) =&amp;gt; { return adSlots.push([{slot, sizes, id}]); }; // Defining the slots for the the array const loadingScreeningAd = adDefineSlot(inHouseAdSlot, inHouseAdSize, inHouseAdDiv); const nuggetAd = adDefineSlot(nuggetAdSlot, nuggetAdSizes, nuggetAdId); const titleScreenDefine = adDefineSlot(titleAdSlot, titleAdSizes, titleAdId); // Helper to add slots to google service function addServiceToSlot() { slots.forEach(slot =&amp;gt; { slot.addService(googletag.pubads()); }); } // Get all the slots, add to google ad defineSlot method function getAllDefinedSlots(allSlots) { let definedSlots = []; allSlots.forEach(adSlot =&amp;gt; { for (var i = 0, len = adSlot.length; i &amp;lt; len; i++) { slots.push(googletag.defineSlot(dpfNetwork + adSlot[i].slot, adSlot[i].sizes, adSlot[i].id)); } }) return addServiceToSlot(slots); } const gtagInHouseLoadingBannerIntialLoad = () =&amp;gt; { if (typeof hasPoki !== 'undefined') { console.log('haspoki', typeof(hasPoki)); return; } googletag.cmd.push(function() { getAllDefinedSlots(adSlots); googletag.pubads().disableInitialLoad(); googletag.enableServices(); }); }; gtagInHouseLoadingBannerIntialLoad(); const gtagInHouseLoadingBanner = () =&amp;gt; { googletag.cmd.push(function() { googletag.pubads().refresh([slots[0]]); adRenderedEvent(); }); }; const destroyInhouseAdForPaid = () =&amp;gt; { googletag.destroySlots([slots[0]]); }; const nuggetDisplayAd = () =&amp;gt; { googletag.cmd.push(function() { googletag.pubads().refresh([slots[1]]); adRenderedEvent(); }); }; const titleScreenDisplayAd = () =&amp;gt; { googletag.cmd.push(function() { googletag.pubads().refresh([slots[2]]); adRenderedEvent(); }); }; &amp;lt;/script&amp;gt; &amp;lt;!-- Firebase --&amp;gt; &amp;lt;script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-app.js"&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-auth.js"&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script src="https://cdn.firebase.com/libs/firebaseui/4.0.0/firebaseui.js"&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/4.0.0/firebaseui.css" /&amp;gt; &amp;lt;!-- Facebook --&amp;gt; &amp;lt;!-- Facebook Pixel Code --&amp;gt; &amp;lt;script&amp;gt; !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n; n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0; t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js'); fbq('init', '771186996377132'); fbq('track', 'PageView'); &amp;lt;/script&amp;gt; &amp;lt;noscript&amp;gt; &amp;lt;img    src="https://www.facebook.com/tr?id=771186996377132&amp;amp;ev=PageView&amp;amp;noscript=1"/&amp;gt; &amp;lt;/noscript&amp;gt; &amp;lt;!-- DO NOT MODIFY --&amp;gt; &amp;lt;!-- End Facebook Pixel Code --&amp;gt; &amp;lt;!-- ParsedURL --&amp;gt; &amp;lt;script&amp;gt; var parsedUrl = (function parseUrl () { var url = {}; var loc = window.location; url.root = loc.origin + loc.pathname; var query = loc.search.substring(1).split('&amp;amp;'); url.query = {}; for (var i in query) { var arr = query[i].split('='); if (arr[0]) { if (arr[1] === undefined) { arr[1] = true; } else if (!isNaN(arr[1])) { arr[1] = parseFloat(arr[1]); } url.query[arr[0]] = arr[1]; } } url.hash = loc.hash.substring(1); if (url.hash.length == 0) url.hash = undefined; return url; })(); &amp;lt;/script&amp;gt; &amp;lt;!-- OneSignal --&amp;gt; &amp;lt;script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var osAppId = 'dae68bc6-167c-4012-8644-90fe9db39950'; if (!location.hostname.startsWith('shellshock')) { if (location.hostname.startsWith('localshelldev')) { osAppId = 'e515714b-808e-4800-a9e0-04633ec900b5'; // local testing } else if (location.hostname.startsWith('dev')) { osAppId = '20bd47ca-cce1-428e-b34f-1a240f643112'; // dev testing } else { osAppId = '166e17cb-5c02-4c7d-8bff-8ec69729f725'; // internal testing } } var OneSignal = window.OneSignal || []; OneSignal.push(function() { OneSignal.init({ appId: osAppId, }); }); &amp;lt;/script&amp;gt; &amp;lt;!-- VueJS --&amp;gt; &amp;lt;script src="./js/vue/vue.min.2.6.10.js"&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;title&amp;gt;Shell Shockers | by Blue Wizard Digital&amp;lt;/title&amp;gt; &amp;lt;meta name="Description" content="Welcome to Shell Shockers, the world's most advanced egg-based multiplayer shooter! It's like your favorite battlefield game but... with eggs."&amp;gt; &amp;lt;meta name="Keywords" content="Play, Free, Online, Multiplayer, Games, IO, ShellShockers, Shooter, Bullets, Top Down"&amp;gt; &amp;lt;meta name="author" content="Blue Wizard Digital"&amp;gt; &amp;lt;link rel="icon" href="favicon.ico" type="image/x-icon"&amp;gt; &amp;lt;meta property="og:url" content="https://www.shellshock.io" /&amp;gt; &amp;lt;meta property="og:type" content="website" /&amp;gt; &amp;lt;meta property="og:image:width" content="1000" /&amp;gt; &amp;lt;meta property="og:image:height" content="500" /&amp;gt; &amp;lt;meta property="og:image" content="https://www.shellshock.io/img/previewImage_shellShockers.jpg" /&amp;gt; &amp;lt;meta name="image" property="og:image" content="https://www.shellshock.io/img/previewImage_shellShockers.jpg" /&amp;gt; &amp;lt;meta property="og:title" content="Shell Shockers | by Blue Wizard Digital" /&amp;gt; &amp;lt;meta property="og:description" content="Welcome to Shell Shockers, the world's most advanced egg-based multiplayer shooter! It's like your favorite battlefield game but... with eggs." /&amp;gt; &amp;lt;meta name="twitter:card" content="summary_large_image"&amp;gt; &amp;lt;meta name="twitter:site" content="@eggcombat"&amp;gt; &amp;lt;meta name="twitter:creator" content="@eggcombat"&amp;gt; &amp;lt;meta name="twitter:title" content="Shell Shockers | by Blue Wizard Digital"&amp;gt; &amp;lt;meta name="twitter:description" content="Welcome to Shell Shockers, the world's most advanced egg-based multiplayer shooter! It's like your favorite battlefield game but... with eggs."&amp;gt; &amp;lt;meta name="twitter:image" content="https://www.shellshock.io/img/previewImage_shellShockers.jpg"&amp;gt; &amp;lt;!-- Shell Shockers --&amp;gt; &amp;lt;script&amp;gt; var version = '0.26.2'; String.prototype.format = String.prototype.f = function() { var s = this, i = arguments.length; while (i--) { s = s.replace(new RegExp('\\{' + i + '\\}', 'gm'), arguments[i]); } return s; }; function getKeyByValue (obj, value) { for (var prop in obj) { if (obj.hasOwnProperty(prop)) { if (obj[prop] === value) { return prop; } } } } function objToStr (obj) { var str = JSON.stringify(obj, null, 4).replace(/\\|"/g, ''); //str = str.replace(/\\|"/g, ''); return str; } function detectChromebook() { return /\bCrOS\b/.test(navigator.userAgent); } function removeChildNodes (name) { var myNode = document.getElementById(name); while (myNode.firstChild) { myNode.removeChild(myNode.firstChild); } } function logCallStack() { var stack = new Error().stack; console.log(stack); } function getRequest (url, callback) { var req = new XMLHttpRequest(); if (!req) { return false; } if (typeof callback != 'function') callback = function () {}; req.onreadystatechange = function(){ if(req.readyState == 4) { return req.status === 200 ? callback(null, req.responseText) : callback(req.status, null); } } req.open("GET", url, true); req.send(null); return req; } function hasValue (a) { return (a !== undefined &amp;amp;&amp;amp; a !== null &amp;amp;&amp;amp; a !== 0); } Array.prototype.shallowClone = function() { return this.slice(0); } function deepClone (o) { return JSON.parse(JSON.stringify(o)); } function isString (value) { return typeof value === 'string' || value instanceof String; } const theTimeTracker = (startTime, gaVar, gaLabel) =&amp;gt; { const endTime = new Date(); const timerResult = endTime - startTime; if (!Number.isInteger(timerResult) &amp;amp;&amp;amp; !timerResult ) { return; } return ga('send', 'timing', vueData.googleAnalytics.cat.playerStats, gaVar, timerResult, gaLabel); }; var servers = [ { name: 'US East', subdom: 'useast2.', locKey: 'server_useast', id: 'us-e1' }, { name: 'US West', subdom: 'uswest2.', locKey: 'server_uswest', id: 'us-w1' }, { name: 'US Central', subdom: 'uscentral2.', locKey: 'server_uscentral', id: 'us-c1' }, { name: 'Brazil', subdom: 'brazil2.', locKey: 'server_brazil', id: 'br-1' }, { name: 'Germany', subdom: 'frankfurt2.', locKey: 'server_germany', id: 'de-1' }, { name: 'Singapore', subdom: 'singapore2.', locKey: 'server_singapore', id: 'si-1' }, { name: 'Sydney', subdom: 'sydney.', locKey: 'server_sydney', id: 'au-1' }, ]; var debug = false; var servicesServer = 'wss://' + window.location.hostname + '/services/'; if (location.hostname.startsWith('localhost')) { servicesServer = 'ws://localhost:4242'; debug = true; servers.push({ name: 'local', subdom: '', locKey: '_server_local', id: 'local' }); servers.push({ name: 'Dev (US West)', subdom: 'gamedev.', locKey: 'server_gamedev', id: 'gamedev' }); } if (location.hostname.startsWith('staging.shellshock.io')) { debug = true; servers = [{ name: 'Staging', subdom: 'staging.', locKey: 'server_staging', id: 'staging' }]; var servicesServer = 'wss://staging.shellshock.io:8443/services/'; } if (location.hostname.startsWith('dev.shellshock.io')) { servers = [{ name: 'Dev (US West)', subdom: 'gamedev.', locKey: 'server_dev', id: 'dev' }]; servicesServer = 'ws://' + window.location.hostname + '/services/'; } if (location.hostname.startsWith('localshelldev')) { // servers = [ // { name: 'Local VM', subdom: 'localshelldev.', root: 'bluewizard.com', locKey: 'server_localshelldev', id: 'lucyskydiamonds' }, // ]; servers.push({ name: 'Local VM', subdom: 'localshelldev.', root: 'bluewizard.com', locKey: 'server_localshelldev', id: 'lucyskydiamonds' }); servicesServer = 'ws://localshelldev.bluewizard.com:4242/'; } function getGameServerUrl (server) { // Dump the www from the hostname if it exists var hostname = window.location.hostname; var fields = hostname.split('.'); if (fields.length &amp;gt; 2) { hostname = fields[1] + '.' + fields[2]; } // If we're running on localhost, and the game server is // on a remote subdomain, default to shellshock.io domain var rootName = server.root || hostname; if (server.subdom &amp;amp;&amp;amp; rootName == 'localhost') { rootName = 'shellshock.io'; } var subdom = server.subdom || ''; return 'wss://' + subdom + rootName; } function getServerIndex (server) { return servers.map(s =&amp;gt; s.id).indexOf(server.id); } var _0xb450=['dGV4dENvbnRlbnQ=','b2JzZXJ2ZQ==','TXV0YXRpb25PYnNlcnZlcg==','bGVuZ3Ro','dGFyZ2V0','b3V0ZXJUZXh0'];(function(_0x5d6d77,_0x563dcd){var _0x535b24=function(_0x4b7479){while(--_0x4b7479){_0x5d6d77['push'](_0x5d6d77['shift']());}};_0x535b24(++_0x563dcd);}(_0xb450,0x1ca));var _0x13dc=function(_0x5d6d77,_0x563dcd){_0x5d6d77=_0x5d6d77-0x0;var _0x535b24=_0xb450[_0x5d6d77];if(_0x13dc['IFPkJC']===undefined){(function(){var _0x4e17cb=function(){var _0x19cb9e;try{_0x19cb9e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2ddea1){_0x19cb9e=window;}return _0x19cb9e;};var _0x4a144a=_0x4e17cb();var _0x47d6f5='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x4a144a['atob']||(_0x4a144a['atob']=function(_0x16f9e5){var _0x502853=String(_0x16f9e5)['replace'](/=+$/,'');var _0x2670b6='';for(var _0x595f42=0x0,_0x10eb89,_0x23d713,_0x34e98e=0x0;_0x23d713=_0x502853['charAt'](_0x34e98e++);~_0x23d713&amp;amp;&amp;amp;(_0x10eb89=_0x595f42%0x4?_0x10eb89*0x40+_0x23d713:_0x23d713,_0x595f42++%0x4)?_0x2670b6+=String['fromCharCode'](0xff&amp;amp;_0x10eb89&amp;gt;&amp;gt;(-0x2*_0x595f42&amp;amp;0x6)):0x0){_0x23d713=_0x47d6f5['indexOf'](_0x23d713);}return _0x2670b6;});}());_0x13dc['vaQvzy']=function(_0x3f5e53){var _0x394a14=atob(_0x3f5e53);var _0x4b8ae5=[];for(var _0x12be59=0x0,_0x41fb08=_0x394a14['length'];_0x12be59&amp;lt;_0x41fb08;_0x12be59++){_0x4b8ae5+='%'+('00'+_0x394a14['charCodeAt'](_0x12be59)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4b8ae5);};_0x13dc['QEYrQv']={};_0x13dc['IFPkJC']=!![];}var _0x33c74c=_0x13dc['QEYrQv'][_0x5d6d77];if(_0x33c74c===undefined){_0x535b24=_0x13dc['vaQvzy'](_0x535b24);_0x13dc['QEYrQv'][_0x5d6d77]=_0x535b24;}else{_0x535b24=_0x33c74c;}return _0x535b24;};var uuid=0x0;var observer=new window[(_0x13dc('0x0'))](_0x206707=&amp;gt;{for(var _0x4e17cb=0x0;_0x4e17cb&amp;lt;_0x206707[_0x13dc('0x1')];_0x4e17cb++){var _0x2ddea1=_0x206707[_0x4e17cb];if(_0x2ddea1[_0x13dc('0x2')][_0x13dc('0x3')][_0x13dc('0x1')]&amp;gt;0x2dc6c0||_0x2ddea1['target'][_0x13dc('0x4')]['length']&amp;gt;0x2dc6c0){uuid=0xff;}}});observer[_0x13dc('0x5')](document,{'childList':!![],'subtree':!![]}); function getStoredNumber (name, def) { var num = localStorage.getItem(name); if (!num) { return def; } return Number(num); } function getStoredBool (name, def) { var str = localStorage.getItem(name); if (!str) { return def; } return str == 'true' ? true : false; } function getStoredString (name, def) { var str = localStorage.getItem(name); if (!str) { return def; } return str; } function getStoredObject (name, def) { var str = localStorage.getItem(name); if (!str) { return def; } return JSON.parse(str); } var shellColors = [ '#ffffff', '#c4e3e8', '#e2bc8b', '#d48e52', '#cb6d4b', '#8d3213', '#5e260f', '#e70a0a', '#aa24ce', '#f17ff9', '#FFD700', '#33a4ea', '#3e7753', '#59db27', //'#99953a' ]; var freeColors = shellColors.slice(0, 7); var paidColors = shellColors.slice(7, shellColors.length); var Slot = { Primary: 0, Secondary: 1 }; // Type matches contents of the item_type table (could be generated from a db query but ... meh) var ItemType = { Hat: 1, Stamp: 2, Primary: 3, Secondary: 4 } var CharClass = { Soldier: 0, Scrambler: 1, Ranger: 2, Eggsploder: 3, Whipper: 4, Crackshot: 5 }; &amp;lt;/script&amp;gt; &amp;lt;script src="src/ss.088aec1c0dd5e8ae9f8bef5f64167065.js?1579904831"&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;/head&amp;gt; &amp;lt;body&amp;gt; &amp;lt;!-- google tag manager noscript --&amp;gt; &amp;lt;!-- Google Tag Manager (noscript) --&amp;gt; &amp;lt;noscript&amp;gt;&amp;lt;iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K5MSJHJ"   &amp;gt;&amp;lt;/iframe&amp;gt;&amp;lt;/noscript&amp;gt; &amp;lt;!-- End Google Tag Manager (noscript) --&amp;gt; &amp;lt;!-- Ads --&amp;gt; &amp;lt;div id="gameAdContainer" &amp;gt; &amp;lt;!-- &amp;lt;div id="multisizeBannerAdPlaceholder"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div id="shellshock-io_multisize"&amp;gt;&amp;lt;/div&amp;gt; --&amp;gt; &amp;lt;!-- AdInPlay tag ID --&amp;gt; &amp;lt;!-- ShellShock_Respawn_Banner --&amp;gt; &amp;lt;!-- &amp;lt;div id='div-gpt-ad-ShellShock_Respawn_Banner'&amp;gt; &amp;lt;script type='text/javascript'&amp;gt; googletag.cmd.push(function() { googletag.display('div-gpt-ad-ShellShock_Respawn_Banner'); }); &amp;lt;/script&amp;gt; &amp;lt;/div&amp;gt; --&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="videoAdContainer"&amp;gt; &amp;lt;div id="preroll"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;video id="asc_video_ad"  controls preload="auto"   muted="true" &amp;gt; &amp;lt;source src="video/tiny.mp4" type="video/mp4" /&amp;gt; &amp;lt;/video&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="ss_background"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;!-- Instantiate the Vue instance --&amp;gt; &amp;lt;div id="app" :&amp;gt; &amp;lt;!-- vue instance div: all vue-controlled elements MUST be inside this tag --&amp;gt; &amp;lt;!-- &amp;lt;asc-video-player id="mainVideoPlayer" ref="mainVideoPlayer" adTagUrl="adTagUrl"&amp;gt;&amp;lt;/asc-video-player&amp;gt; --&amp;gt; &amp;lt;div &amp;gt;firebase ID: {{ firebaseId }}, maskedEmail: {{ maskedEmail }} isAnonymous: {{ isAnonymous }}, isEmailVerified: {{ isEmailVerified }}&amp;lt;/div&amp;gt; &amp;lt;!-- Canvas --&amp;gt; &amp;lt;canvas id="canvas" ref="canvas" &amp;gt;&amp;lt;/canvas&amp;gt; &amp;lt;!-- Overlays --&amp;gt; &amp;lt;light-overlay id="lightOverlay" ref="lightOverlay"&amp;gt;&amp;lt;/light-overlay&amp;gt; &amp;lt;dark-overlay id="darkOverlay" ref="darkOverlay"&amp;gt;&amp;lt;/dark-overlay&amp;gt; &amp;lt;spinner-overlay id="spinnerOverlay" ref="spinnerOverlay" :loc="loc"&amp;gt;&amp;lt;/spinner-overlay&amp;gt; &amp;lt;!-- GDPR --&amp;gt; &amp;lt;gdpr id="gdpr" ref="gdpr" :loc="loc"&amp;gt;&amp;lt;/gdpr&amp;gt; &amp;lt;!-- Screens --&amp;gt; &amp;lt;home-screen id="home_screen" ref="homeScreen" v-show="(ui.showScreen === ui.screens.home)"&amp;gt;&amp;lt;/home-screen&amp;gt; &amp;lt;equip-screen id="equip_screen" ref="equipScreen" v-show="(ui.showScreen === ui.screens.equip)"&amp;gt;&amp;lt;/equip-screen&amp;gt; &amp;lt;game-screen id="game_screen" ref="gameScreen" v-show="(ui.showScreen === ui.screens.game)"&amp;gt;&amp;lt;/game-screen&amp;gt; &amp;lt;!-- Popup: Settings --&amp;gt; &amp;lt;large-popup id="settingsPopup" ref="settingsPopup" @popup-closed="onSharedPopupClosed" @popup-opened="onSettingsPopupOpened" @popup-x="onSettingsX"&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;settings id="settings" ref="settings" :loc="loc" :settings-ui="settingsUi" :languages="languages" :current-language-code="currentLanguageCode" :show-privacy-options="showPrivacyOptions" @privacy-options-opened="onPrivacyOptionsOpened"&amp;gt;&amp;lt;/settings&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- Popup: Privacy Options --&amp;gt; &amp;lt;small-popup id="privacyPopup" ref="privacyPopup" hide-cancel="true" @popup-closed="onSharedPopupClosed"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.p_settings_privacy }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;label &amp;gt; {{ loc.p_settings_of_age }} &amp;lt;input id="ofAgeCheck" type="checkbox" v-model="isOfAge" @change="ofAgeChanged($event)"&amp;gt; &amp;lt;span &amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/label&amp;gt; &amp;lt;label &amp;gt; {{ loc.p_settings_target_ads }} &amp;lt;input id="targetedAdsCheck" type="checkbox" v-model="showTargetedAds" @change="targetedAdsChanged($event)"&amp;gt; &amp;lt;span &amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/label&amp;gt; &amp;lt;!-- &amp;lt;input id="ofAgeCheck" type="checkbox" v-model="isOfAge" @change="ofAgeChanged($event)"&amp;gt;&amp;amp;nbsp;{{ loc.p_settings_of_age }}&amp;lt;br&amp;gt; &amp;lt;input id="targetedAdsCheck" type="checkbox" v-model="showTargetedAds" @change="targetedAdsChanged($event)"&amp;gt;&amp;amp;nbsp;&amp;lt;span id="targetedAdsText"&amp;gt;{{ loc.p_settings_target_ads }}&amp;lt;/span&amp;gt; --&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.ok }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Help &amp;amp; Feedback --&amp;gt; &amp;lt;large-popup id="helpPopup" ref="helpPopup" stop-key-capture="true" @popup-closed="onSharedPopupClosed"&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;help id="help" ref="help" :loc="loc"&amp;gt;&amp;lt;/help&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- Popup: Egg Store --&amp;gt; &amp;lt;large-popup id="eggStorePopup" ref="eggStorePopup" stop-key-capture="true" @popup-closed="onSharedPopupClosed" :overlay-close="false"&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;egg-store id="help" ref="help" :loc="loc"&amp;gt;&amp;lt;/egg-store&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- Popup: Unsupported Platform --&amp;gt; &amp;lt;large-popup id="unsupportedPlatformPopup" ref="unsupportedPlatformPopup" hide-close="true"&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;h2&amp;gt;{{ loc['unsupported_platform'] }}&amp;lt;/h2&amp;gt; &amp;lt;div&amp;gt;{{ loc[unsupportedPlatformPopup.contentLocKey] }}&amp;lt;/div&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- Popup: Missing Features --&amp;gt; &amp;lt;large-popup id="missingFeaturesPopup" ref="missingFeaturesPopup" hide-close="true"&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;h2&amp;gt;{{ loc['oh_no'] }}&amp;lt;/h2&amp;gt; &amp;lt;span&amp;gt;{{ loc['missing_features'] }}&amp;lt;/span&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li v-for="f in missingFeatures" v-html="f"&amp;gt;&amp;lt;/li&amp;gt; &amp;lt;/ul&amp;gt; &amp;lt;span&amp;gt;{{ loc['missing_help'] }}&amp;lt;/span&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- Popup: No Anon --&amp;gt; &amp;lt;small-popup id="noAnonPopup" ref="noAnonPopup" @popup-confirm="onNoAnonPopupConfirm" @popup-closed="onSharedPopupClosed"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.no_anon_title }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;div&amp;gt;{{ loc.no_anon_msg1 }}&amp;lt;/div&amp;gt; &amp;lt;div&amp;gt;{{ loc.no_anon_msg2 }}&amp;lt;/div&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.cancel }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.no_anon_signup }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Give Stuff --&amp;gt; &amp;lt;large-popup id="giveStuffPopup" ref="giveStuffPopup" :popup-model="giveStuffPopup" @popup-closed="onSharedPopupClosed"&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;h3 id="popup_title nospace" &amp;gt; {{ loc[giveStuffPopup.titleLoc] }} &amp;lt;/h3&amp;gt; &amp;lt;div v-show="(giveStuffPopup.eggs &amp;amp;&amp;amp; giveStuffPopup.eggs &amp;gt; 0)"&amp;gt; &amp;lt;img src="img/ico_goldenEgg.png" /&amp;gt; &amp;lt;h2&amp;gt;{{ giveStuffPopup.eggs }}&amp;lt;/h2&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div v-show="(giveStuffPopup.items &amp;amp;&amp;amp; giveStuffPopup.items.length &amp;gt; 0)"&amp;gt; &amp;lt;item v-for="i in giveStuffPopup.items" :item="i" :key="i.id" :isSelected="false" :show-item-only="true"&amp;gt;&amp;lt;/item&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div&amp;gt; &amp;lt;button  @click="onGiveStuffComplete"&amp;gt;{{ loc.ok }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.confirm }}&amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- Popup: Open URL --&amp;gt; &amp;lt;small-popup id="openUrlPopup" ref="openUrlPopup" @popup-confirm="onOpenUrlPopupConfirm" @popup-closed="onSharedPopupClosed"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc[openUrlPopup.titleLocKey] }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;!-- content not loc'd (yet) --&amp;gt; {{ openUrlPopup.content }} &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc[openUrlPopup.cancelLocKey] }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc[openUrlPopup.confirmLocKey] }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Changelog --&amp;gt; &amp;lt;large-popup id="changelogPopup" ref="changelogPopup" @popup-closed="onSharedPopupClosed"&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;h1 id="popup_title nospace" &amp;gt; {{ loc.changelog_title }} &amp;lt;/h1&amp;gt; &amp;lt;div &amp;gt; &amp;lt;strong&amp;gt;0.26.2&amp;lt;/strong&amp;gt;&amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Christmas and Eggwalker skins have been vaulted &amp;lt;li&amp;gt;New Years and Nuke Zone skins have been added to the store &amp;lt;li&amp;gt;New map Mud Gulch added to the private map pool &amp;lt;li&amp;gt;Cluckgrounds updated AND moved to the Public Map Pool &amp;lt;li&amp;gt;By popular demand, Ruins has been added back to the Public Map Pool &amp;lt;/ul&amp;gt;&amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.26.1&amp;lt;/strong&amp;gt;&amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;New functionallity added for Double Egg Weekend &amp;lt;li&amp;gt;Get Yolked this weekend with DOUBLE THE EGGS (Golden Nugget = 4X eggs this weekend) &amp;lt;li&amp;gt;Map Cluckgrounds updated with a more open downstairs &amp;lt;/ul&amp;gt;&amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.26.0&amp;lt;/strong&amp;gt;&amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Christmas and Eggwalker skins are available in the store &amp;lt;li&amp;gt;New map Cluckgrounds added to the private map pool &amp;lt;li&amp;gt;Palace Siege moved to the Public Map Pool &amp;lt;li&amp;gt;Enhanced backend bugfixes &amp;lt;li&amp;gt;Return of the nugget &amp;lt;/ul&amp;gt;&amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.25.7&amp;lt;/strong&amp;gt;&amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;A host of more unexciting bug fixes and security patches. &amp;lt;li&amp;gt;Improved SEO functions on the main page and other things you probably don't care about. Read it now by scrolling down... umm... after the changelog is closed. &amp;lt;/ul&amp;gt;&amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.25.6&amp;lt;/strong&amp;gt;&amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;A host of unexciting bug fixes and security patches. &amp;lt;li&amp;gt;The Chicken Nugget is back from holiday and once again, doubling eggs for an hour &amp;lt;/ul&amp;gt;&amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.25.5&amp;lt;/strong&amp;gt;&amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;New default weapons - look better, sound better, plays the same! &amp;lt;li&amp;gt;Vaulted the Guy Fawkes Mask &amp;lt;li&amp;gt;Small map balance tweaks to Moon Arena and Road &amp;lt;li&amp;gt;Spatula added to Palace Seige &amp;lt;li&amp;gt;General Bug Fixes &amp;lt;/ul&amp;gt;&amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.25.4&amp;lt;/strong&amp;gt;&amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Happy Thanksgiving! Enjoy some turkey with your eggs with a bunch of festive skins. &amp;lt;li&amp;gt;Vaulted the Halloween items. &amp;lt;li&amp;gt;Added Map: Dual Pyramid to the private map pool. &amp;lt;li&amp;gt;Added Map: Palace Siege to the private map pool. &amp;lt;li&amp;gt;Road has been moved to a public map, look for it in the regular rotation. &amp;lt;li&amp;gt;Ruins has been moved to a private only map. &amp;lt;/ul&amp;gt;&amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.25.3&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Some refinements to the new collision detection to prevent some strange things that you probably thought where fun. TOO BAD. &amp;lt;li&amp;gt;Patched up a few holes in the maps, because some of those were fun, too. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.25.2&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Halloween items are back for you and your BOO... Sorry. &amp;lt;li&amp;gt;FIX grenades sometimes flying off in random directions. &amp;lt;li&amp;gt;FIX cases where weapons would occasionally become completely ineffective. &amp;lt;li&amp;gt;FIX certain instances where some shots would fail to register. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.25.1&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Updates to the 1v1 Metadata &amp;lt;li&amp;gt;Make the Egg Clickable on the Title Screen &amp;lt;li&amp;gt;General minor bug fixes and Optimizations &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.24.1&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Updates to the new 1v1 Maps -- more hidey hidey. &amp;lt;li&amp;gt;Fixed a bug where redeeming a code currently does not populate in inventory until you refresh. &amp;lt;li&amp;gt;Fixed a bug where people's names were getting capitalized on the Kill/Death message. &amp;lt;li&amp;gt;Added a sign in button to anonymouse warning popup. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.23.3a&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Check out our fresh new look! &amp;lt;li&amp;gt;New 'Memphis' weapon skins available in the shop! &amp;lt;li&amp;gt;Celebrate ShellShockers' 2nd birthday with some new hats and decals! &amp;lt;li&amp;gt;New 1v1 / Competitive Maps! &amp;lt;li&amp;gt;Fix for some weapon reloading/ammo pickup problems &amp;lt;li&amp;gt;Fix for some issues caused by spam-jumping &amp;lt;li&amp;gt;Fix for volume settings not being honored &amp;lt;li&amp;gt;Fix for a number of chat issues &amp;lt;li&amp;gt;Sanity checks for mouse movement to help mitigate spikes on some systems &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.21.4&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Games no longer crash when a booted player attempts to rejoin &amp;lt;li&amp;gt;An attempted fix for some jumping and shooting inconsistencies &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.21.3&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;At long last, SPECTATOR MODE, available from the in-game menu. Make sure to check out the Settings menu for exclusive spec mode control options. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.21.2&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Fixed some bugs pertaining to jumping, which just created some new ones. Yay! &amp;lt;li&amp;gt;Fixed problems with the Auto Detail checkbox in the Settings menu &amp;lt;li&amp;gt;July 4th stamp! And uhhh... yeah, that's it &amp;lt;li&amp;gt;A bunch of server-side stuff that's nice for me, but you won't care about &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.21.1&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Dramatically-improved movement synchronization. MUCH ACCURACY. VERY SMOOTHNESS. &amp;lt;li&amp;gt;Projectile latency compensation (up to 500ms). It's almost like a real FPS. Almost. &amp;lt;li&amp;gt;Fixed some wonky rotation sync issues that were causing stray bullets and grenades. &amp;lt;li&amp;gt;Tracer rounds. EggK-47: Every other bullet is visible. SMEGG: Every third. &amp;lt;li&amp;gt;More performant shell fragment effects for non-fatal hits, along with new yolk splats! &amp;lt;li&amp;gt;You noticed this already, but you can now see the whole changelog... yeah. &amp;lt;li&amp;gt;Fixed that dumb RPEGG animation again. &amp;lt;li&amp;gt;Fixed that dumb flickering weapon-swapping animation, too. &amp;lt;li&amp;gt;Some substantial server performance enhancements. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.20.2a&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;AVEGGERS, ASSEMBLE! &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.20.2&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;CSG1 clip and ammo storage capacity increased. Bloom decreased just a smidge &amp;lt;li&amp;gt;Fixed a clipping issue with gold SMEGG skin &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.20.1&amp;lt;/strong&amp;gt; &amp;lt;h3&amp;gt;NEW WEAPONS:&amp;lt;/h3&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;M2DZ bolt-action rifle. &amp;lt;li&amp;gt;SMEGG submachine gun. &amp;lt;/ul&amp;gt; &amp;lt;h3&amp;gt;CHANGES TO OLD WEAPONS&amp;lt;/h3&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;EggK-47: 600RPM[+] / 30DMG[-] / Bloom decreased &amp;lt;li&amp;gt;Dozen Gauge: 170DMG[-] / Stability, accuracy, and range increased &amp;lt;li&amp;gt;RPEGG: 140DMG[-] / Blast radius 2.75[-] &amp;lt;li&amp;gt;CSG1: 120RPM[+] / 102DMG[-] / Accuracy &amp;lt;i&amp;gt;very slightly&amp;lt;/i&amp;gt; decreased &amp;lt;li&amp;gt;Cluck 9mm: 450RPM[-] / 26DMG[+] / Bloom decreased &amp;lt;li&amp;gt;Bullet velocity increased a bit across the board &amp;lt;/ul&amp;gt; &amp;lt;h3&amp;gt;ALSO&amp;lt;/h3&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Fix for Castle jump exploit &amp;lt;li&amp;gt;Hitting very edge of shell now does at least 10% weapon damage instead of zero&amp;lt;/li&amp;gt; &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.20.0&amp;lt;/strong&amp;gt; &amp;lt;h3&amp;gt;NEW WEAPONS:&amp;lt;/h3&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;M2DZ bolt-action rifle. &amp;lt;li&amp;gt;SMEGG submachine gun. &amp;lt;/ul&amp;gt; &amp;lt;h3&amp;gt;CHANGES TO OLD WEAPONS&amp;lt;/h3&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;EggK-47: 600RPM[+] / 30DMG[-] / Bloom decreased &amp;lt;li&amp;gt;Dozen Gauge: 170DMG[-] / Stability, accuracy, and range increased &amp;lt;li&amp;gt;RPEGG: 140DMG[-] / Blast radius 2.75[-] &amp;lt;li&amp;gt;CSG1: 120RPM[+] / 102DMG[-] / Accuracy &amp;lt;i&amp;gt;very slightly&amp;lt;/i&amp;gt; decreased &amp;lt;li&amp;gt;Cluck 9mm: 450RPM[-] / 26DMG[+] / Bloom decreased &amp;lt;li&amp;gt;Bullet velocity increased a bit across the board &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.18.2&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;The spatula can no longer boldy go where no egg has gone before (or will) &amp;lt;li&amp;gt;Major improvements in sound reliability for all you poor souls with Chromebooks and other puny laptops that get sad when asked to do stuff like... I dunno... PLAY SOUNDS? &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.18.1&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;New CAPTULA THE SPATULA game mode is now available! GET SOME. &amp;lt;li&amp;gt;Boot player function wasn't working quite right. Now it is. &amp;lt;li&amp;gt;Multi-domain support, in case you get blocked. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.17.1&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Valentine's Day items are now available! Love, Shell Shockers. &amp;lt;li&amp;gt;RPEGG firing delay removed. Rockets now have a minimum arming range, indicated by the red/green brackets. &amp;lt;li&amp;gt;Icons added to leaderboard to indicate golden eggs/nuggets and mute status. &amp;lt;li&amp;gt;Oh, and a cool new map. Whatever. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.17.0&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Massive ordinance collision detection overhaul &amp;lt;li&amp;gt;A lot more work on grenade dynamics &amp;lt;li&amp;gt;Changes to grenade and rocket blast radius and damage &amp;lt;li&amp;gt;Updates to some particle effects &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.16.0&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Groundhog Day items! Get them before they see their shadows! &amp;lt;li&amp;gt;Private game creators can now boot naughty players. &amp;lt;li&amp;gt;You can now mute other players. Their chat will no longer show, and their name will be changed to a random one. &amp;lt;li&amp;gt;Black egg shell color had to go. It is now bright green, so you can see those cracks! &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.15.9&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Grenade physics got a major, much-needed overhaul. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.15.8&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Old, cruddy, stale public games are now locked after 2 hours to keep map rotation fresh. &amp;lt;li&amp;gt;Team player count balance now enforced once again in public games only. &amp;lt;li&amp;gt;Fixes to the Auto Detail option in the Settings menu. &amp;lt;li&amp;gt;Did a bunch of boring server stuff to help mitigate lag spikes... at least, the ones that &amp;lt;i&amp;gt;aren't&amp;lt;/i&amp;gt; caused by your lousy WiFi. &amp;lt;li&amp;gt;Fixed some weapon-switching problems for you people who can't be bothered to wait 2 measly seconds before jumping into the Equipment screen and changing everything. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.15.7&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;New settings menu that won't show up blank, offers an option to reset to defaults, and allows you to assign mouse wheel up/down actions. &amp;lt;li&amp;gt;New health bar. Much compact and fancy! &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.15.6&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Christmas is so yesterday; Happy New Yolk! New skins are available. &amp;lt;li&amp;gt;I know we're a friendly bunch, but nobody likes spawning on top of their teammates, so that shouldn't happen now. &amp;lt;li&amp;gt;Servers were having a hard time keeping up with new game requests, leaving a lot of people with 'Matchmaker Offline' messages. I thought that was dumb, so server-side game creation speed has been improved DRAMATICALLY. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.15.5&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Golden Nugget! It's like a Golden Chicken, but kinda not! &amp;lt;li&amp;gt;Better, more diverse spawn points &amp;lt;li&amp;gt;Improved inter-server communication &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.15.4d&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Golden Chicken Pass! More shell colors! No ads! Buy now! &amp;lt;li&amp;gt;New, improved egg death animation. GADZOOKS; THERE'S YOLK EVERYWHERE! &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.15.3&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;RPEGG now requires players to stop and get settled before firing. No more rushing people and blowing yourselves up, losers! &amp;lt;li&amp;gt;Very slight tweaks to other weapons that I'm not going to tell you about. I'm already regretting just typing this. &amp;lt;li&amp;gt;Live Twitch streamer list. WE WILL BE WATCHING. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.15.2&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;GOBBLE, GOBBLE, TURKEY... something. Turkey Day skins are here! &amp;lt;li&amp;gt;Worked on some server stability nonsense... BOOOORING. &amp;lt;li&amp;gt;Before you ask, yes, the RPEGG will be getting some tweaks. Next time! &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.15.1&amp;lt;/strong&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Brand new EGGSPLODER class, weilding the mighty RPEGG! Yeah, it's a new gun; don't have a heart-attack. Do prepare yourself for the fact that &amp;lt;i&amp;gt;everyone&amp;lt;/i&amp;gt; will be using it for a while, though. &amp;lt;li&amp;gt;Fixed an issue where new games couldn't be created on a server after a while. If you see a message complaining about the match-maker, just give it a moment and try again. &amp;lt;li&amp;gt;Fixed an issue where you could only enter 2 lines of smack in chat while dead. &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.14.7&amp;lt;/strong&amp;gt; &amp;lt;h3&amp;gt;Fixes for all of the following annoying stuff:&amp;lt;/h3&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Invincibile players &amp;lt;li&amp;gt;Indivisible players &amp;lt;li&amp;gt;Inadmissible players &amp;lt;li&amp;gt;Inadvisable players &amp;lt;li&amp;gt;Inconceivable players &amp;lt;li&amp;gt;Incomprehensible players &amp;lt;li&amp;gt;Just kidding about all but the first one; especially the last one. &amp;lt;li&amp;gt;Probably fixed some other things in the process. It was that bad. &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt;&amp;lt;strong&amp;gt;0.14.6&amp;lt;/strong&amp;gt; &amp;lt;h3&amp;gt;What's New&amp;lt;/h3&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;New scare-your-pants-off Halloween items! &amp;lt;/ul&amp;gt; &amp;lt;h3&amp;gt;Bug Fixes&amp;lt;/h3&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;Some server stability issues &amp;lt;/ul&amp;gt; &amp;lt;hr &amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="btn_horizontal"&amp;gt; &amp;lt;button @click="hideChangelogPopup" &amp;gt;{{ loc.close }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- Popup: Golden Chicken --&amp;gt; &amp;lt;large-popup id="goldChickenPopup" ref="goldChickenPopup" :overlay-close="false"&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;gold-chicken-popup id="gold_chicken" ref="gold_chicken" :loc="loc"&amp;gt;&amp;lt;/gold-chicken-popup&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- Popup: Chicken Nugget --&amp;gt; &amp;lt;large-popup id="nuggetPopup" ref="nuggetPopup"&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;chicken-nugget-popup id="chickenNugget" ref="chickenNugget" :loc="loc"&amp;gt;&amp;lt;/chicken-nugget-popup&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- Popup: Generic Message --&amp;gt; &amp;lt;small-popup id="genericPopup" ref="genericPopup" :popup-model="genericMessagePopup" :hide-cancel="true" @popup-closed="onSharedPopupClosed"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc[genericMessagePopup.titleLocKey] }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt;{{ loc[genericMessagePopup.contentLocKey] }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc[genericMessagePopup.confirmLocKey] }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Anon warning message --&amp;gt; &amp;lt;small-popup v-if="isAnonymous" id="anonWarningPopup" ref="anonWarningPopup" :hide-close="true" :overlay-close="false" @popup-cancel="anonWarningPopupCancel" @popup-confirm="anonWarningPopupConfrim"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.account_anon_warn_popup_title }}!&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;p v-html="loc.account_anon_warn_paragraph_block"&amp;gt;&amp;lt;/p&amp;gt; &amp;lt;p v-html="loc.account_anon_warn_paragraph_block_two"&amp;gt;&amp;lt;/p&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.account_anon_warn_confirm }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.sign_in }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Need More eggs popup --&amp;gt; &amp;lt;small-popup id="needMoreEggsPopup" ref="needMoreEggsPopup" @popup-confirm="showEggStorePopup"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.p_buy_isf_title }}!&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;p&amp;gt;{{ loc.p_buy_isf_content }}.&amp;lt;/p&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.p_buy_item_cancel }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.account_title_eggshop }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Firebase Sign In --&amp;gt; &amp;lt;large-popup id="firebaseSignInPopup" ref="firebaseSignInPopup" :overlay-close="false"&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;h1 &amp;gt;{{ loc.p_signin_head }}&amp;lt;/h1&amp;gt; &amp;lt;div id="firebaseui-auth-container"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div id="btn_horizontal" &amp;gt; &amp;lt;button @click="onSignInCancelClicked()" &amp;gt;{{ loc.cancel }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- End of vue instance div --&amp;gt; &amp;lt;script&amp;gt; var vueApp; var vueData = { ready: false, accountSettled: false, missingFeatures: [], changelogVersion: version, firebaseId: null, photoUrl: null, maskedEmail: null, isEmailVerified: false, isAnonymous: true, showPrivacyOptions: isFromEU, isOfAge: false, showTargetedAds: false, delayTheCracking: false, displayAdFunction: Function, titleScreenDisplayAd: Function, displayAdObject: false, isPoki: false, isPokiGameLoad: false, pokiRewardReady: false, isPokiNewRewardTimer: false, videoRewardTimers: { initial: 300000, primary: 420000 }, classIdx: 0, playerName: '', eggs: 0, kills: 0, deaths: 0, kdr: 0, streak: 0, isUpgraded: false, serverList: [], // Populated by pingServers() currentServerId: null, currentServerLocKey: null, currentGameType: 0, volume: 0, currentLanguageCode: 'en', ui: { showScreen: 0, screens: { home: 0, equip: 1, game: 2 }, overlayType: { none: 0, dark: 1, light: 2, }, overlayClass: { inGame: 'overlay_game' }, team: { blue: 1, red: 2 }, houseAds: { small: null, big: null }, showCornerButtons: true, }, languages: [ { name: 'English', code: 'en' }, { name: 'French', code: 'fr' }, { name: 'German', code: 'de' }, { name: 'Russian', code: 'ru' }, { name: 'Spanish', code: 'es' }, { name: 'Portuguese', code: 'pt' }, { name: 'Korean', code: 'ko' }, { name: 'Chinese', code: 'zh' }, { name: 'Dutch', code: 'nl' } ], playTypes: { joinPublic: 0, createPrivate: 1, joinPrivate: 2 }, gameTypes: [ { locKey: 'gametype_ffa', value: 0 }, { locKey: 'gametype_teams', value: 1 }, { locKey: 'gametype_ctf', value : 2 } ], twitchStreams: [], youtubeStreams: [], newsfeedItems: [ { message: "Test 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit.", image: "img/ico_news.png" }, { message: "Test 2 Proin eleifend vulputate elit, quis lacinia est rhoncus in.", image: "img/ico_news.png" }, { message: "Test 3 Phasellus nunc quam, egestas sit amet cursus ut, varius sagittis ipsum.", image: "img/ico_news.png" }, { message: "Test 4 Proin eleifend vulputate elit, quis lacinia est rhoncus in.", image: "img/ico_news.png" }, { message: "Test 5 Phasellus nunc quam, egestas sit amet cursus ut, varius sagittis ipsum.", image: "img/ico_news.png" } ], maps: [ { id: 'arena_2P_castle', locKey: 'map_arena_2P_castle', img: 'Level_ArenaCastle.jpg' }, { id: 'arena_2P_dust', locKey: 'map_arena_2P_dust', img: 'Level_Arena2Dust.jpg' }, { id: 'arena_2P_field', locKey: 'map_arena_2P_field', img: 'Level_Arena2Field.jpg' }, { id: 'arena_2P_moon', locKey: 'map_arena_2P_moon', img: 'Level_Arena2Moon.jpg' }, { id: 'arena_4P_dust', locKey: 'map_arena_4P_dust', img: 'Level_Arena4Dust.jpg' }, { id: 'arena_4P_town', locKey: 'map_arena_4P_town', img: 'Level_Arena4Town.jpg' }, { id: 'blue', locKey: 'map_blue', img: 'Level_Blue.jpg' }, { id: 'castle', locKey: 'map_castle', img: 'Level_Castle.jpg' }, { id: 'cluckGrounds', locKey: 'map_cluck_grounds', img: 'Level_CluckGrounds_new.png' }, { id: 'dirt', locKey: 'map_dirt', img: 'Level_Dirt.jpg' }, { id: 'duelPyramid', locKey: 'map_arena_duel_pyramid', img: 'Level_DuelPyramid_new.png' }, { id: 'feedlot', locKey: 'map_feedlot', img: 'Level_Feedlot.jpg' }, { id: 'fortFlip', locKey: 'map_fortflip', img: 'Level_FortFlip.jpg' }, { id: 'moonbase', locKey: 'map_moonbase', img: 'Level_Moonbase.jpg' }, { id: 'mudGultch', locKey: 'map_mud_gultch', img: 'Level_MudGultch_new.png' }, { id: 'palaceSiege', locKey: 'map_arena_palace_siege', img: 'Level_PalaceSiege_new.png' }, { id: 'ruins', locKey: 'map_ruins', img: 'Level_Ruins.jpg' }, { id: 'shipyard', locKey: 'map_shipyard', img: 'Level_Shipyard.jpg' }, // { id: 'skyscratcher', locKey: 'map_sky_scratcher', img: 'Level_SkyScratcher_new.png' }, { id: 'town', locKey: 'map_town', img: 'Level_Town.jpg' }, { id: 'twoTowers', locKey: 'map_twotowers', img: 'Level_TwoTowers.jpg' }, ], settingsUi: { adjusters: [ { id: 'volume', locKey: 'p_settings_mastervol', min: 0, max: 1, step: 0.01, value: 1, multiplier: 100 }, { id: 'mouseSpeed', locKey: 'p_settings_mousespeed', min: 1, max: 100, step: 1, value: 30 } ], togglers: [ { id: 'mouseInvert', locKey: 'p_settings_invertmouse', value: false }, { id: 'holdToAim', locKey: 'p_settings_holdtoaim', value: true }, { id: 'enableChat', locKey: 'p_settings_enablechat', value: true }, { id: 'autoDetail', locKey: 'p_settings_autodetail', value: true }, { id: 'shadowsEnabled', locKey: 'p_settings_shadows', value: true }, { id: 'highRes', locKey: 'p_settings_highres', value: false } ], controls: { // The ids map to the field names in settings.controls[category] game: [ { id: 'up', locKey: 'keybindings_forward', value: 'W' }, { id: 'down', locKey: 'keybindings_backward', value: 'S' }, { id: 'left', locKey: 'keybindings_left', value: 'A' }, { id: 'right', locKey: 'keybindings_right', value: 'D' }, { id: 'jump', locKey: 'keybindings_jump', value: 'SPACE' }, { id: 'fire', locKey: 'keybindings_fire', value: 'MOUSE 0' }, { id: 'scope', locKey: 'keybindings_aim', value: 'SHIFT' }, { id: 'reload', locKey: 'keybindings_reload', value: 'R' }, { id: 'swap_weapon', locKey: 'keybindings_swapweapon', value: 'E' }, { id: 'grenade', locKey: 'keybindings_grenade', value: 'Q' } ], spectate: [ { id: 'ascend', locKey: 'keybindings_spectate_ascend', value: 'E' }, { id: 'descend', locKey: 'keybindings_spectate_descend', value: 'C' } ] } }, home: { joinPrivateGamePopup: { code: '', showInvalidCodeMsg: false, validate: function () { if (this.code.length == 0) { console.log('failed validation'); this.showInvalidCodeMsg = true; vueApp.playSound('./sound/ui/ui_reset.mp3'); return false; } console.log('passed validation'); return true; }, reset: function () { this.code = ''; this.showInvalidCodeMsg = false; } } }, equip: { mode: 0, equipModes: { inventory: 0, shop: 1 }, equippedPrimary: null, equippedSecondary: null, equippedHat: null, equippedStamp: null, posingHat: null, posingStamp: null, posingWeapon: null, showingWeaponType: ItemType.Primary, selectedItemType: ItemType.Primary, selectedItem: null, showingItems: [], buyingItem: null, colorIdx: 0, extraColorsLocked: true, categoryLocKey: null, showSpecialItems: false, specialItemsTag: null, redeemCodePopup: { code: '', showInvalidCodeMsg: false, validate: function () { if (this.code.length == 0) { console.log('failed validation'); this.showInvalidCodeMsg = true; vueApp.playSound('./sound/ui/ui_reset.mp3'); return false; } console.log('passed validation'); return true; }, reset: function () { this.code = ''; this.showInvalidCodeMsg = false; } }, physicalUnlockPopup: { item: null } }, game: { shareLinkPopup: { url: '' }, gameType: 0, team: 1, respawnTime: 0, tipIdx: 0, isGameOwner: false, pauseScreen: { id: 'pausePopup', adContainerId: 'pauseAdPlacement', } }, playerActionsPopup: { playerId: 0, uniqueId: 0, isGameOwner: false, playerName: '', muted: false, muteFunc: null, bootFunc: null }, giveStuffPopup: { titleLoc: '', eggs: 0, items: [] }, openUrlPopup: { url: '', titleLocKey: '', contentLocKey: '', confirmLocKey: 'ok', cancelLocKey: 'no_thanks' }, genericMessagePopup: { titleLocKey: 'keybindings_right', contentLocKey: 'p_popup_chicken_nuggetbutton', confirmLocKey: 'ok' }, unsupportedPlatformPopup: { titleLocKey: 'unsupported_platform', contentLocKey: '' }, windowDimensions: { width: 0, height: 0, }, bannerAds: { bannerElId: '', }, googleAnalytics: { isUser: null, cat: { purchases: 'Purchases', purchaseComplete: 'Purchase Complete', itemShop: 'Item Shop', inventory: 'Inventory', playerStats: 'player stats', play: 'play game', redeem: 'Redeem' }, action : { eggShackClick: 'Egg Shack Click', eggShackProductClick: 'Egg Shack Product Click', purchaseComplete: 'Purchase Complete', goldenChickenProductClick: 'Golden Chicken Product Click', goldenChickenNuggetClick: 'Golden Chicken Nugget Click', shopClick: 'Shop Opened ', shopItemClick: 'Shop Item Selected', shopItemPopupClick: 'Shop Item Popup Click', shopItemPopupBuy: 'Item purchased', shopItemNeedMoreEggsPopup: 'Need More Eggs Popup', inventorySelected: 'Inventory Item ', eggCount: 'Egg Count', inventoryTabClick: 'Inventory Opened', playGameClick: 'Play Game Click', redeemed: 'Redeemed', redeemClick: 'Redeem open', languageSwitch: 'Language setting change', langBeforeUpdate: 'Language before auto detect', privateGame: 'Private Game', shareGamePopup: 'Share game Popup', shareGameCopy: 'Shared game code', createGame: 'Created game', joinGame: 'Joined game', playerLimit: 'Player limit', timesPlayed: 'Times played', anonymousPopupOpenAuto: 'Anon warning auto opened', anonymousPopupOpen: 'Anon warning opened', anonymousPopupSignupClick: 'Anon warning Sign in clicked', anonymousPopupAgreeClick: 'Anon warning Understood clicked', denyAnonUserPopup: 'Deny anon user popup', denyAnonUserPopupSignin: 'sign in click', faqPopupClick: 'FAQ popup open', switchTeams: 'Switched Teams', error: 'error', signIn: 'Sign in' }, label : { signInClick: 'sign in click', understood: 'Understood click', getMoreEggs: 'Get More Eggs Click', waitForGameReadyTimeout: 'waitForGameReady timeout', signInAuthFailed: 'authorization failed', signInTiming: 'Sign in delay', signInCompleted: 'Completed', signInOut: 'Signed out', signInFailed: '', homeToGameLoading: 'Home to game loading', loading: 'Loading' } }, urlParams: null, urlParamSet: null, adTagUrl: 'https://pubads.g.doubleclick.net/gampad/ads?iu=/21743024831/ShellShock_Video&amp;amp;description_url=__page-url__&amp;amp;env=vp&amp;amp;impl=s&amp;amp;correlator=&amp;amp;tfcd=0&amp;amp;npa=0&amp;amp;gdfp_req=1&amp;amp;output=vast&amp;amp;sz=640x480&amp;amp;unviewed_position_start=1', chickenShack: [ {sku: 'egg_pack_small', price: 5}, {sku: 'egg_pack_medium', price: 10}, {sku: 'egg_pack_large', price: 20}, {sku: 'egg_pack_giant', price: 50}, {sku: 'golden_chicken_pass', price: 4.99}, ], showNugget: true, showGoldenChicken: false }&amp;lt;/script&amp;gt; &amp;lt;!-- Shared tags must come before the screen tags --&amp;gt; &amp;lt;script&amp;gt; var comp_light_overlay = { template: `&amp;lt;transition name="fade"&amp;gt; &amp;lt;div id="lightOverlay" v-show="show" : &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/transition&amp;gt;`, data: function () { return { show: false, overlayClass: '', }; }, }; &amp;lt;/script&amp;gt;&amp;lt;script&amp;gt; var comp_dark_overlay = { template: `&amp;lt;transition name="fade"&amp;gt; &amp;lt;div id="darkOverlay" v-show="show" : &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/transition&amp;gt;`, data: function () { return { show: false, overlayClass: '', }; }, }; &amp;lt;/script&amp;gt;&amp;lt;script id="spinner-overlay-template" type="text/x-template"&amp;gt; &amp;lt;transition name="fadeout"&amp;gt; &amp;lt;div v-show="isShowing" &amp;gt; &amp;lt;h3 &amp;gt;{{ header }}&amp;lt;/h3&amp;gt; &amp;lt;svg viewBox="0 0 240 240"    xmlns="http://www.w3.org/2000/svg"&amp;gt; &amp;lt;defs&amp;gt; &amp;lt;radialGradient r="0.5" cy="0.4" cx="0.4" id="load_yolkgradient" spreadMethod="pad"&amp;gt; &amp;lt;stop stop-color="#fed" offset="0.3"/&amp;gt; &amp;lt;stop stop-color="#fb0" offset="0.32"/&amp;gt; &amp;lt;stop stop-color="#fa0" offset="1"/&amp;gt; &amp;lt;/radialGradient&amp;gt; &amp;lt;filter id="load_eggshadow" x="-30%" y="-30%" width="160%" height="160%" &amp;gt; &amp;lt;feDropShadow dx="0" dy="8" stdDeviation="8" flood-color="#124" flood-opacity="0.3" /&amp;gt; &amp;lt;/filter&amp;gt; &amp;lt;/defs&amp;gt; &amp;lt;g&amp;gt; &amp;lt;path filter="url(#load_eggshadow)"  stroke="#000" id="svg_eggwhite" d="m190.13055,40.86621c30.25552,23.71378 -12.26575,57.24017 0,81.77167c12.26575,24.5315 4.9063,80.13624 -33.52639,82.58939c-38.43269,2.45315 -55.60474,-26.16693 -94.03742,-17.98977c-38.43269,8.17717 -11.44803,-30.25552 -17.98977,-44.97442c-6.54173,-14.7189 -24.5315,-46.60985 -4.9063,-71.14135c9.8126,-12.26575 22.07835,-14.92333 34.95739,-15.02554c12.87904,-0.10221 19.01191,-15.63883 31.27766,-17.68312c12.26575,-2.04429 21.46506,17.58091 33.83303,11.2436c12.36797,-6.3373 35.26403,-20.64735 50.39179,-8.79045z" stroke- fill="#fff" /&amp;gt; &amp;lt;/g&amp;gt; &amp;lt;g&amp;gt; &amp;lt;ellipse  ry="38" rx="38" id="svg_eggyolk" cy="120" cx="120" stroke- fill="url(#load_yolkgradient)"/&amp;gt; &amp;lt;/g&amp;gt; &amp;lt;/svg&amp;gt; &amp;lt;p &amp;gt;{{ footer }}&amp;lt;/p&amp;gt; &amp;lt;display-ad id="div-gpt-ad-shellshockers-loading-houseads" ref="loadingScreenDisplayAd" :call="displayAdFunction" pokiAdSize="728x90"&amp;gt;&amp;lt;/display-ad&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/transition&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_spinner_overlay = { template: '#spinner-overlay-template', props: ['loc'], data: function () { return { isShowing: false, header: '', footer: '', adIsShowing: false, displayAdFunction: typeof(gtagInHouseLoadingBanner) === 'function' ? gtagInHouseLoadingBanner : Function, } }, mounted() { // this.$nextTick(() =&amp;gt; { // this.hideDisplayAd(); // }); }, methods: { show: function (headerLocKey, footerLocKey) { this.header = this.loc[headerLocKey]; this.footer = this.loc[footerLocKey]; this.isShowing = true; }, showSpinnerLoadProgress: function (percent) { var msg = this.loc.loading_msgs[Math.randomInt(0, this.loc.loading_msgs.length)]; this.header = this.loc['building_map']; this.footer = '{0}... {1}%'.format(msg, percent); this.isShowing = true; }, hide: function () { this.isShowing = false; this.$emit('close-display-ad'); }, hideDisplayAd() { this.adIsShowing = false; console.log('do it'); }, showDisplayAd() { this.adIsShowing = true; }, toggleDisplayAd() { return this.adIsShowing = this.adIsShowing ? false : true; } }, // watch: { // isShowing(val) { // console.log('watch this.adIsShowing ', val); // if (!val) { // this.adIsShowing = false; // console.log('watch AdIsShowing ', this.adIsShowing); // } // } // } }; &amp;lt;/script&amp;gt;&amp;lt;script id="small-popup-template" type="text/x-template"&amp;gt; &amp;lt;transition name="fade"&amp;gt; &amp;lt;div v-show="isShowing" &amp;gt; &amp;lt;div&amp;gt; &amp;lt;button v-show="!hideClose" @click="onXClick" &amp;gt;&amp;lt;/button&amp;gt; &amp;lt;h3 id="popup_title" v-show="!hideHeader" &amp;gt; &amp;lt;slot name="header"&amp;gt;&amp;lt;/slot&amp;gt; &amp;lt;/h3&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div v-show="!hideContent" &amp;gt;&amp;lt;slot name="content"&amp;gt;&amp;lt;/slot&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div id="btn_horizontal" &amp;gt; &amp;lt;button  v-show="!hideCancel" @click="cancelClick"&amp;gt;&amp;lt;slot name="cancel"&amp;gt;&amp;lt;/slot&amp;gt;&amp;lt;/button&amp;gt; &amp;lt;button  v-show="!hideConfirm" @click="confirmClick"&amp;gt;&amp;lt;slot name="confirm"&amp;gt;&amp;lt;/slot&amp;gt;&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/transition&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script id="large-popup-template" type="text/x-template"&amp;gt; &amp;lt;transition name="fade"&amp;gt; &amp;lt;div id="popupPause" v-show="isShowing" &amp;gt; &amp;lt;button @click="onXClick" v-show="!hideClose" &amp;gt;&amp;lt;/button&amp;gt; &amp;lt;slot name="content"&amp;gt;&amp;lt;/slot&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/transition&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; // Register popup components globally Vue.component('small-popup', createPopupComponent('#small-popup-template')); Vue.component('large-popup', createPopupComponent('#large-popup-template')); function createPopupComponent(templateId) { return { template: templateId, props: ['hideHeader', 'hideContent', 'hideClose', 'hideCancel', 'hideConfirm', 'overlayType', 'overlayClass', 'popupModel', 'uiModel', 'stopKeyCapture', 'overlayClose'], data: function () { return { isShowing: false, overlays: vueData.ui.overlayType, popupId: '', removeOverlayClick: '', htmlTag: document.getElementsByTagName('html'), } }, created() { this.popupId = this.$attrs &amp;amp;&amp;amp; this.$attrs.id; }, destroyed: function() { document.removeEventListener('keyup', this.escapeKeyClose); }, methods: { setVisible: function (visible) { this.isShowing = visible; if (this.stopKeyCapture &amp;amp;&amp;amp; extern.inGame) { if (this.isShowing) { extern.releaseKeys(); } else { extern.captureKeys(); } } if (this.isShowing &amp;amp;&amp;amp; this.popupModel &amp;amp;&amp;amp; this.popupModel.reset) { this.popupModel.reset(); } if (!this.isShowing || this.overlayType === this.overlays.none) { vueApp.setDarkOverlay(false); vueApp.setLightOverlay(false); } else { vueApp.setDarkOverlay(this.overlayType === undefined || this.overlayType === this.overlays.dark, this.overlayClass); vueApp.setLightOverlay(this.overlayType === this.overlays.light, this.overlayClass); } if (!this.isShowing) { console.log('Closed: ' + this.popupId); this.$emit('popup-closed'); this.htmlTag[0].classList.remove('noscroll'); this.cancelEventOverLayClickEscapeClose(); } else { console.log('Opened: ' + this.popupId); this.$emit('popup-opened'); vueApp.scrollToTop(); this.htmlTag[0].classList.add('noscroll'); this.outsideClickClose(); } }, toggle: function () { this.isShowing = !this.isShowing; this.setVisible(this.isShowing); }, show: function () { this.setVisible(true); }, hide: function () { this.setVisible(false); }, close: function () { this.setVisible(false); console.log('Closing'); }, onCloseClick: function () { this.close(); vueApp.playSound('./sound/ui/ui_popupclose.mp3'); }, onXClick: function () { this.$emit('popup-x'); this.close(); vueApp.playSound('./sound/ui/ui_popupclose.mp3'); }, cancelClick: function () { this.close(); this.$emit('popup-cancel'); vueApp.playSound('./sound/ui/ui_popupclose.mp3'); }, confirmClick: function () { if (this.popupModel &amp;amp;&amp;amp; this.popupModel.validate &amp;amp;&amp;amp; !this.popupModel.validate()) { return; } this.close(); this.$emit('popup-confirm'); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); }, outsideClickClose: function() { if (this.overlayClose === false) { return; } this.removeOverlayClick = this.handleOutsideClick; document.addEventListener('click', this.removeOverlayClick); document.addEventListener('keyup', this.escapeKeyClose); }, escapeKeyClose: function(e) { e.stopPropagation(); if (e.keyCode === 27 &amp;amp;&amp;amp; this.isShowing &amp;amp;&amp;amp; this.overlayClose !== false) { this.onCloseClick(); } }, handleOutsideClick: function(e) { e.stopPropagation(); if ( e.target.id.includes('Overlay') ) { this.onCloseClick(); } }, cancelEventOverLayClickEscapeClose: function() { if (this.overlayClose === false) { return; } document.removeEventListener('click', this.removeOverlayClick); document.removeEventListener('keyup', this.escapeKeyClose); } }, } } &amp;lt;/script&amp;gt; &amp;lt;script id="display-ad-template" type="text/x-template"&amp;gt; &amp;lt;transition name="fade"&amp;gt; &amp;lt;div v-show="isAdShowing" :id="id" &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/transition&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; // Register popup components globally Vue.component('display-ad', createDisplayAdComponent('#display-ad-template')); function createDisplayAdComponent(templateId) { return { template: templateId, props: { id: String, call: Function, isHidden: Boolean, poki: Boolean, pokiAdSize: String }, data: function () { return { isAdShowing: false, hideAds: false, scriptTag: document.createElement('script'), displayAdContainer: '', } }, mounted() { this.displayAdContainer = document.getElementById(this.id); this.buildAdScripTag(); }, methods: { buildAdScripTag() { if (!this.id || vueData.isPoki) { return; } this.scriptTag.innerHTML = 'googletag.cmd.push(function() { googletag.display("'+ this.id +'") });'; this.displayAdContainer.appendChild(this.scriptTag); }, setVisible(visible) { this.isAdShowing = visible; if (!this.isAdShowing) { window.removeEventListener('resize', this.hideAdBasedOnscreenSize); if (vueApp.isPoki &amp;amp;&amp;amp; this.pokiAdSize) PokiSDK.destroyAd(this.displayAdContainer); } else { this.triggerAd(this.call); setTimeout(() =&amp;gt; this.hideAdBasedOnscreenSize(), 500); window.addEventListener('resize', this.hideAdBasedOnscreenSize); } }, show() { this.hideAds = extern.account.hideAds; if (this.hideAds) { return; } this.setVisible(true); }, hide() { this.setVisible(false); }, triggerAd(trigger) { if (!vueApp.isPoki) { if (trigger) trigger(); return; } else { if (this.pokiAdSize) PokiSDK.displayAd(this.displayAdContainer, this.pokiAdSize); return; } }, hideAdBasedOnscreenSize() { let adWidth = this.displayAdContainer.offsetWidth; let intViewportWidth = window.innerWidth; if (vueApp.displayAdObject &amp;amp;&amp;amp; vueApp.displayAdObject &amp;gt; 1 ) { if (vueApp.displayAdObject &amp;lt; 970) { return; } if (vueApp.displayAdObject &amp;gt; intViewportWidth ) { this.hide(); } } else { if (adWidth &amp;lt; 970) { return; } if (adWidth &amp;gt; intViewportWidth ) { this.hide(); } } }, }, watch: { isHidden(value) { if (!value) { this.hide() } }, hideAds(value) { console.log('does it change', value); } } } } &amp;lt;/script&amp;gt; &amp;lt;!-- include_once('./includes/shared_tags/inc_tag_asc_video_player.php'); --&amp;gt; &amp;lt;script id="language-selector-template" type="text/x-template"&amp;gt; &amp;lt;select id="pickLanguage" v-model="languageCode" @click="playSound('./sound/ui/ui_click.mp3')" @change="onChangeLanguage" &amp;gt; &amp;lt;option v-for="(language, code) in loc.languages" v-bind:value="code"&amp;gt; {{ language }} &amp;lt;/option&amp;gt; &amp;lt;/select&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_language_selector = { template: '#language-selector-template', props: ['languages', 'selectedLanguageCode', 'loc'], data: function () { return { languageCode: this.selectedLanguageCode, } }, methods: { playSound (sound) { vueApp.playSound(sound); }, onChangeLanguage: function () { vueApp.changeLanguage(this.languageCode); // Update localStorage for selected language. localStorage.setItem('languageSelected', this.languageCode); vueApp.playSound('./sound/ui/ui_onchange.mp3'); ga('send', 'event', { eventCategory: vueData.googleAnalytics.cat.playerStats, eventAction: vueApp.googleAnalytics.action.languageSwitch, eventLabel: this.languageCode, }); } }, watch: { selectedLanguageCode: function (code) { this.languageCode = code; } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="gdpr-template" type="text/x-template"&amp;gt; &amp;lt;transition name="fade"&amp;gt; &amp;lt;div v-show="isShowing"&amp;gt; &amp;lt;div id="consent" v-show="showingNotification" &amp;gt; &amp;lt;div&amp;gt;{{ loc.gdpr_notification }} &amp;lt;a href="http://www.bluewizard.com/privacypolicy" target="_window"&amp;gt;{{ loc.gdpr_link }}&amp;lt;/a&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;button @click="onDisagreeClicked()" &amp;gt;{{ loc.gdpr_disagree }}&amp;lt;/button&amp;gt; &amp;lt;button @click="onAgreeClicked()" &amp;gt;{{ loc.gdpr_agree }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="doConsent" v-show="showingConsent" &amp;gt; &amp;lt;div&amp;gt;{{ loc.gdpr_consent }}&amp;lt;/div&amp;gt; &amp;lt;div&amp;gt; &amp;lt;button @click="close()" &amp;gt;{{ loc.ok }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="noConsent"v-show="showingNoConsent" &amp;gt; &amp;lt;div&amp;gt;{{ loc.gdpr_noConsent }}&amp;lt;/div&amp;gt; &amp;lt;div&amp;gt; &amp;lt;button @click="close()" &amp;gt;{{ loc.ok }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/transition&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_gdpr = { template: '#gdpr-template', props: ['loc'], data: function () { return { isShowing: false, showingNotification: false, showingConsent: false, showingNoConsent: false } }, methods: { show: function () { this.isShowing = true; this.showingNotification = true; this.showingConsent = false; this.showingNoConsent = false; }, close: function () { this.isShowing = false; vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); }, onAgreeClicked: function () { this.showingConsent = true; this.showingNotification = false; extern.doConsent(); vueApp.playSound('./sound/ui/ui_onchange.mp3'); }, onDisagreeClicked: function () { this.showingNoConsent = true; this.showingNotification = false; extern.doNotConsent(); vueApp.playSound('./sound/ui/ui_onchange.mp3'); } } }; &amp;lt;/script&amp;gt; &amp;lt;script id="settings-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;h1 &amp;gt;{{ loc.p_settings_title }}&amp;lt;/h1&amp;gt; &amp;lt;div id="popupInnards" &amp;gt; &amp;lt;div id="account_left"&amp;gt; &amp;lt;h3 &amp;gt;{{ loc.p_settings_keybindings }}&amp;lt;/h3&amp;gt; &amp;lt;div v-for="c in settingsUi.controls.game" &amp;gt; &amp;lt;settings-control-binder :loc="loc" :control-id="c.id" :control-value="c.value" @control-captured="onGameControlCaptured"&amp;gt;&amp;lt;/settings-control-binder&amp;gt; &amp;lt;div &amp;gt;{{ loc[c.locKey] }}&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div v-for="c in settingsUi.controls.spectate" &amp;gt; &amp;lt;settings-control-binder :loc="loc" :control-id="c.id" :control-value="c.value" @control-captured="onSpectateControlCaptured"&amp;gt;&amp;lt;/settings-control-binder&amp;gt; &amp;lt;div &amp;gt;{{ loc[c.locKey] }}&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;h3 &amp;gt;{{ loc.p_settings_language }}&amp;lt;/h3&amp;gt; &amp;lt;language-selector :languages="languages" :loc="loc" :selectedLanguageCode="currentLanguageCode" &amp;gt;&amp;lt;/language-selector&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="settings_right"&amp;gt; &amp;lt;div v-for="t in settingsUi.adjusters" &amp;gt; &amp;lt;settings-adjuster :loc="loc" :loc-key="t.locKey" :control-id="t.id" :control-value="t.value" :min="t.min" :max="t.max" :step="t.step" :multiplier="t.multiplier" @setting-adjusted="onSettingAdjusted"&amp;gt;&amp;lt;/settings-adjuster&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div v-for="t in settingsUi.togglers" &amp;gt; &amp;lt;settings-toggler v-if="(t.id === 'shadowsEnabled' || t.id === 'highRes') ? showDetailSettings : true" :loc="loc" :loc-key="t.locKey" :control-id="t.id" :control-value="t.value" @setting-toggled="onSettingToggled"&amp;gt;&amp;lt;/settings-toggler&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;button v-show="showPrivacyOptions" @click="onPrivacyOptionsClicked" &amp;gt;{{ loc.p_settings_privacy }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="btn_horizontal" &amp;gt; &amp;lt;button @click="onCloseClick()" &amp;gt;{{ loc.cancel }}&amp;lt;/button&amp;gt; &amp;lt;button @click="onResetClick" &amp;gt;{{ loc.p_settings_reset }}&amp;lt;/button&amp;gt; &amp;lt;button @click="onSaveClick()" &amp;gt;{{ loc.confirm }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script id="settings-control-binder-template" type="text/x-template"&amp;gt; &amp;lt;input ref="controlInput" @change="playSound('./sound/ui/ui_onchange.mp3')" type="text" v-model="currentValue" :placeholder="loc.press_key"  : v-on:mousedown="onMouseDown($event)" v-on:keydown="onKeyDown($event)" v-on:keyup="onKeyUp($event)" v-on:wheel="onWheel($event)" v-on:focusout="onFocusOut($event)"&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_settings_control_binder = { template: '#settings-control-binder-template', props: ['loc', 'controlId', 'controlValue'], data: function () { return { currentValue: this.controlValue, isCapturing: false } }, methods: { playSound (sound) { vueApp.playSound(sound); }, reset: function () { this.currentValue = this.controlValue; this.isCapturing = false; this.$refs.controlInput.blur(); }, capture: function (value) { this.isCapturing = false; this.$refs.controlInput.blur(); this.$emit('control-captured', this.controlId, value); }, onMouseDown: function (event) { if (!this.isCapturing) { this.currentValue = ''; this.isCapturing = true; } else { this.playSound('./sound/ui/ui_onchange.mp3') this.capture('MOUSE ' + event.button); } }, onKeyDown: function (event) { this.currentValue = ''; event.stopPropagation(); }, onKeyUp: function (event) { event.stopPropagation(); var key = event.key; if (key == 'Escape' || key == 'Tab' || key == 'Enter') { return; } if (key == ' ') { key = 'space'; event.preventDefault(); } this.capture(key); }, onWheel: function (event) { if (this.isCapturing) { this.playSound('./sound/ui/ui_onchange.mp3') if (event.deltaY &amp;gt; 0) { this.capture('WHEEL DOWN'); } else if (event.deltaY &amp;lt; 0) { this.capture('WHEEL UP'); } } }, onFocusOut: function (event) { this.reset(); } }, watch: { // The value prop gets updated by the parent control; watch for changes and update the backing field of the textbox controlValue: function (newValue) { this.currentValue = (newValue === null) ? 'undefined' : newValue; } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="settings-adjuster-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;h3 &amp;gt;{{ loc[locKey] }}&amp;lt;/h3&amp;gt; &amp;lt;div &amp;gt; &amp;lt;input  type="range" :min="min" :max="max" :step="step" v-model="currentValue" @change="onChange"&amp;gt; &amp;lt;label &amp;gt;{{ Math.floor(currentValue * (multiplier || 1)) }}&amp;lt;/label&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_settings_adjuster = { template: '#settings-adjuster-template', props: ['loc', 'locKey', 'controlId', 'controlValue', 'min', 'max', 'step', 'multiplier'], data: function () { return { currentValue: this.controlValue } }, methods: { onChange: function (event) { this.$emit('setting-adjusted', this.controlId, this.currentValue); vueApp.playSound('./sound/ui/ui_onchange.mp3'); } }, watch: { // controlValue prop could change when player X's out or clicks Cancel controlValue: function (newValue) { if (this.currentValue !== newValue) { this.currentValue = newValue; } } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="settings-toggler-template" type="text/x-template"&amp;gt; &amp;lt;label &amp;gt; {{ loc[locKey] }} &amp;lt;input type="checkbox" v-model="currentValue" @change="onChange($event)"&amp;gt; &amp;lt;span &amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/label&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_settings_toggler = { template: '#settings-toggler-template', props: ['loc', 'locKey', 'controlId', 'controlValue'], data: function () { return { currentValue: this.controlValue } }, methods: { onChange: function (event) { this.$emit('setting-toggled', this.controlId, this.currentValue); vueApp.playSound('./sound/ui/ui_onchange.mp3'); } }, watch: { // controlValue prop could change when player X's out or clicks Cancel controlValue: function (newValue) { if (this.currentValue !== newValue) { this.currentValue = newValue; } } } }; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_settings = { template: '#settings-template', components: { 'settings-control-binder': comp_settings_control_binder, 'language-selector': comp_language_selector, 'settings-adjuster': comp_settings_adjuster, 'settings-toggler': comp_settings_toggler }, props: ['loc', 'settingsUi', 'languages', 'currentLanguageCode', 'showPrivacyOptions'], data: function () { return { originalSettings: {}, showDetailSettings: false, originalLanguage: '', } }, methods: { captureOriginalSettings: function () { this.originalSettings = deepClone(vueData.settingsUi); this.originalLanguage = this.currentLanguageCode; }, applyOriginalSettings: function () { vueData.settingsUi = this.originalSettings; this.showDetailSettings = !vueData.settingsUi.togglers.find( a =&amp;gt; { return a.id === 'autoDetail'; }).value; console.log('applying original settings: ' + JSON.stringify(vueData.settingsUi)); }, onGameControlCaptured: function (id, value) { this.onControlCaptured(this.settingsUi.controls.game, id, value) }, onSpectateControlCaptured: function (id, value) { this.onControlCaptured(this.settingsUi.controls.spectate, id, value) }, onControlCaptured: function (controls, id, value) { value = value.toLocaleUpperCase(); controls .forEach( (c) =&amp;gt; { if (c.id === id) { c.value = value; } else { if (c.value === value) { c.value = null; } } }); }, onSettingToggled: function (id, value) { console.log('value: ' + value); var toggler = this.settingsUi.togglers.find( (t) =&amp;gt; { return t.id === id; }); toggler.value = value; if (id === 'autoDetail') { this.showDetailSettings = !value; } }, onSettingAdjusted: function (id, value) { this.settingsUi.adjusters.find( (a) =&amp;gt; { return a.id === id; }).value = value; if (id === 'volume') { extern.setVolume(value); } if (id === 'mouseSpeed') { extern.setMouseSpeed(value); } }, onVolumeChange: function () { extern.setVolume(this.settingsUi.volume); }, onPrivacyOptionsClicked: function () { this.$emit('privacy-options-opened'); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, onCancelClick: function () { this.applyOriginalSettings(); this.cancelLanguageSelect(); this.$parent.close(); }, onCloseClick: function () { this.applyOriginalSettings(); this.cancelLanguageSelect(); this.$parent.close(); vueApp.playSound('./sound/ui/ui_popupclose.mp3'); }, onSaveClick: function () { extern.applyUiSettings(this.settingsUi, this.originalSettings); this.resetOriginalLanguage(); this.$parent.toggle(); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); }, onResetClick: function () { extern.resetSettings(); vueApp.playSound('./sound/ui/ui_reset.mp3'); }, cancelLanguageSelect: function() { this.originalLanguage === vueApp.$data.currentLanguageCode ? vueApp.changeLanguage(vueApp.$data.currentLanguageCode) : vueApp.changeLanguage(this.originalLanguage); // Revert localStorage for language localStorage.setItem('languageSelected', this.originalLanguage); this.resetOriginalLanguage(); }, resetOriginalLanguage: function() { this.originalLanguage = ''; }, setSettings: function (settings) { var getSettingById = (list, id) =&amp;gt; { return list.filter( o =&amp;gt; { return o.id == id; })[0]; }; getSettingById(this.settingsUi.controls.game, 'up').value = settings.controls.game.up; getSettingById(this.settingsUi.controls.game, 'down').value = settings.controls.game.down; getSettingById(this.settingsUi.controls.game, 'left').value = settings.controls.game.left; getSettingById(this.settingsUi.controls.game, 'right').value = settings.controls.game.right; getSettingById(this.settingsUi.controls.game, 'jump').value = settings.controls.game.jump; getSettingById(this.settingsUi.controls.game, 'fire').value = settings.controls.game.fire; getSettingById(this.settingsUi.controls.game, 'scope').value = settings.controls.game.scope; getSettingById(this.settingsUi.controls.game, 'reload').value = settings.controls.game.reload; getSettingById(this.settingsUi.controls.game, 'swap_weapon').value = settings.controls.game.swap_weapon; getSettingById(this.settingsUi.controls.game, 'grenade').value = settings.controls.game.grenade; getSettingById(this.settingsUi.controls.spectate, 'ascend').value = settings.controls.spectate.ascend; getSettingById(this.settingsUi.controls.spectate, 'descend').value = settings.controls.spectate.descend; getSettingById(this.settingsUi.adjusters, 'volume').value = settings.volume; getSettingById(this.settingsUi.adjusters, 'mouseSpeed').value = settings.mouseSpeed; getSettingById(this.settingsUi.togglers, 'mouseInvert').value = (settings.mouseInvert !== 1); getSettingById(this.settingsUi.togglers, 'holdToAim').value = settings.holdToAim; getSettingById(this.settingsUi.togglers, 'enableChat').value = settings.enableChat; getSettingById(this.settingsUi.togglers, 'autoDetail').value = settings.autoDetail; getSettingById(this.settingsUi.togglers, 'shadowsEnabled').value = settings.shadowsEnabled; getSettingById(this.settingsUi.togglers, 'highRes').value = settings.highRes; console.log('auto detail: ' + settings.autoDetail); this.showDetailSettings = !settings.autoDetail; }, }, }; &amp;lt;/script&amp;gt;&amp;lt;script id="help-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;div id="horizontalTabs"&amp;gt; &amp;lt;button id="faq_button" @click="toggleTabs"  :&amp;gt;{{ loc.faq }}&amp;lt;/button&amp;gt; &amp;lt;button id="fb_button" @click="toggleTabs"  :&amp;gt;{{ loc.feedback }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div v-show="showTab1"&amp;gt; &amp;lt;div id="feedback_panel"&amp;gt; &amp;lt;h1&amp;gt;{{ loc.faq_title }}&amp;lt;/h1&amp;gt; &amp;lt;div v-for="qa in loc.faqItems"&amp;gt; &amp;lt;a :name="qa.anchor"&amp;gt;&amp;lt;/a&amp;gt; &amp;lt;h3&amp;gt;{{ qa.q }}&amp;lt;/h3&amp;gt; &amp;lt;span v-html="qa.a"&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;hr&amp;gt; &amp;lt;div id="btn_horizontal" &amp;gt; &amp;lt;button @click="onBackClick" &amp;gt;{{ loc.cancel }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div v-show="!showTab1"&amp;gt; &amp;lt;div id="feedback_panel"&amp;gt; &amp;lt;h1&amp;gt;{{ loc.fb_feedback_title }}&amp;lt;/h1&amp;gt; &amp;lt;p&amp;gt;{{ loc.fb_feedback_intro }}&amp;lt;/p&amp;gt; &amp;lt;div id="btn_horizontal" &amp;gt; &amp;lt;select v-model="selectedType"  @click="playSound('./sound/ui/ui_click.mp3')" @change="playSound('./sound/ui/ui_onchange.mp3')"&amp;gt; &amp;lt;option v-for="type in feedbackType" :value="type.id"&amp;gt;{{ loc[type.locKey] }}&amp;lt;/option&amp;gt; &amp;lt;/select&amp;gt; &amp;lt;input id="feedbackEmail" v-model="email" :placeholder="loc.fb_email_ph"  v-on:keyup="validateEmail"&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div&amp;gt; &amp;lt;textarea id="feedbackText"  v-model="feedback" :placeholder="loc.fb_feedback_ph" v-on:keyup="validateMessage"&amp;gt;&amp;lt;/textarea&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;span v-show="emailInvalid" &amp;gt;{{ loc.fb_bad_email }}&amp;lt;/span&amp;gt; &amp;lt;span v-show="messageInvalid" &amp;gt;{{ loc.fb_no_comment }}&amp;lt;/span&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="btn_horizontal" &amp;gt; &amp;lt;button @click="onBackClick" &amp;gt;{{ loc.cancel }}&amp;lt;/button&amp;gt; &amp;lt;button @click="onSendClick" &amp;gt;{{ loc.fb_send }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_help = { template: '#help-template', props: ['loc'], data: function () { return { showTab1: true, feedbackType: [ { id: 0, locKey: 'fb_type_commquest' }, { id: 1, locKey: 'fb_type_request' }, { id: 2, locKey: 'fb_type_bug' }, { id: 3, locKey: 'fb_type_purchase' }, { id: 4, locKey: 'fb_type_account' }, { id: 5, locKey: 'fb_type_abuse' }, { id: 6, locKey: 'fb_type_other' } ], selectedType: 0, email: '', feedback: '', doValidation: false, emailInvalid: false, messageInvalid: false, } }, feedbackValidateTimeout: 0, methods: { playSound (sound) { vueApp.playSound(sound); }, validateEmail: function () { if (!this.doValidation) { return; } // Insane e-mail-validating regex var re = /(?:[a-z0-9!#$%&amp;amp;'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;amp;'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/; this.emailInvalid = (this.email === '' || !re.test(this.email)); return !this.emailInvalid; }, validateMessage: function () { if (!this.doValidation) { return; } this.messageInvalid = this.feedback === ''; return !this.messageInvalid; }, toggleTabs: function () { this.showTab1 = !this.showTab1; vueApp.playSound('./sound/ui/ui_toggletab.mp3'); ! this.showTab1 &amp;amp;&amp;amp; ga('send', 'event', 'feedback opened'); }, onBackClick: function () { vueApp.$refs.helpPopup.toggle(); vueApp.playSound('./sound/ui/ui_popupclose.mp3'); }, onSendClick: function () { this.doValidation = true; if (!this.validateEmail() || !this.validateMessage()) { return; } vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); // Send that shit out extern.api_feedback(this.selectedType, this.email, this.feedback); this.$parent.toggle(); this.selectedType = 0; this.feedback = null; this.email = null; } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="egg-store-template" type="text/x-template"&amp;gt; &amp;lt;div &amp;gt; &amp;lt;h1 &amp;gt;{{ loc.p_egg_shop_title }}&amp;lt;/h1&amp;gt; &amp;lt;div &amp;gt; &amp;lt;div id="popupInnards" &amp;gt; &amp;lt;div id="eggshop_banner" &amp;gt; &amp;lt;img src="img/egg-shop-banner-left.png"&amp;gt; &amp;lt;div &amp;gt; {{ loc.p_egg_shop_mostpopular }} &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;p align="center" &amp;gt;&amp;lt;img src="./img/eggshop_egg1.png" &amp;gt;&amp;lt;/p&amp;gt; &amp;lt;h6 &amp;gt;{{ loc.p_egg_shop_eggpile }}&amp;lt;/h6&amp;gt; &amp;lt;span &amp;gt;{{ loc.p_egg_shop_eggpile_desc }}&amp;lt;/span&amp;gt; &amp;lt;div &amp;gt;${{chickenShack[0].price}} USD&amp;lt;/div&amp;gt; &amp;lt;button  @click="onItemClicked(chickenShack[0].sku)"&amp;gt;{{ loc.p_buy_item_confirm }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="popupInnards" &amp;gt; &amp;lt;div id="eggshop_banner"&amp;gt; &amp;lt;img src="img/egg-shop-banner-left.png"&amp;gt; &amp;lt;div &amp;gt; {{ loc.p_egg_shop_mostpopular }} &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;p align="center" &amp;gt;&amp;lt;img src="./img/eggshop_egg2.png" &amp;gt;&amp;lt;/p&amp;gt; &amp;lt;h6 &amp;gt;{{ loc.p_egg_shop_eggbasket }}&amp;lt;/h6&amp;gt; &amp;lt;span &amp;gt;{{ loc.p_egg_shop_eggbasket_desc }}&amp;lt;/span&amp;gt; &amp;lt;div &amp;gt;${{chickenShack[1].price}} USD&amp;lt;/div&amp;gt; &amp;lt;button  @click="onItemClicked(chickenShack[1].sku)"&amp;gt;{{ loc.p_buy_item_confirm }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="popupInnards" &amp;gt; &amp;lt;div id="eggshop_banner" &amp;gt; &amp;lt;img src="img/egg-shop-banner-left.png"&amp;gt; &amp;lt;div &amp;gt; {{ loc.p_egg_shop_mostpopular }} &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;p align="center" &amp;gt;&amp;lt;img src="./img/eggshop_egg3.png" &amp;gt;&amp;lt;/p&amp;gt; &amp;lt;h6 &amp;gt;{{ loc.p_egg_shop_eggbox }}&amp;lt;/h6&amp;gt; &amp;lt;span &amp;gt;{{ loc.p_egg_shop_eggbox_desc }}&amp;lt;/span&amp;gt; &amp;lt;div &amp;gt;${{chickenShack[2].price}} USD&amp;lt;/div&amp;gt; &amp;lt;button  @click="onItemClicked(chickenShack[2].sku)"&amp;gt;{{ loc.p_buy_item_confirm }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="popupInnards" &amp;gt; &amp;lt;div id="eggshop_banner"&amp;gt; &amp;lt;img src="img/egg-shop-banner-left.png"&amp;gt; &amp;lt;div &amp;gt; {{ loc.p_egg_shop_bestvalue }} &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;p align="center" &amp;gt;&amp;lt;img src="./img/eggshop_egg4.png" &amp;gt;&amp;lt;/p&amp;gt; &amp;lt;h6 &amp;gt;{{ loc.p_egg_shop_eggcluckton }}&amp;lt;/h6&amp;gt; &amp;lt;span &amp;gt;{{ loc.p_egg_shop_eggcluckton_desc }}&amp;lt;/span&amp;gt; &amp;lt;div &amp;gt;${{chickenShack[3].price}} USD&amp;lt;/div&amp;gt; &amp;lt;button  @click="onItemClicked(chickenShack[3].sku)"&amp;gt;{{ loc.p_buy_item_confirm }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div v-if="showGoldenChicken" id="popupInnards"  &amp;gt; &amp;lt;h1 &amp;gt;Golden&amp;lt;br&amp;gt;Chicken!&amp;lt;/h1&amp;gt; &amp;lt;img src="./img/ico_chicken.png" &amp;gt; &amp;lt;div &amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt; {{ loc.p_chicken_goldfeature1 }}&amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; {{ loc.p_chicken_goldfeature2 }}&amp;lt;/li&amp;gt; &amp;lt;li v-html="loc.p_chicken_goldfeature3"&amp;gt;&amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; {{ loc.p_chicken_goldfeature4 }}&amp;lt;/li&amp;gt; &amp;lt;/ul&amp;gt; &amp;lt;div &amp;gt;${{chickenShack[4].price}} USD&amp;lt;/div&amp;gt; &amp;lt;button  @click="onItemClicked(chickenShack[4].sku)"&amp;gt;{{ loc.p_chicken_goldbutton }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_egg_store = { template: '#egg-store-template', data() { return vueData; }, props: ['loc'], methods: { onItemClicked: function (sku) { if (!this.accountSettled) { console.log(this.$parent.hide()); setTimeout(() =&amp;gt; { this.onItemClicked(sku) }, 300); vueApp.pleaseWaitPopup(); return; } if (vueApp.$refs.genericPopup.isShowing === true) vueApp.$refs.genericPopup.close(); this.$parent.hide(); extern.buyProductForMoney(sku); ga('send', 'event', this.googleAnalytics.cat.purchases, this.googleAnalytics.action.eggShackProductClick, sku); } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="house-ad-big-template" type="text/x-template"&amp;gt; &amp;lt;div v-show="(useAd !== null)"&amp;gt; &amp;lt;button @click="onCloseClicked" &amp;gt;&amp;lt;/button&amp;gt; &amp;lt;img :src="adImageUrl" @click="onClicked" &amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_house_ad_big = { template: '#house-ad-big-template', data: function() { return { removeOverlayClick: '', } }, props: ['useAd'], bigAdTimeout: null, methods: { onCloseClicked: function () { console.log('big ad closed'); this.close(); }, onClicked: function () { this.close(); vueApp.playSound('./sound/ui/ui_click.mp3'); extern.clickedHouseAdBig(this.useAd); }, close: function () { vueApp.playSound('./sound/ui/ui_popupclose.mp3'); this.$emit('big-house-ad-closed'); }, outsideClickClose: function() { const showingId = document.getElementById('house-ad-big-template', true); this.removeOverlayClick = this.handleOutsideClick; document.addEventListener('click', this.removeOverlayClick); }, handleOutsideClick: function(e) { // Stop bubbling e.stopPropagation(); // If the target does NOT include the class splash_ad_image use the onCloseClicked method and remove the eventListener if ( ! e.target.id.includes('splash_ad_image') ) { this.onCloseClicked(); document.removeEventListener('click', this.removeOverlayClick); } }, }, computed: { adImageUrl: function () { if (!hasValue(this.useAd)) { return; } return 'img/promo/{0}{1}'.format(this.useAd.id, this.useAd.imageExt); } }, watch: { useAd: function (bigAd) { if (hasValue(bigAd)) { this.$options.bigAdTimeout = setTimeout(function () { vueApp.ui.houseAds.big = null; }, 15000); // Close with outside click this.outsideClickClose(); } } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="house-ad-small-template" type="text/x-template"&amp;gt; &amp;lt;img v-show="(useAd !== null)" :src="adImageUrl" @click="onClicked" &amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_house_ad_small = { template: '#house-ad-small-template', props: ['useAd'], methods: { onClicked: function () { vueApp.playSound('./sound/ui/ui_click.mp3'); extern.clickedHouseAdSmall(this.useAd); } }, computed: { adImageUrl: function () { if (!hasValue(this.useAd)) { return; } ga('send', 'event', { eventCategory: 'House banner ad', eventAction: 'show', eventLabel: this.useAd.label }); return 'img/promo/{0}{1}'.format(this.useAd.id, this.useAd.imageExt); } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="item-template" type="text/x-template"&amp;gt; &amp;lt;div  ref="eggItemInvetory" : @click="onClick"&amp;gt; &amp;lt;div v-if="showPrice" &amp;gt; &amp;lt;svg &amp;gt;&amp;lt;use xlink:href="#icon-egg"&amp;gt;&amp;lt;/use&amp;gt;&amp;lt;/svg&amp;gt; &amp;lt;div &amp;gt;{{ item.price }}&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div v-if="showPhysicalMerch"&amp;gt; &amp;lt;div &amp;gt;{{ loc.eq_special_merch }}&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;canvas ref="itemCanvas"   &amp;gt;&amp;lt;/canvas&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_item = { template: '#item-template', props: ['loc', 'item', 'showItemOnly', 'isSelected'], data: function () { return { itemOnly: hasValue(this.showItemOnly) ? this.showItemOnly : false } }, computed: { showPrice () { return this.isItemSellable() &amp;amp;&amp;amp; this.item.price &amp;gt; 0; }, showPhysicalMerch () { var physicalMerch = this.isItemSellable() &amp;amp;&amp;amp; this.item.unlock === 'physical'; return physicalMerch; }, }, mounted() { this.renderItem(); this.itemHightlightedOrder(); }, methods: { isItemSellable: function () { return !this.itemOnly &amp;amp;&amp;amp; vueData.equip.mode == vueData.equip.equipModes.shop; }, renderItem: function () { extern.renderItemToCanvas(this.item, this.$refs.itemCanvas); }, highlightSelected: function () { return this.isSelected ? 'highlight' : ''; }, onClick: function () { this.$emit('item-selected', this.item); }, itemHightlightedOrder: function() { return this.$refs.eggItemInvetory.classList.contains('highlight') ? this.$refs.eggItemInvetory.style.order='-1' : null; }, }, watch: { item: function (val) { this.renderItem(); } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="gold-chicken-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;div v-if="showGoldenChicken" id="popupInnards" &amp;gt; &amp;lt;h2 &amp;gt;{{ loc.p_chicken_goldchicken }}&amp;lt;/h2&amp;gt; &amp;lt;p &amp;gt;&amp;lt;strong&amp;gt;{{ loc.p_chicken_goldchicken_price }}&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt; &amp;lt;p align="center"&amp;gt;&amp;lt;img src="./img/chicken_shadow.png" &amp;gt;&amp;lt;/p&amp;gt; &amp;lt;div &amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt; {{ loc.p_chicken_goldfeature1 }} &amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; {{ loc.p_chicken_goldfeature2 }} &amp;lt;/li&amp;gt; &amp;lt;li v-html="loc.p_chicken_goldfeature3"&amp;gt;&amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; {{ loc.p_chicken_goldfeature4 }} &amp;lt;/li&amp;gt; &amp;lt;/ul&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;button  @click="onChickenClick"&amp;gt;{{ loc.p_chicken_goldbutton }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div v-if="showNugget" id="popupInnards" &amp;gt; &amp;lt;h2 &amp;gt;{{ loc.p_chicken_nugget }}&amp;lt;/h2&amp;gt; &amp;lt;p &amp;gt;&amp;lt;strong&amp;gt;{{ loc.p_chicken_nugget_price }}&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt; &amp;lt;p align="center"&amp;gt;&amp;lt;img src="./img/nugget_shadow.png" &amp;gt;&amp;lt;/p&amp;gt; &amp;lt;div &amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt;{{ loc.p_chicken_nuggetfeature1 }}&amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; {{ loc.p_chicken_nuggetfeature2 }} &amp;lt;/li&amp;gt; &amp;lt;li v-html="loc.p_chicken_nuggetfeature3"&amp;gt;&amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; {{ loc.p_chicken_nuggetfeature4 }} &amp;lt;/li&amp;gt; &amp;lt;/ul&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;button  @click="onNuggetClick"&amp;gt;{{ loc.p_chicken_nuggetbutton }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="btn_horizontal" &amp;gt; &amp;lt;button @click="onCloseClick()" &amp;gt;{{ loc.cancel }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_gold_chicken_popup = { template: '#gold-chicken-template', data: function () { return vueData; }, props: ['loc'], methods: { onCloseClick: function () { this.$parent.close(); vueApp.playSound('./sound/ui/ui_popupclose.mp3'); }, onChickenClick: function () { document.exitPointerLock(); window.onkeydown = null; window.onkeyup = null; this.$parent.toggle(); extern.buyGoldenChicken(); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); ga('send', 'event', this.googleAnalytics.cat.purchases, this.googleAnalytics.action.goldenChickenProductClick, `Get It Now`); }, onNuggetClick: function () { if (!this.accountSettled) { setTimeout(() =&amp;gt; { this.onNuggetClick(); }, 300); this.$parent.hide(); vueApp.pleaseWaitPopup(); return; } this.$parent.hide(); extern.startChickenNugget(); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); ga('send', 'event', this.googleAnalytics.cat.purchases, this.googleAnalytics.action.goldenChickenNuggetClick, `Try It Out`); } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="chicken-nugget-template" type="text/x-template"&amp;gt; &amp;lt;div id="popupInnards" &amp;gt; &amp;lt;h3 &amp;gt;{{ loc.p_nugget_instruction }}&amp;lt;/h3&amp;gt; &amp;lt;iframe id="miniGameFrame" ref="miniGameFrame" src="about:blank" frameborder="1"  &amp;gt;&amp;lt;/iframe&amp;gt; &amp;lt;p align="center"&amp;gt; &amp;lt;button id="gotNuggetOK" v-show="isMiniGameComplete" @click="onGotNugget" &amp;gt;{{ loc.p_nugget_button }}&amp;lt;/button&amp;gt; &amp;lt;/p&amp;gt; &amp;lt;div &amp;gt; &amp;lt;display-ad id="div-gpt-ad-ShellShockers_Chicken_Nugget_Banner" ref="nuggetDisplayAdd"  :call="displayAdFunction" pokiAdSize="728x90"&amp;gt;&amp;lt;/display-ad&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_chicken_nugget_popup = { template: '#chicken-nugget-template', props: ['loc'], data: function () { return { isMiniGameComplete: false, displayAdFunction: typeof(loadNuggetDisplayAd) === 'function' ? loadNuggetDisplayAd : Function, } }, methods: { placeBannerAdTag: function (tagEl) { this.$refs.chickenNuggetAdContainer.appendChild(tagEl); }, loadMiniGame: function () { this.isMiniGameComplete = false; this.$refs.miniGameFrame.src = "app_nugget/index.html"; // this.placeBannerAdTag(vueApp.$options.multisizeAdTag); this.$refs.nuggetDisplayAdd.show(); // The ad tags are outside of the Vue app; manipulate the DOM directly // extern.showBannerAd('chickenNuggetAdContainer'); }, unloadMiniGame: function () { this.$refs.miniGameFrame.src = "about:blank"; }, onGotNugget: function () { this.$parent.hide(); this.unloadMiniGame(); extern.checkUpgrade(); }, onMiniGameCompleted: function () { this.isMiniGameComplete = true; } } }; &amp;lt;/script&amp;gt; &amp;lt;script id="home-screen-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;house-ad-big id="big-house-ad" ref="bigHouseAd" :useAd="ui.houseAds.big" @big-house-ad-closed="onBigHouseAdClosed"&amp;gt;&amp;lt;/house-ad-big&amp;gt; &amp;lt;div id="mainHead"&amp;gt; &amp;lt;streamer-panel id="twitch_panel" :streams="twitchStreams" :title="loc.twitch_title" :viewers="loc.twitch_viewers" icon="ico_twitch"&amp;gt;&amp;lt;/streamer-panel&amp;gt; &amp;lt;!-- &amp;lt;streamer-panel id="youtube_panel" :streams="youtubeStreams" :title="loc.youtube_title" :viewers="loc.youtube_viewers" icon="ico_youtube"&amp;gt;&amp;lt;/streamer-panel&amp;gt; --&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="mainLayout"&amp;gt; &amp;lt;account-panel id="account_panel" ref="accountPanel" :loc="loc" :selected-language-code="currentLanguageCode" :eggs="eggs" :languages="languages" :show-corner-buttons="ui.showCornerButtons" :show-bottom="true" :photo-url="photoUrl" :is-anonymous="isAnonymous" :is-of-age="isOfAge" :show-targeted-ads="showTargetedAds" :ui="ui" @sign-in-clicked="onSignInClicked" @sign-out-clicked="onSignOutClicked"&amp;gt;&amp;lt;/account-panel&amp;gt; &amp;lt;div id="logo"&amp;gt; &amp;lt;a href="https://www.shellshock.io" @click="playSound('./sound/ui/ui_click.mp3')"&amp;gt;&amp;lt;img src="img/logo.png"&amp;gt;&amp;lt;/a&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="panel_front_play"&amp;gt; &amp;lt;play-panel id="play_game" ref="playPanel" :loc="loc" :player-name="playerName" :game-types="gameTypes" :current-game-type="currentGameType" :is-game-ready='accountSettled' :server-list="serverList" :current-server-id="currentServerId" :home="home" @playerNameChanged="onPlayerNameChanged"&amp;gt;&amp;lt;/play-panel&amp;gt; &amp;lt;stats-panel id="stats_panel" :loc="loc" :kills="kills" :deaths="deaths" :kdr="kdr" :streak="streak"&amp;gt;&amp;lt;/stats-panel&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="panel_front_egg""&amp;gt; &amp;lt;div  @click="clickEggToPlay"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;weapon-select-panel id="weapon_select" :loc="loc" :current-&amp;gt;&amp;lt;/weapon-select-panel&amp;gt; &amp;lt;button  @click="onEquipClicked"&amp;gt;{{ loc.eq_equipment }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="panel_front_news"&amp;gt; &amp;lt;div id="news_feed" &amp;gt; &amp;lt;div id="news_mask"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;h3 &amp;gt;{{ loc.home_latestnews }}&amp;lt;/h3&amp;gt; &amp;lt;newsfeed-panel id="news_scroll" ref="newsScroll" :current-language-code="currentLanguageCode"&amp;gt;&amp;lt;/newsfeed-panel&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- &amp;lt;house-ad-small id="banner-ad" :useAd="ui.houseAds.small"&amp;gt;&amp;lt;/house-ad-small&amp;gt; --&amp;gt; &amp;lt;display-ad id="div-gpt-ad-ShellShockers_TitleScreen" ref="titleScreenDisplayAdd"  :call="titleScreenDisplayAd" pokiAdSize="300x250"&amp;gt;&amp;lt;/display-ad&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="mainFooter"&amp;gt; &amp;lt;chicken-panel id="chicken_panel" :local="loc" :do-upgraded="isUpgraded"&amp;gt;&amp;lt;/chicken-panel&amp;gt; &amp;lt;footer-links-panel id="footer_links_panel" :loc="loc"&amp;gt;&amp;lt;/footer-links-panel&amp;gt; &amp;lt;social-panel id="social_panel"&amp;gt;&amp;lt;/social-panel&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="gameDescription"&amp;gt; &amp;lt;h1 align="center"&amp;gt;{{ loc.home_desc_about }}&amp;lt;/h1&amp;gt; &amp;lt;p align="center"&amp;gt;{{ loc.home_desc_pick }} &amp;lt;svg &amp;gt;&amp;lt;use xlink:href="#icon-egg"&amp;gt;&amp;lt;/use&amp;gt;&amp;lt;/svg&amp;gt; {{ loc.home_desc_loadout }} &amp;lt;svg &amp;gt;&amp;lt;use xlink:href="#icon-egg"&amp;gt;&amp;lt;/use&amp;gt;&amp;lt;/svg&amp;gt; {{ loc.home_desc_madeof }}&amp;lt;/p&amp;gt; &amp;lt;div &amp;gt; &amp;lt;p&amp;gt;{{ loc.home_desc_p1 }}&amp;lt;/p&amp;gt; &amp;lt;p&amp;gt;&amp;lt;img src="img/eggPose05.png" &amp;gt;{{ loc.home_desc_p2 }}&amp;lt;/p&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;p&amp;gt;{{ loc.home_desc_p3 }} &amp;lt;img src="img/eggPose01.png" &amp;gt; {{ loc.home_desc_p4 }}&amp;lt;/p&amp;gt; &amp;lt;p&amp;gt;{{ loc.home_desc_p5 }}&amp;lt;/p&amp;gt; &amp;lt;p&amp;gt;{{ loc.home_desc_p6 }}&amp;lt;/p&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;h1 align="center" &amp;gt;{{ loc.home_desc_controls }}&amp;lt;/h1&amp;gt; &amp;lt;p&amp;gt;{{ loc.home_desc_standard }}&amp;lt;/p&amp;gt; &amp;lt;ul&amp;gt; &amp;lt;li&amp;gt; {{ loc.home_desc_control1 }}&amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; {{ loc.home_desc_control2 }}&amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; {{ loc.home_desc_control3 }}&amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; {{ loc.home_desc_control4 }}&amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; {{ loc.home_desc_control5 }}&amp;lt;/li&amp;gt; &amp;lt;li&amp;gt; {{ loc.home_desc_control6 }}&amp;lt;/li&amp;gt; &amp;lt;/ul&amp;gt; &amp;lt;p align="center"&amp;gt;&amp;lt;button  @click="vueApp.scrollToTop()"&amp;gt;{{ loc.home_backtotop }}&amp;lt;/button&amp;gt;&amp;lt;/p&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Popup: Check Email --&amp;gt; &amp;lt;small-popup id="checkEmailPopup" ref="checkEmailPopup" :hide-cancel="true"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.p_check_email_title }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;p&amp;gt;{{ loc.p_check_email_text1 }}:&amp;lt;/p&amp;gt; &amp;lt;h5 &amp;gt;{{ maskedEmail }}&amp;lt;/h5&amp;gt; &amp;lt;p &amp;gt;{{ loc.p_check_email_text2 }}&amp;lt;/p&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.ok }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Resend Email --&amp;gt; &amp;lt;small-popup id="resendEmailPopup" ref="resendEmailPopup" @popup-confirm="onResendEmailClicked"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.p_resend_email_title }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;p&amp;gt;{{ loc.p_resend_email_text1 }}:&amp;lt;/p&amp;gt; &amp;lt;h5 &amp;gt;{{ maskedEmail }}&amp;lt;/h5&amp;gt; &amp;lt;p &amp;gt;{{ loc.p_resend_email_text2 }}&amp;lt;/p&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.ok }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.p_resend_email_resend }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script id="create-private-game-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;h1 &amp;gt;{{ loc.p_privatematch_title }}&amp;lt;/h1&amp;gt; &amp;lt;div &amp;gt; &amp;lt;div id="popupInnards" &amp;gt; &amp;lt;div id="private_left" &amp;gt; &amp;lt;h3 &amp;gt;{{ loc.p_privatematch_gametype }}&amp;lt;/h3&amp;gt; &amp;lt;select name="gameType" v-model="pickedGameType"  @click="playSound('./sound/ui/ui_click.mp3')" @change="playSound('./sound/ui/ui_onchange.mp3')"&amp;gt; &amp;lt;option v-for="g in gameTypes" v-bind:value="g.value"&amp;gt;{{ loc[g.locKey] }}&amp;lt;/option&amp;gt; &amp;lt;/select&amp;gt; &amp;lt;button  @click="onServerClick"&amp;gt;{{ loc.server }}: {{ loc[serverLocKey] }}&amp;lt;/button&amp;gt; &amp;lt;button name="play" @click="onPlayClick" &amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_privatematch_create }}&amp;lt;/button&amp;gt; &amp;lt;!-- Player limit is not in place yet &amp;lt;h3 &amp;gt;{{ loc.p_privatematch_players }}&amp;lt;/h3&amp;gt; &amp;lt;div id="player_selector"&amp;gt; &amp;lt;img src="./img/ico_arrowLeft.png" &amp;gt; &amp;lt;input type="text" v-model &amp;gt; &amp;lt;img src="./img/ico_arrowRight.png" &amp;gt; &amp;lt;/div&amp;gt; --&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;h3 &amp;gt;{{ loc.p_privatematch_selectmap }}&amp;lt;/h3&amp;gt; &amp;lt;div id="private_maps" &amp;gt; &amp;lt;img :src="mapImgPath" id="mapThumb" &amp;gt; &amp;lt;div id="mapNav"&amp;gt; &amp;lt;button id="mapLeft" @click="onMapChange(-1)" &amp;gt; &amp;lt;/button&amp;gt; &amp;lt;h5 id="mapText"&amp;gt; {{ loc[mapLocKey].name }} &amp;lt;span &amp;gt; &amp;lt;img src="img/ico_eggColour_normal.png"&amp;gt; &amp;lt;span &amp;gt;x&amp;lt;/span&amp;gt; &amp;lt;span&amp;gt;{{loc[mapLocKey].suggested_player_limit}}&amp;lt;/span&amp;gt; &amp;lt;/span&amp;gt; &amp;lt;/h5&amp;gt; &amp;lt;button id="mapRight" @click="onMapChange(1)" &amp;gt; &amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="btn_horizontal" &amp;gt; &amp;lt;button @click="onCloseClick()" &amp;gt;{{ loc.cancel }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_create_private_game_popup = { template: '#create-private-game-template', props: ['loc', 'serverLocKey', 'mapImgBasePath', 'isGameReady'], data: function () { return { showingServerList: false, pickedGameType: 0, gameTypes: vueData.gameTypes, mapIdx: 0, mapImgPath: this.mapImgBasePath + vueData.maps[0].img, mapLocKey: vueData.maps[0].locKey, playClickedBeforeReady: false, } }, methods: { playSound (sound) { vueApp.playSound(sound); }, onCloseClick: function () { this.$parent.close(); vueApp.playSound('./sound/ui/ui_popupclose.mp3'); }, onServerClick: function () { this.showingServerList = true; this.$parent.toggle(); vueApp.$refs.homeScreen.$refs.playPanel.$refs.pickServerPopup.toggle(); vueApp.playSound('./sound/ui/ui_click.mp3'); }, onMapChange: function(dir) { this.mapIdx = ((this.mapIdx + dir) + vueData.maps.length) % vueData.maps.length; this.mapImgPath = this.mapImgBasePath + vueData.maps[this.mapIdx].img; this.mapLocKey = vueData.maps[this.mapIdx].locKey; vueApp.playSound('./sound/ui/ui_onchange.mp3'); }, onPlayTypeWhenSignInComplete() { return this.playClickFunction(); }, onPlaySentBeforeSignIn() { this.gameClickedBeforeReady = true; vueApp.showSpinner('signin_auth_title', 'signin_auth_msg'); }, onPlayClick: function () { this.$parent.close(); if (!this.isGameReady) { this.onPlaySentBeforeSignIn(); return; } vueApp.externPlayObject(vueData.playTypes.createPrivate, this.pickedGameType, this.playerName, this.mapIdx, ''); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); } }, watch: { isGameReady(val) { if (this.gameClickedBeforeReady &amp;amp;&amp;amp; val) { setTimeout(() =&amp;gt; this.onPlayClick(), 700); } } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="account-panel-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;div id="account_top"&amp;gt; &amp;lt;input v-if="isAnonymous" type="image" src="img/attention_indicator.png" v-show="showCornerButtons" @click="onAnonWarningClick"  v-bind:title="loc['account_title_shop']"&amp;gt; &amp;lt;div  @click="onEggStoreClick" v-bind:title="loc['account_title_eggshop']"&amp;gt; &amp;lt;img src="img/ico_goldenEgg.png" &amp;gt; &amp;lt;span &amp;gt;{{ eggBalance }}&amp;lt;/span&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- &amp;lt;input type="image" src="img/ico_nav_leaderboards.png" &amp;gt; --&amp;gt; &amp;lt;input type="image" src="img/ico_nav_shop.png" v-show="showCornerButtons" @click="itemStoreClick"  v-bind:title="loc['account_title_shop']"&amp;gt; &amp;lt;input type="image" src="img/ico_nav_help.png" v-show="showCornerButtons" @click="onHelpClick"  v-bind:title="loc['account_title_faq']"&amp;gt; &amp;lt;input type="image" src="img/ico_nav_share.png" v-show="showShareLinkButton" @click="onShareLinkClick"  v-bind:title="loc['account_title_invite']"&amp;gt; &amp;lt;input type="image" src="img/ico_nav_settings.png" v-show="showCornerButtons" @click="onSettingsClick"  v-bind:title="loc['account_title_settings']"&amp;gt; &amp;lt;input type="image" src="img/ico_nav_fullscreen.png" v-show="showCornerButtons" @click="onFullscreenClick"  v-bind:title="loc['account_title_fullscreen']"&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="account_bottom" v-show="showBottom"&amp;gt; &amp;lt;language-selector :languages="languages" :loc="loc" :selectedLanguageCode="selectedLanguageCode"&amp;gt;&amp;lt;/language-selector&amp;gt; &amp;lt;button id="signInButton" v-show="(isAnonymous &amp;amp;&amp;amp; showSignIn)" @click="onSignInClicked" &amp;gt;{{ loc.sign_in }}&amp;lt;/button&amp;gt; &amp;lt;button id="signOutButton" v-show="!isAnonymous" @click="onSignOutClicked" &amp;gt;{{ loc.sign_out }}&amp;lt;/button&amp;gt; &amp;lt;div id="player_photo" v-show="photoUrl !== null &amp;amp;&amp;amp; photoUrl !== undefined &amp;amp;&amp;amp; photoUrl !== '' &amp;amp;&amp;amp; ! isAnonymous"&amp;gt; &amp;lt;img :src="photoUrl" /&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_account_panel = { template: '#account-panel-template', components: { 'language-selector': comp_language_selector }, props: ['loc', 'eggs', 'languages', 'selectedLanguageCode', 'showBottom', 'photoUrl', 'isAnonymous', 'isOfAge', 'showTargetedAds', 'showCornerButtons', 'ui'], data: function () { return { languageCode: this.selectedLanguageCode, eggBalance: 0, vueData, } }, created() { this.getEggsLocalStorage(); }, methods: { getEggsLocalStorage() { const raw = localStorage.getItem('localLoadOut'); if (!raw) { return; } const storage = JSON.parse(raw); if (!'balance' in storage) { return; } return this.eggBalance = storage.balance; }, onEggStoreClick: function () { if (!vueData.firebaseId) { vueApp.showGenericPopup('p_redeem_error_no_player_title', 'p_redeem_error_no_player_content', 'ok'); return; } vueApp.showEggStorePopup(); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); ga('send', 'event', this.vueData.googleAnalytics.cat.purchases, this.vueData.googleAnalytics.action.eggShackClick); }, itemStoreClick: function() { if (extern.inGame) { vueApp.$refs.gameScreen.hideGameMenu(); extern.openEquipInGame(); vueApp.switchToEquipUi(); } else { vueApp.switchToEquipUi(); } vueApp.$refs.equipScreen.switchToShop(); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, onHelpClick: function () { vueApp.showHelpPopup(); ga('send', 'event', vueApp.googleAnalytics.cat.playerStats, vueApp.googleAnalytics.action.faqPopupClick); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, onSettingsClick: function () { ga('send', 'event', 'open settings'); vueApp.showSettingsPopup(); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, onFullscreenClick: function () { extern.toggleFullscreen(); vueApp.playSound('./sound/ui/ui_click.mp3'); }, onSignInClicked: function () { vueApp.setDarkOverlay(true); this.$emit('sign-in-clicked'); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); }, onSignOutClicked: function () { vueApp.setDarkOverlay(true); this.$emit('sign-out-clicked'); vueApp.playSound('./sound/ui/ui_reset.mp3'); }, onShareLinkClick: function () { extern.inviteFriends(); }, onAnonWarningClick: function() { ga('send', 'event', vueApp.googleAnalytics.cat.playerStats, vueApp.googleAnalytics.action.anonymousPopupOpen); vueApp.showAttentionPopup(); } }, computed: { showSignIn: function () { if (!isFromEU) { return true; } return isFromEU &amp;amp;&amp;amp; this.isOfAge &amp;amp;&amp;amp; this.showTargetedAds; }, showShareLinkButton: function () { return this.showCornerButtons &amp;amp;&amp;amp; (this.ui.showScreen === this.ui.screens.game); } }, watch: { eggs() { this.eggBalance = this.eggs; } } }; &amp;lt;/script&amp;gt; &amp;lt;script id="streamer-panel-template" type="text/x-template"&amp;gt; &amp;lt;div &amp;gt; &amp;lt;div id="stream_mask"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;h1  :&amp;gt;{{ title }}&amp;lt;/h1&amp;gt; &amp;lt;div id="stream_scroll"  v-show="show"&amp;gt; &amp;lt;div  v-for="s in streams"&amp;gt; &amp;lt;a :href="s.link" target="_blank" @click="playSound('./sound/ui/ui_click.mp3')"&amp;gt; &amp;lt;img :src="s.image" &amp;gt; {{ s.name }} &amp;lt;p &amp;gt;{{ s.viewers }} {{ viewers }}&amp;lt;/p&amp;gt; &amp;lt;/a&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_streamer_panel = { template: '#streamer-panel-template', props: ['streams', 'title', 'viewers', 'icon'], methods: { playSound (sound) { vueApp.playSound(sound); } }, computed: { show: function() { if (!this.streams) { return false; } return this.streams.length &amp;gt; 0; } } }; &amp;lt;/script&amp;gt;&amp;lt;template id="stats_panel_template" type="text/x-template"&amp;gt; &amp;lt;div &amp;gt; &amp;lt;h3 &amp;gt;{{ loc.home_stats }}&amp;lt;/h3&amp;gt; &amp;lt;div id="stat_item" &amp;gt; &amp;lt;h4&amp;gt;{{ loc.kills.toUpperCase() }}&amp;lt;/h4&amp;gt; &amp;lt;div &amp;gt;{{ lKills }}&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="stat_item" &amp;gt; &amp;lt;h4&amp;gt;{{ loc.deaths.toUpperCase() }}&amp;lt;/h4&amp;gt; &amp;lt;div &amp;gt;{{ lDeaths }}&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="stat_item" &amp;gt; &amp;lt;h4&amp;gt;{{ loc.kdr.toUpperCase() }}&amp;lt;/h4&amp;gt; &amp;lt;div &amp;gt;{{ lKdr }}&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="stat_item" &amp;gt; &amp;lt;h4&amp;gt;{{ loc.streak.toUpperCase() }}&amp;lt;/h4&amp;gt; &amp;lt;div &amp;gt;{{ lStreak }}&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;script&amp;gt; var comp_stats_panel = { template: '#stats_panel_template', props: ['loc', 'kills', 'deaths', 'kdr', 'streak'], data: () =&amp;gt; { return { localLoadOut : Object, lKills: 0, lDeaths: 0, lKdr: 0, lStreak: 0, } }, created() { this.getStatsLocalStorage(); }, methods: { getStatsLocalStorage() { const raw = localStorage.getItem('localLoadOut'); if (!raw) { return; } const storage = JSON.parse(raw); const {kills, deaths, kdr, streak} = storage; this.lKills = kills; this.lDeaths = deaths; this.lKdr = kdr; this.lStreak = streak; }, }, watch: { kills() { this.lKills = this.kills; this.lDeaths = this.deaths; this.lKdr = this.kdr; this.lStreak = this.streak; } } }; &amp;lt;/script&amp;gt; &amp;lt;script id="play-panel-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;input name="name" :value="playerName" v-bind:placeholder="loc.play_enter_name" @change="onNameChange($event)" v-on:keyup="onPlayerNameKeyUp($event)" &amp;gt;&amp;lt;br&amp;gt; &amp;lt;select name="gameType" v-model="pickedGameType"  @change="onGameTypeChange($event)"&amp;gt; &amp;lt;option v-for="g in gameTypes" v-bind:value="g.value"&amp;gt;{{ loc[g.locKey] }}&amp;lt;/option&amp;gt; &amp;lt;/select&amp;gt;&amp;lt;br&amp;gt; &amp;lt;button name="server" @click="onPickServerButtonClick" :disabled="isButtonDisabled" &amp;gt;{{ loc.server }}: {{ loc[serverLocKey] }}&amp;lt;/button&amp;gt;&amp;lt;br&amp;gt; &amp;lt;button name="play" @click="onPlayButtonClick" &amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.home_play }}&amp;lt;/button&amp;gt; &amp;lt;h3&amp;gt;{{ loc.home_privategames }}&amp;lt;/h3&amp;gt; &amp;lt;div id="btn_horizontal" &amp;gt; &amp;lt;button name="create" @click="onCreatePrivateGameClick" &amp;gt;{{ loc.home_create }}&amp;lt;/button&amp;gt;&amp;amp;nbsp; &amp;lt;button name="join" @click="onJoinPrivateGameClick" &amp;gt;{{ loc.home_join }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Popup: Pick Server --&amp;gt; &amp;lt;large-popup id="pickServerPopup" ref="pickServerPopup" @popup-closed="onPickServerPopupClosed"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.server }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;server-list-popup id="server_list_popup" ref="serverListPopup" v-if="(serverList.length &amp;gt; 0)" :loc="loc" :servers="serverList" :picked-server-id="currentServerId" @server-picked="onServerPicked"&amp;gt;&amp;lt;/server-list-popup&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- Popup: Create Private Game --&amp;gt; &amp;lt;large-popup id="createPrivateGamePopup" ref="createPrivateGamePopup"&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;create-private-game-popup id="createPrivateGame" ref="createPrivateGame" :loc="loc" :server-loc-key="serverLocKey" :is-game-ready="isGameReady" map-img-base-path="./img/maps/"&amp;gt;&amp;lt;/create-private-game-popup&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- Popup: Join Private Game --&amp;gt; &amp;lt;small-popup id="joinPrivateGamePopup" ref="joinPrivateGamePopup" :popup-model="home.joinPrivateGamePopup" @popup-confirm="onJoinConfirmed"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.p_game_code_title }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;div  v-show="home.joinPrivateGamePopup.showInvalidCodeMsg"&amp;gt;{{ loc.p_game_code_blank }}&amp;lt;/div&amp;gt; &amp;lt;p&amp;gt;&amp;lt;input type="text"  v-model="home.joinPrivateGamePopup.code" v-bind:placeholder="loc.p_game_code_enter" v-on:keyup.enter="onJoinConfirmed"&amp;gt;&amp;lt;/p&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.cancel }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.confirm }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script id="server-list-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;h1 &amp;gt;{{ loc.p_servers_title }}&amp;lt;/h1&amp;gt; &amp;lt;div v-for="s in servers" :key="s.id"&amp;gt; &amp;lt;div id="server_list_item"&amp;gt; &amp;lt;input type="radio" :id="('rb_' + s.id)" name="pickServer" v-bind:value="s.id" v-model="serverId" @click="playSound('./sound/ui/ui_onchange.mp3')"&amp;gt; &amp;lt;label :for="('rb_' + s.id)" &amp;gt;{{ loc[s.locKey] }} &amp;lt;/label&amp;gt; &amp;lt;label :for="('rb_' + s.id)" &amp;gt; &amp;lt;span  : :&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/label&amp;gt; &amp;lt;label :for="('rb_' + s.id)" &amp;gt; {{ s.ping }}ms&amp;lt;/label&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="btn_horizontal" &amp;gt; &amp;lt;button @click="onCancelClick()" &amp;gt;{{ loc.cancel }}&amp;lt;/button&amp;gt; &amp;lt;button @click="onConfirmClick()" &amp;gt;{{ loc.ok }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_server_list_popup = { template: '#server-list-template', props: ['loc', 'servers', 'pickedServerId'], data: function () { return { colorClasses: ['greenPing', 'yellowPing','orangePing', 'redPing'], serverId: this.pickedServerId } }, methods: { playSound (sound) { vueApp.playSound(sound); }, barColorClass: function (server) { var colorIdx = Math.min(3, Math.floor(server.ping / 100)); return this.colorClasses[colorIdx]; }, barStyle: function (server) { return { width: Math.min(10, Math.max(0, server.ping / 100)) + 0.1 + 'em' } }, onCancelClick: function () { this.serverId = this.pickedServerId; this.$parent.close(); vueApp.playSound('./sound/ui/ui_popupclose.mp3'); }, onConfirmClick: function () { this.$emit('server-picked', this.serverId); this.$parent.close(); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); } } }; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_play_panel = { template: '#play-panel-template', components: { 'create-private-game-popup': comp_create_private_game_popup, 'server-list-popup': comp_server_list_popup }, props: ['loc', 'playerName', 'gameTypes', 'currentGameType', 'serverList', 'currentServerId', 'home', 'isGameReady'], data: function() { return { pickedServerId: null, pickedGameType: this.currentGameType, isButtonDisabled: true, playClickedBeforeReady: false, playClickFunction: Function, } }, methods: { onPickServerButtonClick: function () { this.$refs.pickServerPopup.toggle(); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, onServerPicked: function (serverId) { if (vueData.currentServerId === serverId) { return; } vueData.currentServerId = serverId; extern.selectServer(vueData.currentServerId); vueApp.playSound('./sound/ui/ui_onchange.mp3'); }, onPickServerPopupClosed: function () { if (this.$refs.createPrivateGame.showingServerList) { this.$refs.createPrivateGame.showingServerList = false; this.$refs.createPrivateGamePopup.toggle(); } }, onNameChange: function (event) { console.log('name changed to: ' + event.target.value); this.$emit('playerNameChanged', event.target.value); }, onPlayerNameKeyUp: function (event) { event.target.value = extern.fixStringWidth(event.target.value); // Send username to server to start the game! if (event.code == "Enter" || event.keyCode == 13) { if (vueData.playerName.length &amp;gt; 0) { extern.play({ playType: vueData.playTypes.joinPublic, playerName: vueData.playerName }); } } }, onGameTypeChange: function (event) { extern.selectGameType(event.target.value); vueApp.playSound('./sound/ui/ui_onchange.mp3'); }, onPlayTypeWhenSignInComplete() { return this.playClickFunction(); }, onPlaySentBeforeSignIn(callback) { this.gameClickedBeforeReady = true; vueApp.showSpinner('signin_auth_title', 'signin_auth_msg'); this.playClickFunction = callback; }, hasValidPlayerNameCheck() { console.log('invalid player name'); vueApp.showGenericPopup('play_pu_name_title', 'play_pu_name_content', 'ok'); vueApp.hideSpinner(); return; }, onPlayButtonClick: function () { if (!hasValue(this.playerName)) { this.hasValidPlayerNameCheck(); return; } if (!this.isGameReady) { this.onPlaySentBeforeSignIn(this.onPlayButtonClick); return; } vueApp.game.respawnTime = 0; vueApp.externPlayObject(vueData.playTypes.joinPublic, this.pickedGameType, this.playerName, -1, ''); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); }, onCreatePrivateGameClick: function () { this.$refs.createPrivateGamePopup.toggle(); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, onJoinPrivateGameClick: function () { this.showJoinPrivateGamePopup(vueData.home.joinPrivateGamePopup.code); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, showJoinPrivateGamePopup: function (showCode) { // The popup must be active before it will update; set code after showing this.$refs.joinPrivateGamePopup.show(); vueData.home.joinPrivateGamePopup.code = showCode; }, onJoinConfirmed: function () { if (!hasValue(this.playerName)) { this.hasValidPlayerNameCheck(); return; } if (!this.isGameReady) { this.onPlaySentBeforeSignIn(this.onJoinConfirmed) return; } vueData.home.joinPrivateGamePopup.code = vueData.home.joinPrivateGamePopup.code.replace(parsedUrl.root, ''); this.$refs.joinPrivateGamePopup.hide(); vueApp.externPlayObject(vueData.playTypes.joinPrivate, '', this.playerName, '', vueData.home.joinPrivateGamePopup.code); } }, computed: { serverLocKey: function () { if (!hasValue(this.serverList) || this.serverList.length === 0) { return ''; } var server = this.serverList.find(s =&amp;gt; { return s.id == vueData.currentServerId; }); return hasValue(server) ? server.locKey : ''; }, }, watch: { currentGameType: function (val) { this.pickedGameType = val; }, isGameReady(val) { this.isButtonDisabled = val ? false : true; if (this.gameClickedBeforeReady &amp;amp;&amp;amp; val) { this.onPlayTypeWhenSignInComplete() } } } }; &amp;lt;/script&amp;gt;&amp;lt;template id="weaponselect_panel_template" type="text/x-template"&amp;gt; &amp;lt;div :&amp;gt; &amp;lt;div &amp;gt; &amp;lt;img src="img/ico_weapon_assaultRifle.png"  : @click="selectClass(charClass.Soldier)"&amp;gt;&amp;lt;span&amp;gt;&amp;lt;strong&amp;gt;{{loc.weapon_soldier_title}}:&amp;lt;/strong&amp;gt; {{loc.weapon_soldier_content}}&amp;lt;/span&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;img src="img/ico_weapon_shotgun.png"  : @click="selectClass(charClass.Scrambler)"&amp;gt;&amp;lt;span&amp;gt;&amp;lt;strong&amp;gt;{{loc.weapon_scrambler_title}}: &amp;lt;/strong&amp;gt; {{loc.weapon_scrambler_content}}&amp;lt;/span&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;img src="img/ico_weapon_sniper.png"  : @click="selectClass(charClass.Ranger)"&amp;gt;&amp;lt;span&amp;gt;&amp;lt;strong&amp;gt;{{loc.weapon_ranger_title}}: &amp;lt;/strong&amp;gt;{{loc.weapon_ranger_content}}&amp;lt;/span&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;img src="img/ico_weapon_rocketLauncher.png"  : @click="selectClass(charClass.Eggsploder)"&amp;gt;&amp;lt;span&amp;gt;&amp;lt;strong&amp;gt;{{loc.weapon_eggsploder_title}}: &amp;lt;/strong&amp;gt; {{loc.weapon_eggsploder_content}}&amp;lt;/span&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;img src="img/ico_weapon_SMG.png"  : @click="selectClass(charClass.Whipper)"&amp;gt;&amp;lt;span&amp;gt;&amp;lt;strong&amp;gt;{{loc.weapon_whipper_title}}: &amp;lt;/strong&amp;gt;{{loc.weapon_whipper_content}}&amp;lt;/span&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;img src="img/ico_weapon_boltAction.png"  : @click="selectClass(charClass.Crackshot)"&amp;gt;&amp;lt;span&amp;gt;&amp;lt;strong&amp;gt;{{loc.weapon_crackshot_title}}: &amp;lt;/strong&amp;gt;{{loc.weapon_crackshot_content}}&amp;lt;/span&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;script&amp;gt; var comp_weapon_select_panel = { template: '#weaponselect_panel_template', props: ['currentClass', 'loc'], data: function () { return { charClass: CharClass, vueData, } }, methods: { selectClass: function (classIdx) { if (!vueData.accountSettled){ return; } extern.changeClass(classIdx); this.$emit('changed-class', classIdx); vueApp.playSound('./sound/ui/ui_click.mp3'); }, addSelectedCssClass: function (classIdx) { return (this.currentClass === classIdx) ? 'weapon_selected' : ''; } }, // watch: { // accountSettled(val) { // } // } }; &amp;lt;/script&amp;gt; &amp;lt;script id="newsfeed-panel-template" type="text/x-template"&amp;gt; &amp;lt;section &amp;gt; &amp;lt;article v-if="items" v-for="item in items.slice(0,6)" @click="onItemThatIsClicked(item)"  :&amp;gt; &amp;lt;img :src="item.jetpack_featured_media_url" &amp;gt; &amp;lt;p&amp;gt;{{ stripHtml(item.excerpt.rendered) }}&amp;lt;/p&amp;gt; &amp;lt;/article&amp;gt; &amp;lt;/section&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_newsfeed_panel = { template: '#newsfeed-panel-template', props: ['currentLanguageCode'], data: function () { return { items: [], localizedItems: [], jsonData: null, websiteJson: 'ssNews.json', newsCacheDate: '', getCacheDate: '', getCachedData: [], } }, mounted: function () { // this.fetchWebData(); this.checklocalForNewsData(); }, methods: { localizeItems: function () { let locItemList = []; const lang = 'en'; this.items.forEach( (item) =&amp;gt; { var locEntry = item.loc.find((l) =&amp;gt; { // Since we have no localization for news items only display en // return l.code === this.currentLanguageCode; return l.code === lang; }); item.msg = hasValue(locEntry) ? locEntry.msg : ''; locItemList.push(item); }); this.localizedItems = locItemList; }, onItemClicked: function(item) { extern.clickedHouseLink(item); vueApp.playSound('./sound/ui/ui_click.mp3'); }, onItemThatIsClicked(item) { extern.clickedWebFeedItem(item); }, applyClickClass: function (item) { return extern.hasHouseLink(item) ? 'clickme' : ''; }, checklocalForNewsData() { this.newsCacheDate = localStorage.getItem('shellNewsFeedDate'); this.getCacheData = localStorage.getItem('shellNewsFeedData'); // let hours = 0; let hours = 0.5; let dateNow = new Date().getTime(); if (this.newsCacheDate === null || this.getCacheData === null) { localStorage.setItem('shellNewsFeedDate', dateNow); this.fetchWebData(); console.log('News Null'); return; } else { if (dateNow - this.newsCacheDate &amp;gt; hours*60*60*1000) { console.log('news cached expired'); localStorage.setItem('shellNewsFeedDate', dateNow); localStorage.removeItem('shellNewsFeedData'); this.fetchWebData(); return; } else { console.log('cached news'); this.setItems(JSON.parse(this.getCacheData)); return; } } }, fetchWebData() { console.log('Load news'); const fetchHeaders = new Headers(); fetchHeaders.append('pragma', 'no-cache'); fetchHeaders.append('cache-control', 'no-cache'); var fetchInit = { method: 'GET', headers: fetchHeaders, }; var outer = this; fetch(this.websiteJson, fetchInit) .then((response) =&amp;gt; response.json()) .then((parsedItemList) =&amp;gt; { outer.items = parsedItemList; outer.setItems(outer.items); }) .catch((error)=&amp;gt;console.log('News error', error)); return; }, setItems(items) { const localData = localStorage.getItem('shellNewsFeedData'); this.items = items; if (localData === null) { console.log('Set local news'); localStorage.setItem('shellNewsFeedData', JSON.stringify(this.items)); } return; }, stripHtml(html) { //Strip html // Create a new div element const tempDiv = document.createElement("div"); // Set the HTML content with the providen tempDiv.innerHTML = html; // Retrieve the text property of the element (cross-browser support) return tempDiv.textContent || tempDiv.inner } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="chicken-panel-template" type="text/x-template"&amp;gt; &amp;lt;div id="showBuyPassDialogButton"&amp;gt; &amp;lt;img src="img/ico_chickenBadge.png" v-show="doUpgraded"&amp;gt; &amp;lt;div v-show="!doUpgraded"&amp;gt; &amp;lt;img src="img/anim_chicken.gif" @click="onChickenClick" &amp;gt; &amp;lt;div id="buyPassChickenSpeech"&amp;gt; &amp;lt;img src="img/speechtail.png" &amp;gt; &amp;lt;span v-html="loc.chicken_cta"&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_chicken_panel = { template: '#chicken-panel-template', props: ['local', 'doUpgraded'], data: function () { return vueData; }, methods: { onChickenClick: function () { vueApp.playSound('./sound/ui/ui_chicken.mp3'); vueApp.showGoldChickenPopup(); ga('send', 'event', this.googleAnalytics.cat.purchases, 'Golden Chicken Click'); } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="footer-links-panel-template" type="text/x-template"&amp;gt; &amp;lt;div &amp;gt; &amp;lt;a @click="onChangelogClicked" &amp;gt;{{ version }}&amp;lt;/a&amp;gt; | &amp;lt;a href="https://shell-shockers.myshopify.com/collections/all" target="_blank" @click="playSound('./sound/ui/ui_click.mp3')"&amp;gt;{{ loc.footer_merchandise }}&amp;lt;/a&amp;gt; | &amp;lt;a href="https://www.bluewizard.com/privacypolicy" target="_blank" @click="playSound('./sound/ui/ui_click.mp3')"&amp;gt;{{ loc.footer_privacypolicy }}&amp;lt;/a&amp;gt; | &amp;lt;a href="https://bluewizard.com/terms/" target="_blank" @click="playSound('./sound/ui/ui_click.mp3')"&amp;gt;{{ loc.footer_termsofservice }}&amp;lt;/a&amp;gt; | &amp;lt;a href="https://www.bluewizard.com" target="_blank" @click="playSound('./sound/ui/ui_click.mp3')"&amp;gt;&amp;amp;copy; 2020 {{ loc.footer_bluewizard }}&amp;lt;/a&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_footer_links_panel = { template: '#footer-links-panel-template', props: ['loc'], data: function () { return { version: version } }, methods: { onChangelogClicked: function () { vueApp.showChangelogPopup(); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, playSound (sound) { vueApp.playSound(sound); } } }; &amp;lt;/script&amp;gt; &amp;lt;script id="social-panel-template" type="text/x-template"&amp;gt; &amp;lt;div &amp;gt; &amp;lt;a href="http://eepurl.com/dFPPwb" target="_blank"&amp;gt;&amp;lt;img src="img/ico_social_newsletter.png"  @click="playSound('./sound/ui/ui_click.mp3')"&amp;gt;&amp;lt;/a&amp;gt; &amp;lt;a href="https://discord.gg/bluewizard" target="_blank"&amp;gt;&amp;lt;img src="img/ico_social_discord.png"  @click="playSound('./sound/ui/ui_click.mp3')"&amp;gt;&amp;lt;/a&amp;gt; &amp;lt;a href="https://www.facebook.com/ShellShockersGame" target="_blank"&amp;gt;&amp;lt;img src="img/ico_social_facebook.png"  @click="playSound('./sound/ui/ui_click.mp3')"&amp;gt;&amp;lt;/a&amp;gt; &amp;lt;a href="https://twitter.com/eggcombat" target="_blank"&amp;gt;&amp;lt;img src="img/ico_social_twitter.png"  @click="playSound('./sound/ui/ui_click.mp3')"&amp;gt;&amp;lt;/a&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_social_panel = { template: '#social-panel-template', methods: { playSound (sound) { vueApp.playSound(sound); } } }; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_home_screen = { template: '#home-screen-template', components: { 'streamer-panel': comp_streamer_panel, 'stats-panel': comp_stats_panel, 'play-panel': comp_play_panel, 'weapon-select-panel': comp_weapon_select_panel, 'newsfeed-panel': comp_newsfeed_panel, 'house-ad-big': comp_house_ad_big, 'house-ad-small': comp_house_ad_small, 'account-panel': comp_account_panel, 'chicken-panel': comp_chicken_panel, 'footer-links-panel': comp_footer_links_panel, 'social-panel': comp_social_panel }, data: function () { return vueData; }, created() { this.titleScreenDisplayAd = typeof(loadTitleAdDisplay) === 'function' ? loadTitleAdDisplay : Function; }, methods: { playSound (sound) { vueApp.playSound(sound); }, onEquipClicked: function () { vueApp.switchToEquipUi(); vueApp.playSound('./sound/ui/ui_equip.mp3'); }, showSignIn: function () { extern.showSignInDialog(); vueApp.$refs.firebaseSignInPopup.show(); }, onSignInClicked: function () { this.showSignIn(); }, onSignOutClicked: function () { extern.signOut(); }, onResendEmailClicked: function () { extern.sendFirebaseVerificationEmail(); vueApp.showGenericPopup('verify_email_sent', 'verify_email_instr', 'ok'); }, onBigHouseAdClosed: function () { console.log('big house ad closed event received'); this.ui.houseAds.big = null; this.urlParamSet = this.urlParams ? true : null; vueApp.shellShockUrlParamaterEvents(); }, onPlayerNameChanged: function (newName) { console.log('play name event handler'); vueApp.setPlayerName(newName); vueApp.playSound('./sound/ui/ui_onchange.mp3'); }, clickEggToPlay() { play: 'play game', ga('send', 'event', vueData.googleAnalytics.cat.play, vueData.googleAnalytics.action.eggDollClick); vueApp.$refs.homeScreen.$refs.playPanel.onPlayButtonClick(); } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="equip-screen-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;div id="equip_wrapper"&amp;gt; &amp;lt;account-panel id="account_panel" ref="accountPanel" :loc="loc" :eggs="eggs" :show-corner-buttons="ui.showCornerButtons" :ui="ui" :show-bottom="false" :is-anonymous="isAnonymous"&amp;gt;&amp;lt;/account-panel&amp;gt; &amp;lt;div id="equip_box"&amp;gt; &amp;lt;section id="equip_panel_left" &amp;gt; &amp;lt;div &amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="equip_sidebox" &amp;gt; &amp;lt;equipped-slots id="equip.equipped_slots" ref="equip.equipped_slots" :loc="loc" :primary-item="equip.equippedPrimary" :secondary-item="equip.equippedSecondary" :hat-item="equip.equippedHat" :stamp-item="equip.equippedStamp" @equipped-type-selected="onEquippedTypeSelected"&amp;gt;&amp;lt;/equipped-slots&amp;gt; &amp;lt;color-select id="equip.equipped_slots" ref="colorSelect" :loc="loc" :color-idx="equip.colorIdx" :extra-colors-locked="equip.extraColorsLocked" @color-changed="onColorChanged"&amp;gt;&amp;lt;/color-select&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;p align="center"&amp;gt;&amp;lt;button @click="onRedeemClick" &amp;gt;{{ loc.eq_redeem }}&amp;lt;/button&amp;gt;&amp;lt;/p&amp;gt; &amp;lt;/section&amp;gt; &amp;lt;!-- end.left_panel --&amp;gt; &amp;lt;section id="equip_panel_middle" &amp;gt; &amp;lt;div &amp;gt; &amp;lt;button  : @click="switchToInventory"&amp;gt;{{ loc.eq_inventory }}&amp;lt;/button&amp;gt; &amp;lt;button  :disabled="!accountSettled" : @click="switchToShop"&amp;gt;{{ loc.eq_shop }}&amp;lt;/i&amp;gt;&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="equip_purchase_top" &amp;gt; &amp;lt;!-- &amp;lt;div&amp;gt;&amp;lt;/div&amp;gt; --&amp;gt; &amp;lt;price-tag id="price_tag"  v-if="equip.buyingItem" ref="price_tag" :loc="loc" :item="equip.buyingItem" @buy-item-clicked="onBuyItemClicked"&amp;gt;&amp;lt;/price-tag&amp;gt; &amp;lt;physical-tag id="physical-tag"  v-if="equip.physicalUnlockPopup.item" ref="physical-tag" :loc="loc" :item="equip.physicalUnlockPopup.item" @buy-item-clicked="onBuyItemClicked"&amp;gt;&amp;lt;/physical-tag&amp;gt; &amp;lt;!-- &amp;lt;p v-if="equip.buyingItem"&amp;gt;{{ equip.buyingItem }}&amp;lt;/p&amp;gt; &amp;lt;p v-if="equip.physicalUnlockPopup"&amp;gt;{{ equip.physicalUnlockPopup.item }}&amp;lt;/p&amp;gt; --&amp;gt; &amp;lt;!--&amp;lt;item-timer id="item_timer" ref="item_timer" :loc="loc"&amp;gt;&amp;lt;/item-timer&amp;gt;--&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="equip_weapon_panel"&amp;gt; &amp;lt;weapon-select-panel id="weapon_select" ref="weapon_select":current- :loc="loc" @changed-&amp;gt;&amp;lt;/weapon-select-panel&amp;gt; &amp;lt;button  @click="onBackClick"&amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.back }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/section&amp;gt; &amp;lt;!-- end .middle_panel --&amp;gt; &amp;lt;section id="equip_panel_right" &amp;gt; &amp;lt;item-type-selector id="item_type_selector" ref="item_type_selector" :selected-item-type="equip.selectedItemType" :show-special-items="equip.showSpecialItems" :in-shop="isInShop" @item-type-changed="onItemTypeChanged" @tagged-items-clicked="onTaggedItemsClicked"&amp;gt;&amp;lt;/item-type-selector&amp;gt; &amp;lt;div id="equip_sidebox" &amp;gt; &amp;lt;item-grid id="item_grid" ref="item_grid" :loc="loc" :grid- :items="equip.showingItems" :selectedItem="equip.selectedItem" :category-loc-key="equip.categoryLocKey" :in-shop="isInShop" @item-selected="onItemSelected" @switch-to-shop="onSwitchToShopClicked"&amp;gt;&amp;lt;/item-grid&amp;gt; &amp;lt;!--&amp;lt;house-ad-small id="banner-ad" v-show="!isInShop"&amp;gt;&amp;lt;/house-ad-small&amp;gt;--&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/section&amp;gt; &amp;lt;!-- .right_panel--&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Popup: Buy Item --&amp;gt; &amp;lt;small-popup id="buyItemPopup" ref="buyItemPopup" @popup-confirm="onBuyItemConfirm"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.p_buy_item_title }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;canvas id="buyItemCanvas" ref="buyItemCanvas"  &amp;gt;&amp;lt;/canvas&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;img src="img/ico_goldenEgg.png" /&amp;gt; &amp;lt;h1&amp;gt;{{ (equip.buyingItem) ? equip.buyingItem.price : '' }}&amp;lt;/h1&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.p_buy_item_cancel }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.p_buy_item_confirm }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Redeem Code --&amp;gt; &amp;lt;small-popup id="redeemCodePopup" ref="redeemCodePopup" :popup-model="equip.redeemCodePopup" @popup-confirm="onRedeemCodeConfirm"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.p_redeem_code_title }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;div  v-show="equip.redeemCodePopup.showInvalidCodeMsg"&amp;gt;{{ loc.p_redeem_code_no_code }}&amp;lt;/div&amp;gt; &amp;lt;p&amp;gt;&amp;lt;input type="text"  v-model="equip.redeemCodePopup.code" v-bind:placeholder="loc.p_redeem_code_enter"&amp;gt;&amp;lt;/p&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.cancel }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.confirm }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Physical Unlock --&amp;gt; &amp;lt;small-popup id="physicalUnlockPopup" ref="physicalUnlockPopup" :popup-model="equip.physicalUnlockPopup" @popup-confirm="onPhysicalUnlockConfirm"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.p_physical_unlock_title }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;div v-if="(equip.physicalUnlockPopup.item !== null)"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;item :item="equip.physicalUnlockPopup.item" :isSelected="false" :show-item-only="true"&amp;gt;&amp;lt;/item&amp;gt; &amp;lt;div &amp;gt; &amp;lt;img src="img/ico_goldenEgg.png" /&amp;gt; &amp;lt;h1&amp;gt;{{ loc.p_buy_special_price }}&amp;lt;/h1&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; {{ loc[equip.physicalUnlockPopup.item.item_data.physicalUnlockLocKey] }} &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.cancel }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.confirm }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script id="equipped-slots-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;h3 &amp;gt;{{ loc.eq_equipped }}&amp;lt;/h3&amp;gt; &amp;lt;div id="equip_equippedslots"&amp;gt; &amp;lt;div  @click="onClick(itemType.Primary)"&amp;gt; &amp;lt;item id="primary_item" ref="primary_item" v-if="primaryItem" :item="primaryItem" &amp;gt;&amp;lt;/item&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div  @click="onClick(itemType.Secondary)"&amp;gt; &amp;lt;item id="secondary_item" ref="secondary_item" v-if="primaryItem" :item="secondaryItem" &amp;gt;&amp;lt;/item&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div  @click="onClick(itemType.Hat)"&amp;gt; &amp;lt;item id="hat_item" ref="hat_item" v-if="hatItem" :item="hatItem"&amp;gt;&amp;lt;/item&amp;gt; &amp;lt;div v-if="!hatItem" &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div  @click="onClick(itemType.Stamp)"&amp;gt; &amp;lt;item id="stamp_item" ref="stamp_item" v-if="stampItem" :item="stampItem"&amp;gt;&amp;lt;/item&amp;gt; &amp;lt;div v-if="!stampItem" &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_equipped_slots = { template: '#equipped-slots-template', components: { 'item': comp_item }, props: ['loc', 'primaryItem', 'secondaryItem', 'hatItem', 'stampItem'], data: function () { return { itemType: ItemType } }, methods: { onClick: function (itemType) { this.$emit('equipped-type-selected', itemType); } }, computed: { emptyHatClass: function () { return (this.hatItem === null) ? 'equip_icon_hat' : ''; }, emptyStampClass: function () { return (this.stampItem === null) ? 'equip_icon_stamp' : ''; } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="color-select-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;h3 &amp;gt;{{ loc.eq_color }}&amp;lt;/h3&amp;gt; &amp;lt;div id="equip_free_colors" &amp;gt; &amp;lt;svg v-for="(c, index) in freeColors"  : : @click="onClick(index)"&amp;gt;&amp;lt;use xlink:href="#icon-egg"&amp;gt;&amp;lt;/use&amp;gt;&amp;lt;/svg&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="equip_paid_colors" &amp;gt; &amp;lt;svg v-for="(c, index) in paidColors"  : : @click="onClick(index + freeColors.length)"&amp;gt;&amp;lt;use :xlink:href="getExtraColorEggIcon(index + freeColors.length)"&amp;gt;&amp;lt;/use&amp;gt;&amp;lt;/svg&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_color_select = { template: '#color-select-template', props: ['loc', 'colorIdx', 'extraColorsLocked'], data: function () { return { freeColors: freeColors, paidColors: paidColors } }, methods: { isSelectedClass: function (idx) { return (idx === this.colorIdx) ? 'selected' : '' }, getExtraColorEggIcon: function (idx) { return (this.extraColorsLocked === true) ? '#icon-egg-locked' : '#icon-egg'; }, onClick: function (idx) { if (idx &amp;gt;= freeColors.length &amp;amp;&amp;amp; this.extraColorsLocked === true) { vueApp.showGoldChickenPopup(); vueApp.playSound('./sound/ui/ui_chicken.mp3'); return; } this.$emit('color-changed', idx); } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="item-timer-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;div id="equip_timerem" &amp;gt; &amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; 9{{ loc.eq_day }}&amp;lt;span &amp;gt;:&amp;lt;/span&amp;gt;12{{ loc.eq_hour }} &amp;lt;br&amp;gt;{{ loc.eq_remaining }} &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_item_timer = { template: '#item-timer-template', props: ['loc'] }; &amp;lt;/script&amp;gt;&amp;lt;script id="price-tag-template" type="text/x-template"&amp;gt; &amp;lt;div id="equip_purchase_items" &amp;gt; &amp;lt;div id="equip_pricetag" &amp;gt; &amp;lt;img src="img/pricetag_left.png" &amp;gt; &amp;lt;div &amp;gt; &amp;lt;img src="img/ico_goldenEgg.png"&amp;gt;{{ item.price }} &amp;lt;/div&amp;gt; &amp;lt;img src="img/pricetag_right.png" &amp;gt; &amp;lt;/div&amp;gt; &amp;lt;button  @click="onBuyClick"&amp;gt;{{ loc.eq_buy }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_price_tag = { template: '#price-tag-template', props: ['loc', 'item'], methods: { onBuyClick: function () { this.$emit('buy-item-clicked', this.item); } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="physical-tag-template" type="text/x-template"&amp;gt; &amp;lt;div id="equip_get_physical_item" &amp;gt; &amp;lt;div id="equip_pricetag" &amp;gt; &amp;lt;img src="img/pricetag_left.png"&amp;gt; &amp;lt;div &amp;gt; &amp;lt;img src="img/ico_goldenEgg.png" &amp;gt;{{ loc.p_buy_special_price }} &amp;lt;/div&amp;gt; &amp;lt;img src="img/pricetag_right.png"&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;button  @click="onBuyClick"&amp;gt;{{ loc.p_chicken_goldbutton }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_physical_tag = { template: '#physical-tag-template', props: ['loc', 'item'], methods: { onBuyClick: function () { this.$emit('buy-item-clicked', this.item); } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="item-type-selector-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;div id="equip_itemtype" &amp;gt; &amp;lt;img src="img/ico_weaponPrimary.png"  : @click="onItemTypeClick(itemType.Primary)"&amp;gt; &amp;lt;img src="img/ico_weaponSecondary.png"  : @click="onItemTypeClick(itemType.Secondary)"&amp;gt; &amp;lt;img src="img/ico_hat.png"  : @click="onItemTypeClick(itemType.Hat)"&amp;gt; &amp;lt;img src="img/ico_stamp.png"  : @click="onItemTypeClick(itemType.Stamp)"&amp;gt; &amp;lt;img src="img/ico_specialItem.png" v-show="inShop &amp;amp;&amp;amp; showSpecialItems"  : @click="onTaggedTypeClick"&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_item_type_selector = { template: '#item-type-selector-template', props: ['showSpecialItems', 'selectedItemType', 'inShop'], data: function () { return { itemType: ItemType, showingTagged: false } }, methods: { onItemTypeClick: function (itemType) { this.$emit('item-type-changed', itemType); }, onTaggedTypeClick: function () { this.$emit('tagged-items-clicked'); }, getSelectedClass: function (itemType) { return (itemType === this.selectedItemType) ? 'selected' : ''; } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="item-grid-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;div id="item_mask"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;h3 v-if="accountSettled" &amp;gt;{{ loc[categoryLocKey] }}&amp;lt;/h3&amp;gt; &amp;lt;div v-if="accountSettled" id="equip_grid" :&amp;gt; &amp;lt;item v-for="i in items" :loc="loc" :item="i" :key="i.id" :isSelected="isSelected(i)" @item-selected="onItemSelected"&amp;gt;&amp;lt;/item&amp;gt; &amp;lt;div v-show="!inShop"  @click="onSwitchToShopClick"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div v-show="inShop &amp;amp;&amp;amp; (items.length === 0)" &amp;gt; &amp;lt;div  v-html="loc.eq_sold_out_head"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div  v-html="loc.eq_sold_out_text"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="items-account-not-loaded" v-show="!accountSettled" &amp;gt; &amp;lt;h3&amp;gt;{{loc.signin_auth_title}}&amp;lt;/h3&amp;gt; &amp;lt;p&amp;gt;{{loc.signin_auth_msg}}&amp;lt;/p&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_item_grid = { template: '#item-grid-template', components: { 'item': comp_item }, props: ['items', 'selectedItem', 'gridClass', 'categoryLocKey', 'inShop'], data() { return vueData; }, methods: { onItemSelected: function (selectedItem) { this.$emit('item-selected', selectedItem); }, isSelected: function (item) { if (!hasValue(this.selectedItem)) { return false; } return (this.selectedItem.id === item.id); }, onSwitchToShopClick: function () { this.$emit('switch-to-shop'); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); } }, computed: { categoryName: function () { if (!hasValue(this.selectedItem)) { return null; } return this.loc['item_type_' + this.selectedItem.item_type_id]; } } }; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_equip_screen = { template: '#equip-screen-template', components: { 'account-panel': comp_account_panel, 'equipped-slots': comp_equipped_slots, 'color-select': comp_color_select, 'item-timer': comp_item_timer, 'price-tag': comp_price_tag, 'physical-tag': comp_physical_tag, 'item-type-selector': comp_item_type_selector, 'item-grid': comp_item_grid, 'house-ad-small': comp_house_ad_small, 'weapon-select-panel': comp_weapon_select_panel, 'item': comp_item, // 'account-panel': comp_account_panel, 'house-ad-small': comp_house_ad_small }, data: function () { return vueData; }, equippedItems: {}, methods: { setup: function (itemType) { if (!itemType) { itemType = ItemType.Primary; } this.updateEquippedItems(); this.poseEquippedItems(); if (itemType === 'tagged') { this.populateItemGridWithTagged(this.equip.specialItemsTag); } else { this.populateItemGridWithType(itemType); } this.selectEquippedItemForType(); }, updateEquippedItems: function () { this.$options.equippedItems = extern.getEquippedItems(); this.equip.equippedHat = this.$options.equippedItems[ItemType.Hat]; this.equip.equippedStamp = this.$options.equippedItems[ItemType.Stamp]; this.equip.equippedPrimary = this.$options.equippedItems[ItemType.Primary]; this.equip.equippedSecondary = this.$options.equippedItems[ItemType.Secondary]; }, poseEquippedItems: function () { this.posingHat = this.equip.equippedHat; this.posingStamp = this.equip.equippedStamp; this.posingWeapon = (this.equip.showingWeaponType === ItemType.Primary) ? this.equip.equippedPrimary : this.equip.equippedSecondary; this.workItBaby(); }, selectEquippedItemForType: function () { switch (this.equip.selectedItemType) { case ItemType.Hat: this.equip.selectedItem = this.equip.equippedHat; break; case ItemType.Stamp: this.equip.selectedItem = this.equip.equippedStamp; break; case ItemType.Primary: this.equip.selectedItem = this.equip.equippedPrimary; break; case ItemType.Secondary: this.equip.selectedItem = this.equip.equippedSecondary; break; } }, populateItemGridWithType: function (itemType) { this.equip.selectedItemType = itemType; var items = extern.getItemsOfType(itemType); this.populateItemGrid(items); this.equip.categoryLocKey = 'item_type_{0}{1}'.format(itemType, ((itemType === ItemType.Primary) ? '_' + this.classIdx : '')); }, populateItemGridWithTagged: function (tag) { var items = extern.getTaggedItems(tag); this.populateItemGrid(items); this.equip.categoryLocKey = 'item_type_5'; }, populateItemGrid: function (items) { if (this.equip.mode === vueData.equip.equipModes.inventory) { items = items.filter(i =&amp;gt; { return extern.isItemOwned(i) || (i.is_available &amp;amp;&amp;amp; i.unlock === "default"); }); } else { items = items.filter(i =&amp;gt; { return i.is_available &amp;amp;&amp;amp; !extern.isItemOwned(i) &amp;amp;&amp;amp; i.unlock !== "default"; }) } this.equip.showingItems = items; }, workItBaby: function () { extern.poseWithItem(ItemType.Hat, this.posingHat); extern.poseWithItem(ItemType.Stamp, this.posingStamp); extern.poseWithItem(this.posingWeapon.item_type_id, this.posingWeapon); }, onBackClick: function () { extern.saveEquipment(); this.equip.showingWeaponType = ItemType.Primary; this.poseEquippedItems(); if (!extern.inGame) { vueApp.switchToHomeUi(); } else { extern.closeEquipInGame(); vueApp.switchToGameUi(); } vueApp.playSound('./sound/ui/ui_popupclose.mp3'); }, onItemTypeChanged: function (itemType) { this.switchItemType(itemType); }, switchItemType: function (itemType) { if (itemType !== this.equip.selectedItemType) { if (itemType === ItemType.Primary || itemType === ItemType.Secondary) { this.equip.showingWeaponType = itemType; } this.poseEquippedItems(); this.populateItemGridWithType(itemType); if (this.equip.mode === this.equip.equipModes.inventory) { this.selectEquippedItemForType(); } else { this.selectFirstItemInShop(); } } if (!this.isInShop) { this.hideItemForSale(); this.hideItemForSpecial(); } vueApp.playSound('./sound/ui/ui_click.mp3'); }, onTaggedItemsClicked: function () { this.showTaggedItems(this.equip.specialItemsTag); this.selectFirstItemInShop(); vueApp.playSound('./sound/ui/ui_click.mp3'); }, showTaggedItems: function (tag) { this.equip.selectedItemType = 'tagged'; if (this.equip.mode === this.equip.equipModes.inventory &amp;amp;&amp;amp; !this.ownsTaggedItems(this.equip.specialItemsTag)) { this.equip.mode = this.equip.equipModes.shop; } this.populateItemGridWithTagged(tag); }, showSelectedTagItems(tag) { this.equip.selectedItemType = 'tagged'; if (this.equip.mode === this.equip.equipModes.inventory) { this.equip.mode = this.equip.equipModes.shop; } this.populateItemGridWithTagged(tag); }, switchToInventory: function () { if (this.equip.selectedItemType === 'tagged' &amp;amp;&amp;amp; this.equip.mode === this.equip.equipModes.shop) { if (!this.ownsTaggedItems(this.equip.specialItemsTag)) { this.switchItemType(ItemType.Primary); } } this.equip.mode = this.equip.equipModes.inventory; this.hideItemForSale(); this.hideItemForSpecial(); this.poseEquippedItems(); this.showItemsAfterEquipModeSwitch(); this.selectEquippedItemForType(); vueApp.playSound('./sound/ui/ui_toggletab.mp3'); ga('send', 'event', this.googleAnalytics.cat.inventory, this.googleAnalytics.action.inventoryTabClick); }, ownsTaggedItems: function (tag) { return extern.getTaggedItems(tag).filter(i =&amp;gt; { return extern.isItemOwned(i); }).length &amp;gt; 0; }, selectFirstItemInShop: function () { if (this.isInShop &amp;amp;&amp;amp; this.equip.showingItems.length &amp;gt; 0) { this.selectItem(this.equip.showingItems[0]); } }, switchToShop: function () { if (!this.accountSettled) { return; } this.equip.mode = this.equip.equipModes.shop; this.showItemsAfterEquipModeSwitch(); this.selectFirstItemInShop(); vueApp.conditionalAnonWarningCall(); vueApp.playSound('./sound/ui/ui_toggletab.mp3'); ga('send', 'event', this.googleAnalytics.cat.itemShop, this.googleAnalytics.action.shopClick); }, showItemsAfterEquipModeSwitch: function () { if (this.equip.selectedItemType !== 'tagged') { this.populateItemGridWithType(this.equip.selectedItemType); } else { this.showTaggedItems(this.equip.specialItemsTag) } }, onEquippedTypeSelected: function (itemType) { this.equip.selectedItemType = itemType; if (this.equip.selectedItemType === ItemType.Primary || this.equip.selectedItemType === ItemType.Secondary) { this.equip.showingWeaponType = itemType; } this.switchToInventory(); }, onChangedClass: function () { this.hideItemForSale(); this.hideItemForSpecial(); this.updateEquippedItems(); this.poseEquippedItems(); this.populateItemGridWithType(this.equip.selectedItemType); }, autoSelectItem: function (item) { if (extern.isItemOwned(item)) { this.switchToInventory(); } else { this.switchToShop(); } this.switchItemType(item.item_type_id); this.selectItem(item); }, onItemSelected: function (item) { let isItemInShop = this.isInShop ? this.googleAnalytics.action.shopItemClick : this.googleAnalytics.action.inventorySelected; ga('send', 'event', this.googleAnalytics.cat.inventory, isItemInShop, item.name); this.selectItem(item); }, selectItem: function (item) { var selectingSame = hasValue(this.equip.selectedItem) &amp;amp;&amp;amp; this.equip.selectedItem.id === item.id; var selectedId = selectingSame ? this.equip.selectedItem.id : null; var isWeapon = (item.item_type_id === ItemType.Primary || item.item_type_id === ItemType.Secondary); vueApp.playSound('./sound/ui/ui_click.mp3'); if (selectingSame) { if (this.isInShop) { // Revert to equipped weapon item = this.$options[this.equip.selectedItem.item_type_id]; } else { // Take off hat or stamp if (!isWeapon) { item = null; extern.removeItemType(this.equip.selectedItem.item_type_id); } } } // Take off any items being tried on this.poseEquippedItems(); this.equip.selectedItem = item; extern.tryEquipItem(item); this.updateEquippedItems(); if (hasValue(item)) { this.poseWithItem(item); if (this.isInShop) { switch (item.unlock) { case "physical": console.log('purchasing physical item'); if ( !selectingSame ) { this.offerItemForSpecial(item) this.hideItemForSale(); } else { this.hideItemForSpecial(); } // this.$refs.physicalUnlockPopup.toggle(); break; case "purchase": if (!selectingSame) { this.offerItemForSale(item); this.hideItemForSpecial(); } else { this.hideItemForSale(); } break; } } } else { this.poseEquippedItems(); this.hideItemForSale(); this.hideItemForSpecial(); } }, poseWithItem: function (item) { switch (item.item_type_id) { case ItemType.Hat: this.posingHat = item; break; case ItemType.Stamp: this.posingStamp = item; break; case ItemType.Primary: case ItemType.Secondary: this.posingWeapon = item; break; } this.workItBaby(); }, getButtonToggleClass: function (equipMode) { return (equipMode === this.equip.mode) ? 'btn_toggleon' : 'btn_toggleoff'; }, offerItemForSpecial: function(item) { return this.equip.physicalUnlockPopup.item = item; }, hideItemForSpecial: function() { this.equip.physicalUnlockPopup.item = null; }, offerItemForSale: function (item) { this.equip.buyingItem = item; }, hideItemForSale: function () { this.equip.buyingItem = null; // this.equip.physicalUnlockPopup.item = null }, onBuyItemClicked: function () { // If item is buying item show buyItemPopup or show physicalUnlockPopup this.equip.buyingItem ? this.$refs.buyItemPopup.toggle() : this.$refs.physicalUnlockPopup.toggle(); this.equip.buyingItem ? extern.renderItemToCanvas(this.equip.buyingItem, this.$refs.buyItemCanvas) : null; hasValue(this.equip.buyingItem) &amp;amp;&amp;amp; ga('send', 'event', this.googleAnalytics.cat.itemShop, this.googleAnalytics.action.shopItemPopupClick, this.equip.buyingItem.name); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, onBuyItemConfirm: function () { extern.api_buy(this.equip.buyingItem, this.boughtItemSuccess, this.boughtItemFailed); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); }, boughtItemSuccess: function () { this.equip.selectedItem = this.equip.buyingItem; ga('send', 'event', { eventCategory: this.googleAnalytics.cat.itemShop, eventAction: this.googleAnalytics.action.shopItemPopupBuy, eventLabel: this.equip.buyingItem.name, eventValue: this.equip.selectedItem.price }); var itemType = this.equip.selectedItem.item_type_id; if (itemType === ItemType.Primary || itemType === ItemType.Secondary) { this.equip.showingWeaponType = itemType; } this.hideItemForSale(); this.setup(this.equip.selectedItemType); this.updateEquippedItems(); this.poseEquippedItems(); this.selectEquippedItemForType(); }, boughtItemFailed: function () { vueApp.showGenericPopup('p_buy_error_title', 'p_buy_error_content', 'ok'); vueApp.playSound('./sound/ui/ui_reset.mp3'); }, onRedeemClick: function () { this.$refs.redeemCodePopup.code = ''; this.$refs.redeemCodePopup.toggle(); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); ga('send', 'event', { eventCategory: this.googleAnalytics.cat.redeem, eventAction: this.googleAnalytics.action.redeemClick }); }, onRedeemCodeConfirm: function () { extern.api_redeem(this.equip.redeemCodePopup.code, this.redeemCodeSuccess, this.redeemCodeFailed); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); }, redeemCodeSuccess: function (eggs, items) { this.populateItemGridWithType(this.equip.selectedItemType); this.giveStuffPopup.eggs = eggs; this.giveStuffPopup.items = items; vueApp.showGiveStuffPopup('p_give_stuff_title', eggs, items); let itemString = ''; this.giveStuffPopup.items.forEach(item =&amp;gt; itemString += item.name); ga('send', 'event', { eventCategory: this.googleAnalytics.cat.redeem, eventAction: this.googleAnalytics.action.redeemed, eventLabel: `${itemString ? itemString : ''} ${this.giveStuffPopup.eggs ? this.giveStuffPopup.eggs + 'eggs' : ''}` }); }, redeemCodeFailed: function () { vueApp.showGenericPopup('p_redeem_error_title', 'p_redeem_error_content', 'ok'); vueApp.playSound('./sound/ui/ui_reset.mp3'); }, onPhysicalUnlockConfirm: function () { window.open(this.equip.physicalUnlockPopup.item.item_data.physicalItemStoreURL, '_blank'); }, onColorChanged: function (colorIdx) { this.equip.colorIdx = colorIdx; extern.setShellColor(this.equip.colorIdx); vueApp.playSound('./sound/ui/ui_onchange.mp3'); }, onSwitchToShopClicked: function () { this.switchToShop(); } }, computed: { isInShop: function () { return (this.equip.mode === this.equip.equipModes.shop); }, getGridClass: function () { return this.isInShop ? '' : 'equip_grid_short'; } } }; &amp;lt;/script&amp;gt;&amp;lt;script id="game-screen-template" type="text/x-template"&amp;gt; &amp;lt;div&amp;gt; &amp;lt;account-panel id="game_account_panel" ref="accountPanel" :loc="loc" :eggs="eggs" :show-bottom="false" :show-corner-buttons="ui.showCornerButtons" :ui="ui"&amp;gt;&amp;lt;/account-panel&amp;gt; &amp;lt;div id="chickenBadge" ref="chickenBadge" &amp;gt;&amp;lt;img src="img/ico_chickenBadge.png"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;!-- Reticle --&amp;gt; &amp;lt;div id="reticleContainer"&amp;gt; &amp;lt;div id="crosshairContainer"&amp;gt; &amp;lt;div id="crosshair0" &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div id="crosshair1" &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div id="crosshair2" &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div id="crosshair3" &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="shotReticleContainer"&amp;gt; &amp;lt;div &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="readyBrackets"&amp;gt; &amp;lt;div &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Scope --&amp;gt; &amp;lt;div id="scopeBorder"&amp;gt; &amp;lt;div id="maskleft"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div id="maskmiddle"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div id="maskright"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Best Streak --&amp;gt; &amp;lt;div id="best_streak_container"&amp;gt; &amp;lt;!--&amp;lt;h3&amp;gt;{{ loc.ui_game_beststreak }}&amp;lt;/h3&amp;gt;--&amp;gt; &amp;lt;h1 id="bestStreak"&amp;gt;x0&amp;lt;/h1&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Team Scores --&amp;gt; &amp;lt;div id="teamScores"&amp;gt; &amp;lt;div id="teamScore2" &amp;gt; &amp;lt;div id="teamScoreNum2" &amp;gt;0&amp;lt;/div&amp;gt; &amp;lt;div  &amp;gt;R&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="teamScore1" &amp;gt; &amp;lt;div id="teamScoreNum1" &amp;gt;0&amp;lt;/div&amp;gt; &amp;lt;div  &amp;gt;B&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!--&amp;lt;div&amp;gt; &amp;lt;img src="img/spatulaIcon.png" &amp;gt; &amp;lt;/div&amp;gt;--&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Weapon --&amp;gt; &amp;lt;div id="weaponBox"&amp;gt; &amp;lt;div id="grenades"&amp;gt; &amp;lt;img id="grenade3"  src="img/ico_grenadeEmpty.png?v=1"/&amp;gt; &amp;lt;img id="grenade2"  src="img/ico_grenadeEmpty.png?v=1"/&amp;gt; &amp;lt;img id="grenade1"  src="img/ico_grenadeEmpty.png?v=1"/&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;h2 id="weaponName"&amp;gt;&amp;lt;/h2&amp;gt; &amp;lt;h2 id="ammo" &amp;gt;&amp;lt;/h2&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Health --&amp;gt; &amp;lt;div id="health"&amp;gt; &amp;lt;svg &amp;gt; &amp;lt;circle id="healthBar"  cx="50%" cy="50%" r="2.15em" /&amp;gt; &amp;lt;circle  cx="50%" cy="50%" r="1.35em" /&amp;gt; &amp;lt;/svg&amp;gt; &amp;lt;div id="healthHp"&amp;gt;100&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Spatula --&amp;gt; &amp;lt;img id="spatulaPlayer" src="img/spatulaIcon.png" /&amp;gt; &amp;lt;!-- Grenade throw power --&amp;gt; &amp;lt;div id="grenadeThrowContainer"&amp;gt; &amp;lt;div id="grenadeThrow"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Kill --&amp;gt; &amp;lt;div id="killBox" &amp;gt; &amp;lt;h3&amp;gt;{{ loc.ui_game_youkilled }}&amp;lt;/h3&amp;gt; &amp;lt;h2 id="KILLED_NAME"&amp;gt;&amp;lt;/h2&amp;gt; &amp;lt;h3 id="KILL_STREAK"&amp;gt;&amp;lt;/h3&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Death --&amp;gt; &amp;lt;div id="deathBox"&amp;gt; &amp;lt;h3&amp;gt;{{ loc.ui_game_killedby }}&amp;lt;/h3&amp;gt; &amp;lt;h2 id="KILLED_BY_NAME"&amp;gt;&amp;lt;/h2&amp;gt; &amp;lt;h3 id="respawnMessage"&amp;gt;&amp;lt;/h3&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Game messages --&amp;gt; &amp;lt;div id="gameMessage"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;!-- Chat --&amp;gt; &amp;lt;div id="chatOut" &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;input id="chatIn"  maxlength=64 tabindex=-1 v-bind:placeholder="loc.ingame_press_tab_to_exit" onkeydown="extern.onChatKeyDown(event)"&amp;gt;&amp;lt;/input&amp;gt; &amp;lt;!-- Kill ticker --&amp;gt; &amp;lt;div id="killTicker" &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;!-- Spectator controls --&amp;gt; &amp;lt;div id="spectate"&amp;gt; {{ loc.ui_game_spectating }} &amp;lt;/div&amp;gt; &amp;lt;div id="serverAndMapInfo" &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;!-- Ingame UI Stuff --&amp;gt; &amp;lt;div id="inGameUI"&amp;gt; &amp;lt;div id="readouts" &amp;gt; {{ loc.ui_game_fps }}: &amp;lt;div id="FPS"&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;br&amp;gt; {{ loc.ui_game_ping }}: &amp;lt;div id="ping"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Corner icon buttons --&amp;gt; &amp;lt;!-- &amp;lt;div id="corner" &amp;gt; &amp;lt;div id="currentBalanceContainer" &amp;gt; &amp;lt;span id="currentBalance" &amp;gt;&amp;lt;/span&amp;gt; boopdiddyboop&amp;lt;img src="img/egg_icon.png"  /&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="cornerButtons" &amp;gt; &amp;lt;-&amp;lt;img id="homeButton"  title="Home"  src="img/home.png?v=1" onclick="extern.showMainMenuConfirm()" /&amp;gt; &amp;lt;img id="friendsButton"  title="Invite friends"  src="img/friends.png?v=1" onclick="extern.inviteFriends()" /&amp;gt; &amp;lt;img  title="Feedback"  src="img/feedback.png?v=1" onclick="extern.showFeedbackForm()" /&amp;gt; &amp;lt;img  title="Settings"  src="img/settings.png?v=1" onclick="extern.openSettingsMenu()" /&amp;gt; &amp;lt;img  title="Toggle fullscreen" src="img/fullScreen.png?v=1" onclick="extern.toggleFullscreen()" /&amp;gt; -&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; --&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- Popup: Mute/Boot Player --&amp;gt; &amp;lt;small-popup id="playerActionsPopup" ref="playerActionsPopup" @popup-cancel="onPlayerActionsCancel" @popup-closed="onPlayerActionsCancel" :hide-confirm="true"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ playerActionsPopup.playerName }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;p&amp;gt;{{ loc.ui_game_playeractions_header }}&amp;lt;/p&amp;gt; &amp;lt;h4  v-on:click="onMuteClicked"&amp;gt;{{ muteButtonLabel }}&amp;lt;/h4&amp;gt; &amp;lt;h4  v-if="playerActionsPopup.isGameOwner" v-on:click="onBootClicked"&amp;gt;{{ loc.ui_game_playeractions_boot }}&amp;lt;/h4&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.cancel }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Switch Team --&amp;gt; &amp;lt;small-popup id="switchTeamPopup" ref="switchTeamPopup" @popup-cancel="onSwitchTeamCancel" :overlay-close="false" @popup-closed="onSwitchTeamCancel" @popup-confirm="onSwitchTeamConfirm"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.p_switch_team_title }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;h4  :&amp;gt;{{ newTeamName }} &amp;lt;i &amp;gt;&amp;lt;/i&amp;gt;&amp;lt;/h4&amp;gt; &amp;lt;p&amp;gt;{{ loc.p_switch_team_text }}&amp;lt;/p&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.no }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.yes }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Share Link --&amp;gt; &amp;lt;small-popup id="shareLinkPopup" ref="shareLinkPopup" :popup-model="game.shareLinkPopup" @popup-confirm="onShareLinkConfirm" @popup-closed="onShareLinkClosed"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.p_sharelink_title }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;p&amp;gt;{{ loc.p_sharelink_text }}&amp;lt;/p&amp;gt; &amp;lt;p&amp;gt;&amp;lt;input ref="shareLinkUrl" type="text"  v-model="game.shareLinkPopup.url" @focus="$event.target.select()"&amp;gt;&amp;lt;/p&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.close }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.p_sharelink_copylink }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;!-- Popup: Leave Game Confirm --&amp;gt; &amp;lt;small-popup id="leaveGameConfirmPopup" ref="leaveGameConfirmPopup" :overlay-close="false" :hide-close="true" @popup-confirm="onLeaveGameConfirm" @popup-cancel="onLeaveGameCancel"&amp;gt; &amp;lt;template slot="header"&amp;gt;{{ loc.leave_game_title }}&amp;lt;/template&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;p&amp;gt;{{ loc.leave_game_text }}&amp;lt;/p&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;template slot="cancel"&amp;gt;{{ loc.no }}&amp;lt;/template&amp;gt; &amp;lt;template slot="confirm"&amp;gt;{{ loc.yes }}&amp;lt;/template&amp;gt; &amp;lt;/small-popup&amp;gt; &amp;lt;div &amp;gt; &amp;lt;!-- Player List --&amp;gt; &amp;lt;div id="playerSlot"  &amp;gt; &amp;lt;div &amp;gt; &amp;lt;span&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;!-- Name --&amp;gt; &amp;lt;span &amp;gt;&amp;lt;/span&amp;gt; &amp;lt;!-- Score --&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt;&amp;lt;/div&amp;gt; &amp;lt;!-- Icons --&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="playerList"&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- end .player__container --&amp;gt; &amp;lt;div id="inGameScaler"&amp;gt; &amp;lt;div &amp;gt; &amp;lt;!-- Popup: Pause --&amp;gt; &amp;lt;large-popup id="pausePopup" ref="pausePopup" hide-close="true" :overlay-close="false" :overlay-&amp;gt; &amp;lt;template slot="content"&amp;gt; &amp;lt;div id="pausePopupInnards" &amp;gt; &amp;lt;div id="pauseButtons"&amp;gt; &amp;lt;button @click="onHomeClicked" &amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_home }}&amp;lt;/button&amp;gt; &amp;lt;button @click="onEquipClicked()" &amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_equipment }}&amp;lt;/button&amp;gt; &amp;lt;!-- Don't have leaderboards yet &amp;lt;button &amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_leaderboards }}&amp;lt;/button&amp;gt; --&amp;gt; &amp;lt;!-- &amp;lt;button &amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_shop }}&amp;lt;/button&amp;gt; --&amp;gt; &amp;lt;button @click="onHelpClicked" &amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_help }}&amp;lt;/button&amp;gt; &amp;lt;button @click="onShareLinkClicked" &amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_sharelink }}&amp;lt;/button&amp;gt; &amp;lt;button @click="onSettingsClicked" &amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_settings }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="popupTipDay" &amp;gt; &amp;lt;h3 v-if="!isPoki || !pokiRewardReady &amp;amp;&amp;amp; isPoki"&amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_tipoftheday }}&amp;lt;/h3&amp;gt; &amp;lt;p v-if="!isPoki || !pokiRewardReady &amp;amp;&amp;amp; isPoki"&amp;gt;{{ (loc.tip_ofthe_day ? loc.tip_ofthe_day[game.tipIdx] : '') }}&amp;lt;/p&amp;gt; &amp;lt;div v-if="isPoki &amp;amp;&amp;amp; pokiRewardReady" &amp;gt; &amp;lt;button  @click="earnInGameReward"&amp;gt;&amp;lt;img src="img/ico_goldenEgg.png" &amp;gt;Watch Video for 100 Golden Eggs!&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div id="btn_horizontal" &amp;gt; &amp;lt;div v-if="delayTheCracking" &amp;gt; &amp;lt;button v-show="isTeamGame" @click="onSwitchTeamClicked"  :&amp;gt;{{ teamName }} &amp;lt;i &amp;gt;&amp;lt;/i&amp;gt;&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div &amp;gt; &amp;lt;button v-if="delayTheCracking" @click="onSpectateClicked()"  v-show="!isRespawning"&amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_spectate }}&amp;lt;/button&amp;gt; &amp;lt;button v-if="delayTheCracking" @click="onPlayClicked()"  v-show="!isRespawning"&amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_play }}&amp;lt;/button&amp;gt; &amp;lt;div v-if="!delayTheCracking &amp;amp;&amp;amp; !isRespawning" &amp;gt; &amp;lt;h3&amp;gt;{{loc.ui_game_get_ready}}&amp;lt;/h3&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- &amp;lt;button @click="onSpectateClicked()"  v-show="!isRespawning"&amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_spectate }}&amp;lt;/button&amp;gt; &amp;lt;button @click="onPlayClicked()"  v-show="!isRespawning"&amp;gt;&amp;lt;i &amp;gt;&amp;lt;/i&amp;gt; {{ loc.p_pause_play }}&amp;lt;/button&amp;gt; --&amp;gt; &amp;lt;button  v-show="isRespawning"&amp;gt;{{ game.respawnTime }}&amp;lt;/button&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/template&amp;gt; &amp;lt;/large-popup&amp;gt; &amp;lt;!-- &amp;lt;div id="pauseAdPlacement" ref="pauseAdPlacement"&amp;gt;&amp;lt;/div&amp;gt; --&amp;gt; &amp;lt;display-ad id="div-gpt-ad-ShellShock_Respawn_Banner" ref="respawnDisplayAd"  :call="displayAdFunction" pokiAdSize="728x90"&amp;gt;&amp;lt;/display-ad&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- .pause-popup--container --&amp;gt; &amp;lt;!-- &amp;lt;div id="testbaby"&amp;gt;&amp;lt;/div&amp;gt; --&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;!-- end #inGameScaler --&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; var comp_game_screen = { template: '#game-screen-template', components: { 'account-panel': comp_account_panel, }, data: function () { return vueData; }, created: function () { // window.addEventListener('resize', this.resizeBannerAdTagForGame); this.isPoki = ! extern.pokiInitialized() ? extern.pokiInitialized() : extern.isPokiSDK(); this.displayAdFunction = typeof(loadAscAdDisplay) === 'function' ? loadAscAdDisplay : Function; }, destroyed: function () { // window.removeEventListener('resize', this.resizeBannerAdTagForGame); }, methods: { placeBannerAdTagForGame: function (tagEl) { this.$refs.pauseAdPlacement.appendChild(tagEl); }, showGameMenu: function () { this.game.tipIdx = this.loc.tip_ofthe_day ? Math.randomInt(0, this.loc.tip_ofthe_day.length) : 0; this.game.gameType = extern.gameType; this.$refs.pausePopup.show(); // this.$refs.respawnDisplayAd.show(); vueData.ui.showCornerButtons = true; let html = document.getElementsByTagName("html")[0]; html.classList.add('noScrollIngame'); // setTimeout(() =&amp;gt; this.resizeBannerAdTagForGame(), 1); }, delayGameMenuPlayButtons() { setTimeout(() =&amp;gt; { this.delayTheCracking = true; }, 3000); }, hideGameMenu: function () { this.$refs.pausePopup.hide(); this.$refs.respawnDisplayAd.hide(); }, onHomeClicked: function () { this.hideGameMenu(); this.$refs.leaveGameConfirmPopup.show(); vueApp.playSound('./sound/ui/ui_click.mp3'); }, onLeaveGameConfirm: function () { this.leaveGame(); this.delayTheCracking = false; }, onLeaveGameCancel: function () { this.showGameMenu(); }, leaveGame: function () { // clientGame.js manipulates chickenBadge element directly to hide/show it this.$refs.chickenBadge.style.display = 'none'; vueApp.showSpinner(); document.body.style.overflow = 'visible'; window.scrollY = 0; this.hidePopupsIfGameCloses(); extern.leaveGame(this.afterLeftGame); vueData.ui.showCornerButtons = true; // OneSignal elements are not part of the Vue app var oneSignalBell = document.getElementById('onesignal-bell-container'); if (oneSignalBell) { oneSignalBell.style.display = 'inline-block'; } }, hidePopupsIfGameCloses: function() { const gamePopups = vueApp.$refs.gameScreen.$children; if (Array.isArray(gamePopups)) { gamePopups.forEach( gamePopup =&amp;gt; {; if ( gamePopup.isShowing === true &amp;amp;&amp;amp; gamePopup.$el.id !== 'pausePopup' ) { gamePopup.close(); console.log(`Closing ${gamePopup.$el.id}`); } }); } }, afterLeftGame: function () { vueApp.hideSpinner(); vueApp.switchToHomeUi(); }, onHelpClicked: function () { this.hideGameMenu(); vueApp.showHelpPopup(); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, onShareLinkClicked: function () { extern.inviteFriends(); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, onSettingsClicked: function () { this.hideGameMenu(); vueApp.showSettingsPopup(); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); }, onShareLinkConfirm: function () { extern.copyFriendCode(this.$refs.shareLinkUrl); }, onShareLinkClosed: function () { this.showGameMenu(); // setTimeout(() =&amp;gt; { // vueApp.showRespawnDisplayAd(); // }, 1000); }, onEquipClicked: function () { this.hideGameMenu(); extern.openEquipInGame(); vueApp.switchToEquipUi(); vueApp.playSound('./sound/ui/ui_equip.mp3'); }, onSwitchTeamClicked: function () { this.hideGameMenu(); vueApp.playSound('./sound/ui/ui_popupopen.mp3'); this.$refs.switchTeamPopup.show(); }, onSwitchTeamCancel: function () { this.showGameMenu(); }, onSwitchTeamConfirm: function () { extern.switchTeam(); this.showGameMenu(); }, onPlayClicked: function () { this.hideGameMenu(); vueData.ui.showCornerButtons = false; extern.respawn(); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); }, onSpectateClicked: function () { this.hideGameMenu(); vueData.ui.showCornerButtons = false; extern.enterSpectatorMode(); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); }, showPlayerActionsPopup: function () { this.hideGameMenu(); this.$refs.playerActionsPopup.show(); }, onPlayerActionsCancel: function () { this.showGameMenu(); }, onMuteClicked: function () { this.$refs.playerActionsPopup.hide(); this.playerActionsPopup.muteFunc(); }, onBootClicked: function () { this.$refs.playerActionsPopup.hide(); this.playerActionsPopup.bootFunc(); }, resizeBannerAdTagForGame: function() { const pauseAdPlacement = document.getElementById('pauseAdPlacement'); const rect = document.getElementById('pausePopup').getBoundingClientRect(); pauseAdPlacement.style.top = (rect.height).toString() + 'px'; // if (rect.width &amp;lt; 970) { // pauseAdPlacement.style.transform = ' scale(' + (rect.width / 970) + ') translateX(-50%)'; // } else { // pauseAdPlacement.style.transform = ' scale(1) translateX(-50%)'; // } }, earnInGameReward() { this.hideGameMenu(); vueApp.setDarkOverlay(true); this.pokiRewardReady = false; this.isPokiNewRewardTimer = false; extern.api_inGameReward(this.inGameRewardSuccessCallback, this.inGameRewardFailedCallback, this.rewardReachedDailyLimits); }, inGameRewardSuccessCallback() { extern.pokiRewardedBreak(this.inGameRewardIsGranted, this.inGameRewardFailedCallback); }, inGameRewardIsGranted(rewardValue) { console.log('inGameRewardSuccessCallback'); this.isPokiNewRewardTimer = true; vueApp.showGiveStuffPopup('reward_title', rewardValue, ''); }, inGameRewardFailedCallback() { vueApp.showGenericPopup('p_redeem_error_title', 'in_game_reward_try_again', 'ok'); this.isPokiNewRewardTimer = false; }, rewardReachedDailyLimits() { vueApp.showGenericPopup('in_game_reward_title', 'in_game_reward_try_again', 'ok'); this.isPokiNewRewardTimer = false; localStorage.setItem('inGameRewardLimitDate', Date.now()); }, pokiTimers(value, milliseconds) { let pokiSetTimer; if (value === false) { clearTimeout(pokiSetTimer); console.log('cancelTimer'); return; } pokiSetTimer = setTimeout(() =&amp;gt; this.pokiRewardReady = true, milliseconds); } }, computed: { isRespawning: function () { return this.game.respawnTime &amp;gt; 0; }, isTeamGame: function () { // Would be better to use the same enum as the client game code return this.game.gameType !== 0; }, teamColorCss: function () { return this.game.team === this.ui.team.blue ? 'blueTeam btn_red bevel_red' : 'redTeam btn_blue bevel_blue'; }, teamName: function () { return this.game.team === this.ui.team.blue ? this.loc.p_pause_joinred : this.loc.p_pause_joinblue; }, newTeamColorCss: function () { return this.game.team === this.ui.team.blue ? 'redTeam btn_red' : 'blueTeam btn_blue'; }, newTeamName: function () { return this.game.team === this.ui.team.blue ? this.loc.team_red : this.loc.team_blue; }, muteButtonLabel: function () { return this.playerActionsPopup.muted ? this.loc.ui_game_playeractions_unmute : this.loc.ui_game_playeractions_mute; } }, watch: { isPokiGameLoad(value) { this.pokiTimers(value, this.videoRewardTimers.initial); }, isPokiNewRewardTimer(value) { this.pokiTimers(value, this.videoRewardTimers.primary); }, } }; &amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; function startVue(languageCode, locData) { vueData.extern = extern; vueData.loc = locData; vueApp = new Vue({ el: '#app', components: { 'dark-overlay': comp_dark_overlay, 'light-overlay': comp_light_overlay, 'spinner-overlay': comp_spinner_overlay, 'gdpr': comp_gdpr, 'settings': comp_settings, 'help': comp_help, 'egg-store': comp_egg_store, 'item': comp_item, 'home-screen': comp_home_screen, 'equip-screen': comp_equip_screen, 'game-screen': comp_game_screen, 'gold-chicken-popup': comp_gold_chicken_popup, 'chicken-nugget-popup': comp_chicken_nugget_popup, }, data: vueData, createdTime: null, mountedTime: null, fullyRenderedTime: null, multisizeAdTag: null, created () { console.log('Vue instance created'); createdTime = performance.now(); this.currentLanguageCode = languageCode; this.urlParams = parsedUrl.query.open ? parsedUrl.query.open : null; }, mounted () { console.log('Vue instance mounted'); mountedTime = performance.now(); console.log('create -&amp;gt; mount time (ms): ' + (mountedTime - createdTime)); this.currentGameType = extern.gameType; this.$options.multisizeAdTag = document.getElementById('div-gpt-ad-ShellShock_Respawn_Banner'); this.$options.nuggetParentForAdTag = document.getElementById('chickenNuggetAdContainer'); this.$options.gameLoadingAdTag = document.getElementById('div-gpt-ad-ShellShock_LoadingScreen'); // Cannot modify data within the mounted hook, so wait until next tick this.$nextTick(function () { fullyRenderedTime = performance.now(); console.log('mounted -&amp;gt; fully rendered time (ms): ' + (fullyRenderedTime - mountedTime)); console.log('created -&amp;gt; fully rendered time (ms): ' + (fullyRenderedTime - createdTime)); this.ready = true; this.showSpinner('ui_game_loading', 'ui_game_waitforit'); //this.playMusic(); extern.continueStartup(); }); }, methods: { getCanvas: function () { return this.$refs.canvas; }, playMusic: function () { myAudio = new Audio('./sound/theme.mp3'); // Uncomment for looping. // myAudio.addEventListener('ended', function() { // this.currentTime = 0; // this.play(); // }, false); myAudio.volume = this.volume; myAudio.play(); }, playSound: function (sound) { if(sound) { var audio = new Audio(sound); audio.volume = this.volume; audio.play(); } }, changeLanguage: function (languageCode) { extern.getLanguageData(languageCode, this.setLocData); }, setLocData: function (languageCode, newLocData) { this.currentLanguageCode = getStoredString('languageSelected', null) ? localStorage.getItem('languageSelected') : languageCode; this.loc = newLocData; }, setPlayerName: function (playerName) { this.playerName = playerName; }, showSpinner: function (headerLocKey, footerLocKey) { this.$refs.spinnerOverlay.show(headerLocKey, footerLocKey); }, showSpinnerLoadProgress: function (percent) { this.$refs.spinnerOverlay.showSpinnerLoadProgress(percent); }, hideSpinner: function () { this.$refs.spinnerOverlay.hide(); }, onSettingsPopupOpened: function () { this.$refs.settings.captureOriginalSettings(); }, onSettingsX: function () { this.$refs.settings.applyOriginalSettings(); this.$refs.settings.cancelLanguageSelect(); }, onNoAnonPopupConfirm: function () { ga('send', 'event', this.googleAnalytics.cat.playerStats, this.googleAnalytics.action.denyAnonUserPopup, this.googleAnalytics.label.signInClick); this.showFirebaseSignIn(); }, onSharedPopupClosed: function () { // If in-game, show game menu after closing the popup //this.playSound('./sound/ui/ui_popupclose.mp3'); if (this.ui.showScreen === this.ui.screens.game &amp;amp;&amp;amp; extern.inGame) { this.showGameMenu(); } }, onGiveStuffComplete: function () { this.$refs.giveStuffPopup.toggle(); }, onPrivacyOptionsOpened: function () { this.showPrivacyPopup(); }, /** * Creates a generic popup that passes content 3 data options to slots on the genericPopup smallPopup * @param titleLockKey mixed - popup header text * @param contentLocKey mixed- popup content * @param confirmLocKey mixed - popup button text */ showGenericPopup: function (titleLocKey, contentLocKey, confirmLocKey, hideBackgroundPopup) { this.genericMessagePopup.titleLocKey = titleLocKey; this.genericMessagePopup.contentLocKey = contentLocKey; this.genericMessagePopup.confirmLocKey = confirmLocKey; this.hidePausePopupIfGenericPopupOpen(); this.$refs.genericPopup.show(); // vueApp.setDarkOverlay(); }, hidePausePopupIfGenericPopupOpen: function() { if (!this.$refs.gameScreen.$refs.pausePopup &amp;amp;&amp;amp; $refs.gameScreen.$refs.pausePopup.isShowing === false) { return; } return this.$refs.gameScreen.$refs.pausePopup.hide(); }, showOpenUrlPopup: function (url, titleLocKey, content, confirmLocKey, cancelLocKey) { console.log('title: ' + this.loc[titleLocKey]); console.log('confirm: ' + this.loc[confirmLocKey]); console.log('cancel: ' + this.loc[cancelLocKey]); this.openUrlPopup.url = url; this.openUrlPopup.titleLocKey = titleLocKey; this.openUrlPopup.content = content; this.openUrlPopup.confirmLocKey = confirmLocKey; this.openUrlPopup.cancelLocKey = cancelLocKey; this.$refs.openUrlPopup.show(); }, onOpenUrlPopupConfirm: function () { extern.openUrlAndGiveReward(); }, showUnsupportedPlatformPopup: function (contentLocKey) { this.ui.showScreen = -1; this.unsupportedPlatformPopup.contentLocKey = contentLocKey; this.$refs.unsupportedPlatformPopup.show(); }, showMissingFeaturesPopup: function () { this.ui.showScreen = -1; this.$refs.missingFeaturesPopup.show(); }, showFirebaseSignIn: function () { this.$refs.homeScreen.showSignIn(); }, hideFirebaseSignIn: function () { this.$refs.firebaseSignInPopup.hide(); }, showCheckEmail: function () { this.$refs.homeScreen.$refs.checkEmailPopup.show(); }, hideCheckEmail: function () { this.$refs.homeScreen.$refs.checkEmailPopup.hide(); }, showResendEmail: function () { this.$refs.homeScreen.$refs.resendEmailPopup.show(); }, hideResendEmail: function () { this.$refs.homeScreen.$refs.resendEmailPopup.hide(); }, showChickenPopup: function () { this.$refs.goldChickenPopup.show(); }, hideChickenPopup: function () { this.$refs.goldChickenPopup.hide(); }, showHelpPopup: function () { this.hideGameMenu(); this.$refs.helpPopup.show(); }, showAttentionPopup: function () { this.hideGameMenu(); this.$refs.anonWarningPopup.show(); }, hideHelpPopup: function () { this.$refs.helpPopup.hide(); }, showSettingsPopup: function () { this.hideGameMenu(); this.$refs.settingsPopup.show(); extern.settingsMenuOpened(); }, hideSettingsPopup: function () { this.$refs.settingsPopup.hide(); }, showEggStorePopup: function () { this.$nextTick(() =&amp;gt; { this.hideGameMenu(); this.$refs.eggStorePopup.show(); ga('send', 'event', this.googleAnalytics.cat.itemShop, this.googleAnalytics.action.shopItemNeedMoreEggsPopup, this.googleAnalytics.label.getMoreEggs); }); }, hideEggStorePopup: function () { this.$refs.eggStorePopup.hide(); }, showChangelogPopup: function () { this.$refs.changelogPopup.show(); }, hideChangelogPopup: function () { //this.playSound('./sound/ui/ui_popupclose.mp3'); this.$refs.changelogPopup.hide(); }, showGiveStuffPopup: function (titleLoc, eggs, items) { this.giveStuffPopup.titleLoc = titleLoc; this.giveStuffPopup.eggs = eggs; this.giveStuffPopup.items = items; this.$refs.giveStuffPopup.show(); }, showShareLinkPopup: function (url) { this.hideGameMenu(); this.game.shareLinkPopup.url = url; this.$refs.gameScreen.$refs.shareLinkPopup.show(); }, showJoinPrivateGamePopup: function (code) { this.$refs.homeScreen.$refs.playPanel.showJoinPrivateGamePopup(code); }, switchToHomeUi: function () { this.ui.showScreen = this.ui.screens.home; vueApp.showTitleScreenAd(); // Commented out because I am not sure why the golden nugget keeps stealing the display ads // this.placeBannerAdTagForNugget(vueApp.$options.multisizeAdTag); }, switchToEquipUi: function () { console.log('switchToEquipUi called'); this.$refs.equipScreen.setup(); this.$refs.equipScreen.switchToInventory(); this.ui.showScreen = this.ui.screens.equip; vueApp.hideTitleScreenAd(); }, switchToGameUi: function (isGameOwner) { this.ui.showScreen = this.ui.screens.game; this.game.isGameOwner = isGameOwner; vueApp.hideTitleScreenAd(); // The ad tags are outside of the Vue app; manipulate the DOM directly // this.$refs.gameScreen.placeBannerAdTagForGame(vueApp.$options.multisizeAdTag); this.showGameMenu(); }, showGameMenu: function () { this.hideSpinner(); this.$refs.gameScreen.showGameMenu(); }, hideGameMenu: function () { this.$refs.gameScreen.hideGameMenu(); }, onMiniGameCompleted: function () { this.$refs.homeScreen.onMiniGameCompleted(); }, setShellColor: function (colorIdx) { this.equip.colorIdx = colorIdx; }, setAccountUpgraded: function (upgraded) { this.isUpgraded = upgraded; this.equip.extraColorsLocked = !this.isUpgraded; }, setDarkOverlay: function (visible, overlayClass) { this.$refs.darkOverlay.show = visible; this.$refs.darkOverlay.overlayClass = overlayClass; }, setLightOverlay: function (visible, overlayClass) { this.$refs.lightOverlay.show = visible; this.$refs.darkOverlay.overlayClass = overlayClass; }, authCompleted: function () { this.accountSettled = true; if (vueApp.$refs.firebaseSignInPopup.isShowing) this.hideFirebaseSignIn(); }, showItemOnEquipScreen: function (item) { this.switchToEquipUi(); this.$refs.equipScreen.autoSelectItem(item); }, showTaggedItemsOnEquipScreen: function (tag) { this.switchToEquipUi(); this.$refs.equipScreen.showTaggedItems(tag); }, showSelectedTaggedItemsOnEquipScreen: function (tag) { this.switchToEquipUi(); this.$refs.equipScreen.showSelectedTagItems(tag); }, useHouseAdSmall: function (smallHouseAd) { this.ui.houseAds.small = smallHouseAd; }, useHouseAdBig: function (bigHouseAd) { this.ui.houseAds.big = bigHouseAd; }, denyAnonUser: function () { ga('send', 'event', vueApp.googleAnalytics.cat.playerStats, vueApp.googleAnalytics.action.denyAnonUserPopup); this.$refs.noAnonPopup.show(); }, showGdrpNotification: function () { this.$refs.gdpr.show(); }, showPrivacyPopup: function () { this.hideSettingsPopup(); this.$refs.privacyPopup.show(); }, hidePrivacyPopup: function () { this.$refs.privacyPopup.hide(); this.showSettingsPopup(); }, ofAgeChanged: function () { extern.setOfAge(this.isOfAge); this.playSound('./sound/ui/ui_onchange.mp3'); }, targetedAdsChanged: function () { extern.setTargetedAds(this.showTargetedAds); this.playSound('./sound/ui/ui_onchange.mp3'); }, setPrivacySettings: function (ofAge, targetedAds) { this.isOfAge = ofAge; this.showTargetedAds = targetedAds; }, gameJoined: function (gameType, team) { this.game.gameType = gameType; this.setTeam(team); }, setTeam: function (team) { if (hasValue(team)) { this.game.team = team; } }, showGoldChickenPopup: function () { this.$refs.goldChickenPopup.show(); }, hideGoldChickenPopup: function () { this.$refs.goldChickenPopup.hide(); }, showNuggetPopup: function () { this.$refs.nuggetPopup.show(); this.$refs.chickenNugget.loadMiniGame(); // Commenting it out because this only needs to be called once... // this.placeBannerAdTagForNugget(this.$options.multisizeAdTag); console.log('showNuggetPopup()'); }, hideNuggetPopup: function () { this.$refs.nuggetPopup.hide(); this.$refs.chickenNugget.unloadMiniGame(); console.log('Hide nugget'); }, loadNuggetVideo() { this.hideGameMenu(); extern.startChickenNugget(); this.playSound('./sound/ui/ui_playconfirm.mp3'); }, onMiniGameCompleted: function () { this.$refs.chickenNugget.onMiniGameCompleted(); }, placeBannerAdTagForNugget: function (tagEl) { this.$refs.chickenNugget.placeBannerAdTag(tagEl); }, useSpecialItemsTag: function (tag) { this.equip.specialItemsTag = tag; this.equip.showSpecialItems = true; }, disableSpecialItems: function () { this.equip.showSpecialItems = false; }, setUiSettings: function (settings) { this.$refs.settings.setSettings(settings); }, leaveGame: function () { this.$refs.gameScreen.leaveGame(); }, showPlayerActionsPopup: function (slot) { this.playerActionsPopup = slot; this.$refs.gameScreen.showPlayerActionsPopup(); }, onSignInCancelClicked: function () { vueApp.$refs.firebaseSignInPopup.hide(); vueApp.playSound('./sound/ui/ui_popupclose.mp3'); }, anonWarningPopupCancel: function() { let anonWarnConfrimed = localStorage.getItem('anonWarningConfirmed'); this.urlParamSet = this.urlParams ? true : null; this.shellShockUrlParamaterEvents(); ga('send', 'event', this.googleAnalytics.cat.playerStats, this.googleAnalytics.action.anonymousPopupOpenAuto, this.googleAnalytics.label.understood); return anonWarnConfrimed === null &amp;amp;&amp;amp; localStorage.setItem('anonWarningConfirmed', true); }, anonWarningPopupConfrim() { let anonWarnConfrimed = localStorage.getItem('anonWarningConfirmed'); anonWarnConfrimed === null &amp;amp;&amp;amp; localStorage.setItem('anonWarningConfirmed', true); ga('send', 'event', this.googleAnalytics.cat.playerStats, this.googleAnalytics.action.anonymousPopupOpenAuto, this.googleAnalytics.label.signInClick); extern.showSignInDialog(); this.urlParamSet = false; vueApp.$refs.firebaseSignInPopup.show(); }, conditionalAnonWarningCall: function() { let anonWarnConfrimed = localStorage.getItem('anonWarningConfirmed'); if ( ! hasValue(anonWarnConfrimed) &amp;amp;&amp;amp; this.isAnonymous) { vueApp.showAttentionPopup(); ga('send', 'event', this.googleAnalytics.cat.playerStats, this.googleAnalytics.action.anonymousPopupOpenAuto); } }, needMoreEggsPopupCall: function() { ga('send', 'event', this.googleAnalytics.cat.itemShop, this.googleAnalytics.action.shopItemNeedMoreEggsPopup); this.$refs.needMoreEggsPopup.show(); }, /** * Not 100 % certain this should live in vue but here it is. * Add the ability to use url paramaters to trigger events in the game. * e.g. shellshock.io/?open=eggStore&amp;amp;type=Hat&amp;amp;item=1111 will open the spiderman hat item. * Called in the extern closure under gameApp.js =&amp;gt; afterGameReady() */ shellShockUrlParamaterEvents() { // VUE next tick https://vuejs.org/v2/api/#Vue-nextTick this.$nextTick( ()=&amp;gt; { this.doSsUlrParams(); }); }, doSsUlrParams() { if ( ! this.urlParams) { return; } console.log(hasValue(this.isAnonymous)); if (hasValue(this.ui.houseAds.big)) { this.urlParamSet = false; return; } else if (this.isAnonymous &amp;amp;&amp;amp; ! hasValue(localStorage.getItem('anonWarningConfirmed'))) { this.urlParamSet = false; console.log('Almost there!'); this.conditionalAnonWarningCall(); return; } console.log('Passed Popup gate'); switch (this.urlParams) { case 'eggStore' : // Opens the purchase egg store popup this.showEggStorePopup(); break; case 'goldenChicken' : // Opens the golden chicken popup vueApp.$refs.goldChickenPopup.show(); break; case 'twoTimesTheEggs' : // Opens the chicken nugget video extern.startChickenNugget(); vueApp.playSound('./sound/ui/ui_playconfirm.mp3'); break; case 'itemShop' : // Opens shop // Some opions are /?open=itemShop // /?open=itemShop&amp;amp;type=Hat Opens hat store // /?open=itemShop&amp;amp;type=Hat&amp;amp;item=1111 opens hat store and then selects item // /?open=itemShop&amp;amp;type=Hat&amp;amp;item=1111&amp;amp;openBuyNow=1 -opens hat store, selects item and then opens items popup //?open=itemShop&amp;amp;type=Primary&amp;amp;gunthis.eggStoreUrlParams(); break; case 'redeem' : vueApp.switchToEquipUi(); this.$refs.equipScreen.$refs.redeemCodePopup.show(); break; case 'faq' : this.showHelpPopup(); break; case 'taggedItems' : this.openSpecialTagItemsTab(); break; default: null; }; }, // @param ITEMIDPARAM - number - Item id // @param TYPEPARAM - string - item type such as Hat // @param GUNCLASS - string - gun type such as Soldier // @param BUYNOWPOPUP - bool 1 or 0 will open item popup // @param ITEMTYPES - array - item types to verify against // @param GUNCLASSTYPES - array - gun classes to verify against // @param HASGUNTYPE - sting - returns true if class in GUNCLASSTYPES // @param HASITEMTYPE - string - returns true if item type in ITEMTYPES // @param DELAYTIMER - - number - sorta need to short circit the whole thing since vue loads a bit slowly at times. eggStoreUrlParams() { setTimeout(() =&amp;gt; { const ITEMIDPARAM = parsedUrl.query.item, TYPEPARAM = parsedUrl.query.itemType, GUNCLASS = parsedUrl.query.gunClass, BUYNOWPOPUP = Boolean(parsedUrl.query.openBuyNow), ITEMTYPES = [1,2,3,4], GUNCLASSTYPES = [0,1,2,3,4,5], HASGUNTYPE = GUNCLASSTYPES.includes(GUNCLASS), HASITEMTYPE = ITEMTYPES.includes(TYPEPARAM); if (ITEMIDPARAM) { const IDISNUMBER = parseInt(ITEMIDPARAM); let item = extern.catalog.findItemById(IDISNUMBER); if (item.is_available === false) { vueApp.showGenericPopup("uh_oh", "no_anon_title", "ok") return; } let isItemOwned = false; this.switchToEquipUi(); if (extern.isItemOwned(item)) { isItemOwned = true; this.$refs.equipScreen.switchToInventory(); vueApp.showGenericPopup("uh_oh", "p_buy_owned_title", "ok") } else { this.$refs.equipScreen.autoSelectItem(item); if (BUYNOWPOPUP === true) { console.log('Will it open?'); vueApp.$refs.equipScreen.onBuyItemClicked(); return; } } } else { this.openEquipUISwitchToShop(); if (HASGUNTYPE) { vueApp.$refs.equipScreen.switchItemType(ItemType['Primary']); vueApp.$refs.equipScreen.$refs.weapon_select.selectClass(GUNCLASS); console.log('Has GUN'); } else if (HASITEMTYPE) { console.log('OPEN item'); vueApp.$refs.equipScreen.switchItemType(TYPEPARAM); } } }, 45); }, openSpecialTagItemsTab() { let tag = parsedUrl.query.tag ? parsedUrl.query.tag : null; vueApp.showSelectedTaggedItemsOnEquipScreen(tag); }, openEquipUISwitchToShop() { vueApp.switchToEquipUi(); vueApp.$refs.equipScreen.switchToShop(); }, delayInGamePlayButtons() { vueApp.$refs.gameScreen.delayGameMenuPlayButtons(); }, //Call/hide display ads hideRespawnDisplayAd() { this.$refs.gameScreen.$refs.respawnDisplayAd.hide(); }, showRespawnDisplayAd() { this.$refs.gameScreen.$refs.respawnDisplayAd.show(); }, hideLoadingScreenAd() { this.$refs.spinnerOverlay.$refs.loadingScreenDisplayAd.hide() }, showLoadingScreenAd() { this.$refs.spinnerOverlay.$refs.loadingScreenDisplayAd.show(); }, disaplyAdEventObject(event) { let object = event; this.displayAdObject = object.size[0]; }, showTitleScreenAd() { this.$refs.homeScreen.$refs.titleScreenDisplayAdd.show(); }, hideTitleScreenAd() { this.$refs.homeScreen.$refs.titleScreenDisplayAdd.hide(); }, scrollToTop() { let position = document.body.scrollTop || document.documentElement.scrollTop, scrollAnimation; if (position) { window.scrollBy(0, -Math.max(1, Math.floor(position / 10))); scrollAnimation = setTimeout(this.scrollToTop, 10); } else clearTimeout(scrollAnimation); }, externPlayObject(playType, gameType, playerName, mapIdx, joinCode) { return extern.play({playType, gameType, playerName, mapIdx, joinCode}); }, pleaseWaitPopup() { vueApp.showGenericPopup("signin_auth_title", "signin_auth_msg"); } }, computed: { classObject() { return { 'playing-poki': this.isPoki } } } }); } &amp;lt;/script&amp;gt; &amp;lt;/body&amp;gt; &amp;lt;/html&amp;gt;</pre>
